www.itbookshub.com

Table of Contents
Cover
Title Page
Copyright
Publisher's Note
Dedication
Acknowled ments
About the Author
Introduction
Who Should Read This Book
Whats Inside
How to Contact the Author

Chapter 1: Networks
www.itbookshub.com

Describing Network Components
Classifying Networks by Function
Defining Network Architectures

Chapter 2: The OS/ Model
Using Reference Models
Introducing the Layers of the OSI Model
Describing the OSI Encapsulation Process

Chapter 3: TCP/IP
Understanding the TCPIIP Model
Describing the TCPIIP Encapsulation Process
Describing the Functions at the Transport Layer
Describing the Functions at the Internet Layer
Describing the Functions ofARP

Chapter 4: Protocols
Understanding the Function ofProtocols
Exploring Application Layer Protocols
Exploring Transport Layer Protocols
Exploring Internet Layer Protocols
Exploring Network Access Layer Protocols

www.itbookshub.com

Chapter 5: Physical and Logical Topologies
Designing the Physical Topology
Designing the Logical Topology

Chapter 6: Numbering Systems
Exploring Binary Numbering
Exploring Hexadecimal Numbering
Applying Conversions

Chapter 7: Class[ul IP Addressing
Describing the Function ofiP Addresses
Identifying IP Address Types
Utilizing Diagnostic Tools
Understanding DHCP
Introducing IPv6

Chapter 8: Classless IP Addressing
Understanding the Limitations of Classful Networking
Understanding the Benefits ofSubnetting
Describing the Components o._{ CIDR

Chapter 9: Media

www.itbookshub.com

Selecting the Proper Media Type
Understanding Cabling
Describing Wireless Standards

Chapter 10: Network Devices
Describing Device Functions
Understanding Device Placement Principles

Chapter 11: LAN Operations
Understanding the Routing Process
Describing the Switching Process
Describing End-to-End Communications

Describing Components
Describing lOS Navigation
Understanding and Managing the Boot Process

Chapter 13: Configuring Routers
Cabling the Router
Creating a Console Session
Configuring Passwords
Configuring Interfaces
www.itbookshub.com

Saving Configuration Changes

Chapter 14: Configuring Switches
Cabling the Switch
Creating a Session with the Switch
Configuring Passwords
Configuring Interfaces
Understanding Advanced Switch Functions

Ch

ter 15: Con

1

urin Static Routin

Populating the Routing Table
Configuring Inter- VLAN Routing

Understanding Routing Protocols
Configuring Routing Protocols

Appendix: Answers to Review Questions
Chapter 1
Chapter 2
Chapter 3
Chapter4
Chapter 5
www.itbookshub.com

Chapter 6
Chapter 7
Chapter 8
Chapter 9
Chapter 10
Chapter 11
Chapter 12
Chapter 13
Chapter 14
Chapter 15
Chapter 16

Index

www.itbookshub.com

Acquisitions Editor: Agatha Kim
Development Editor: Kelly Talbot
Technical Editor: Leslie Herron
Production Editor: Eric Charbonneau
Copy Editor: Sharon Wilkey
Editorial Manager: Pete Gaughan
Production Manager: Tim Tate
Vice President and Executive Group Publisher: Richard Swadley
Vice President and Publisher: Neil Edde
Book Designer: Happenstance Type-0-Ram a
Compositor: Craig W . Johnson, Happenstance Type-0-Rama
Proofreader: Nancy Bell
Indexer: Ted Laux
Project Coordinator, Cover: Katherine Crocker
Cover Designer: Ryan Sneed
Cover Image: © Wayne JohnsonliStockPhoto
Copyright © 2012 by John Wiley & Sons, Inc., Indianapolis, Indiana
Published by John Wiley & Sons, Inc. Indianapolis, Indiana
Published simultaneously in Canada
ISBN: 978-1-118-09759-5
ISBN: 978-1-118-20383-5 (ebk)
ISBN: 978-1-118-20385-9 (ebk)
ISBN: 978-1-118-20384-2 (ebk)
No part of this publication may be reproduced, stored in a retrieval system or
transmitted in any form or by any means, electronic, mechanical,
photocopying, recording, scanning or otherwise, except as permitted under

www.itbookshub.com

Sections 107 or 108 of the 197 6 United States Copyright Act, without either
the prior written permission of the Publisher, or authorization through
payment of the appropriate per-copy fee to the Copyright Clearance Center,
222 Rosewood Drive, Danvers, MA 0 1923, (978) 750-8400, fax (978)
646-8600. Requests to the Publisher for permission should be addressed to
the Permissions Department, John Wiley & Sons, Inc., 111 River Street,
Hoboken, NJ 07030, (20 1) 748-60 11 , fax (20 1) 748-6008, or online at
http :1lwww. vviley. com/ go/permissions.
Limit of Liability /Disclaimer of W arranty : The publisher and the author
make no representations or warranties with respect to the accuracy or
completeness of the contents of this work and specifically disclaim all
warranties, including without limitation warranties of fitness for a particular
purpose. No warranty may be created or extended by sales or promotional
materials. The advice and strategies contained herein may not be suitable for
every situation. This work is sold with the understanding that the publisher is
not engaged in rendering legal, accounting, or other professional services. If
professional assistance is required, the services of a competent professional
person should be sought. Neither the publisher nor the author shall be liable
for damages arising herefrom. The fact that an organization or Web site is
referred to in this work as a citation and/or a potential source of further
information does not mean that the author or the publisher endorses the
information the organization or Web site may provide or recommendations it
may make. Further, readers should be a\iVare that Internet Web sites listed in
this work may have changed or disappeared between when this work was
written and when it is read.
For general information on our other products and services or to obtain
technical support, please contact our Customer Care Department within the
U.S. at (877) 762-2974, outside the U.S. at (3 17) 572-3993 or fax (3 17)
572-4002.

Copy llJ t
www.itbookshub.com

a ri

Wiley also publishes its books in a variety of electronic formats and by printon-demand. Not all content that is available in standard print versions of this
book may appear or be packaged in all book formats. If you have purchased
a version of this book that did not include media that is referenced by or
accompanies a standard print version, you may request this media by visiting
http ://booksupport.wiley.com. For more information about Wiley products,
visit us at www.wiley .com.
Library of Congress Control Number: 2011939636
TRADEMARKS: Wiley, the Wiley logo, and the Sybex logo are trademarks
or registered trademarks of John Wiley & Sons, Inc. and/or its affiliates, in
the United States and other countries, and may not be used without written
permission. All other trademarks are the property of their respective owners.
John Wiley & Sons, Inc. is not associated with any product or vendor
mentioned in this book.
10987654321

www.itbookshub.com

Dear Reader,
Thank you for choosing Cisco Networldng Essentials. This book is part
of a family of premium-quality Sybex books, all of which are written by
outstanding authors who combine practical experience with a gift for
teaching.
Sybex was founded in 1976. More than 30 years later, we're still
committed to producing consistently exceptional books. With each of our
titles, we're working hard to set a new standard for the industry. From the
paper we print on, to the authors we work with, our goal is to bring you the
best books available.
I hope you see all that reflected in these pages. I'd be very interested to hear
your comments and get your feedback on how we're doing. Feel free to let me
know what you think about this or any other Sy bex book by sending me an
email at nedde@wiley .com. If you think you've found a technical error in this
book, please visit http://sybex.custhelp.com. Customer feedback is critical to
our efforts at Sy bex.
Best regards,

~.:0A
Neil Edde
Vice President and Publisher
Sy bex, an Imprint of Wiley

To my dear wife, Heike, who has supported me through all the late nights
working and missed weekends and who has endured my ill temper
throughout this process. She is living proof there are angels among us.

Acknowledgments
I want to thank the entire editing and production staff that has helped to
make this book as good as it can possibly be. That includes Kelly Talbot, my
development editor, who gave me great advice beyond simply grammar and
style. I took full advantage of all his years of experience as an editor. He was
the conductor of this orchestra and ensured that everything was \iVhere it was
supposed to be, when it was supposed to be.
I also would like to thank the technical editor, Leslie Herron, who saved
me from myself a number of times. It is so comforting to know that someone
with deep technical knowledge is looking over your shoulder. That also goes
for Eric Charbonneau, who caught things that all of us missed, and the other
members of the team, Pete Gaughan, Connor O'Brien, and Jenni Housh.
A special thanks goes to Jeff Kellum for recommending me for this book
and to Agatha Kim, the acquisition editor, for selecting me for this book and
helping to guide me through the entire process.

About the Author
Troy McMillan is a trainer and writer from Atlanta, Georgia. He began his IT
career with IBM in 1999 supporting point-of-sale systems. After achieving his
MCSE, he became a network administrator in the Atlanta office of a global
manufacturer of electric motors. In 2000, he took his first job as a trainer,
teaching MCSE classes to career changers at a local IT school in Atlanta.
In 2001 , Troy started delivering corporate training for New Horizons in
Atlanta. His concentration was in Microsoft, CompTIA, and Cisco classes.
In 2002, Troy started his own training company while continuing with New
Horizons on a contract basis and also teaching at various colleges and
technical schools in the Atlanta area.
In 2003 , Troy began traveling the United States and Canada, teaching
Cisco, wireless (CWNA program), and Microsoft classes for training
organizations such as Global Knowledge, New Horizons, PPI, and Know logy .
In 2005, Troy accepted a position with Kaplan IT Certification
Preparation, creating practice tests and study guides for the Self-Test and
Transcender brands. His work includes Microsoft, but he is the principal
Cisco writer.
Troy's first book, Change Your Career: Computer Network Security as
Your New Profession, was released in 2007. This guide provides resources
and helpful hints for career changers considering this field.
Troy began contributing to and providing technical edits for Sybex books
in 2009. He contributed to Todd Lammle's CCNA Wireless Study Guide:
IUWNE Exam 640-721 and CompTIA Network+ Study Guide: Exam:
N J0-005, provided technical edits and contributions to Todd's CCNA Cisco
Certified Network Associate Review Guide: Exam 640-802, and was technical
editor for Darril Gibson's Windows 7 Desktop Support and Administration:
Real World Skills for MCITP Certification and Beyond (Exams 70-685 and
70-686) . He is currently providing technical editing on Toby Skandier's

Network Administrator Street Smarts: A Real World Guide to CompTIA
Network+ Skills.
In 2010, Troy coauthored VCP VMware Certified Professional on vSphere
4 Review Guide with Brian Perry, Chris Huss, and Jeantet Fields. He also
created and edited textbooks for Penn Foster on Apple computers, basic
troubleshooting, and mobile devices. Troy created classroom instruction
materials for many of the Sybex titles already listed as well as for MCTS:
Windows Server 2008 R2 Complete Study Guide (Exams 70-640, 70-642 and
70-643) by William Panek.

Prior to his career in IT, Troy was a professional musician. From 1968
to 1986, he recorded and performed with many of his own bands and as a
backup musician for acts including Vassar Clements and Delbert McClinton.
He worked for a number of years as a session musician and songwriter
in Nashville as well. In 1983, he returned to school, earning a BBA in
management from Georgia State University in 1986. He operated his O\¥n
businesses after graduation as well as working several years in retail
management. He began a self-study in IT in the 1990s, leading to his first IT
job at IBM.
Troy lives with his wife, Heike, and a house full of dogs, cats, birds, and
fish in Atlanta, Georgia. He enjoys running, music, and sports of all kinds,
especially NASCAR.

Introduction
This book is designed to fill a gap that has existed for some time in technical
books and instructional materials covering networking in general and Cisco
technology in particular. As a trainer, I have struggled to find materials that
strike a middle ground between basic networking texts and books that jump
immediately into certification-level topics that many readers and students are
not prepared to digest.
There will always be a market for books designed to present and review
certification-level topics to those who are already familiar with the knowledge
required to understand those topics. In today's economic times, however,
there is a whole new breed of students who are either taking classes or
operating in a self-study capacity but do not have this prerequisite knowledge
and may not even realize this as they attempt to tackle certification-level
classes and books.
I have seen these students in my classes over the years. They are no less
intelligent or motivated than the students who have more background and
experience. But at the pace at which these books and classes must move to
cover all the material, they soon find themselves struggling. Some even give
up entirely .
This book covers all of the basic knowledge required for you to really
understand routing and switching. It provides the required amount of time
for you to digest the fundamentals before moving on to actually setting up
and configuring the routers and switches and seeing them operate. It does not
attempt to cover every bell and whistle that these devices offer, nor does it
cover every topic that is on a Cisco CCENT exam. What it does do is provide
all of the basic network knowledge from a Cisco perspective.
The student who reads this book and works through these exercises or the
student who takes a class using this book as its text will come away ready in

every way to tackle books and classes targeted for exam prep for the CCNA.
That is the goal of this book and was our guiding principle throughout its
creation.

Who Should Read This Book
This book is designed for anyone wishing to gain a basic understanding of
how networks operate and how Cisco devices in particular fulfill their roles in
the process. This includes the following :
• Those \iVho have been away from the IT industry for some time and
are reentering the field
• Career changers with no previous experience
• Students who have struggled with certification -level prep materials
• Students who have had success with certification-level prep
materials but came away from the experience with a shallow
understanding of the core foundational kno\iVledge

What's Inside
Here is a glance at what's in each chapter:
Chapter 1, "Networks," describes network components, classifies LANs
and WANs by function, and compares and contrasts peer-to-peer and
client-server networks.

Chapter 2, "The OSI Model," explains the purpose of reference models,
introduces the layers of the OSI model, and describes how the layers relate
to the encapsulation process.

Chapter 3, "TCP/IP ," explains the TCPIIP reference model, compares it
to the OSI model, and describes the function of the four layers of the
model.
Chapter 4, "Protocols," describes the function of protocols in networking
and surveys various protocols that operate at each layer of the TCPIIP
model.
Chapter 5, "Physical and Logical Topologies," defines the meaning of
a topology in networking and describes the main physical and logical
topologies.
Chapter 6, "Numbering Systems," explains the main numbering systems
of importance in networking, the binary and hexadecimal systems, and
how they are converted to and from the decimal system.
Chapter 7, "Classful IP Addressing," explains the basics of IP
addressing, identifies the types of IP addresses, introduces network
troubleshooting tools, and describes the use of DHCP to automate the IP
configuration process.
Chapter 8, "Classless IP Addressing," points out the shortcomings of
classful IP addressing, explains the benefits of classless subnetting, and
introduces the components of CIDR.
Chapter 9, "Media," begins with a brief description of media types,
explains cable behaviors and characteristics, and ends with a survey of the
types of cables and their proper use.
Chapter 10, "Network Devices," describes the functions of the various
devices found in a network and explains design principles guiding their
placement.
Chapter 11, "LAN Operations," explains both the routing and the
switching process and describes how they fit together in end-to-end
communication.

Chapter 12, "Managing the Cisco lOS," introduces the components of
the Cisco operating system , describes the boot process of a router or
switch, and describes how to navigate the command-line interface.
Chapter 13, "Configuring Routers," explains how to get a router
operational, including cabling the router, logging into the lOS, securing the
router, and configuring its interfaces.
Chapter 14, "Configuring Switches," explains how to get a switch
operational, including cabling the switch, logging into the lOS, securing
the switch, configuring its switchports, and creating and managing
VLANs.
Chapter 15, "Configuring Static Routing," explains how routes are
configured and verified at the CLI and how to configure inter-VLAN
routing.
Chapter 16, "Configuring Dynamic Routing," introduces how dynamic
routing functions, explains the types of routing protocols, and describes
how to configure an example of each.

NOTE
Each chapter contains Additional Exercises and Review Questions.
The answers to the Review Questions can be found in the book's
Appendix.
Please
vtstt
the
book's
companion
website
(www.sybex.com/go/ciscoessentials) to compare your answers to
the Additional Exercises with the author's answers.

How to Contact the Author

I welcome feedback from you about this book or about books you'd like
to see from me in the future. You can reach me by writing to
mcmillantroy@hotmail.com or troy.mcmillan@kaplan.com.
Sybex strives to keep you supplied with the latest tools and information
you need for your work. Please check their website at www.sybex.com, where
we'll post additional content and updates that supplement this book should
the need arise. Enter Cisco Essentials in the Search box (or type the book's
ISBN 918-1-118-09759-5), and click Go to get to the book's update page.

www.itbookshub.com

Chapter 1

Networks
Computer networks are everywhere. It's impossible to escape them in the
modem world in which we live and work. We use them at work, at home, and
even in between, in places like our cars, the park, and the coffee shop. We
have come to take them for granted in the same way we treat electricity and
hot water.
But a lot is going on behind the scenes \iVhen we use these networks. Cisco
routers and switches play a critical role in networks' successful operation.
This opening chapter lays the foundation required to understand all the
details that make networks function. Specifically, this chapter covers the
following topics:
• Describing network components
• Classifying networks by function
• Defining network architectures

Describing Network Components
To understand how networks work, it helps to have an appreciation of why
they exist in the first place. As incredible as it may seem now, for a number
of years, when computers first came into use, very few computers were
networked. They operated as little islands of information with no connection
to one another. Data had to be transferred between computers by copying it

to a floppy disk, physically taking that floppy disk to the other computer, and
copying the data to the destination machine. This process is now sometimes
jokingly referred to as the sneakernet.
Modem networks can include many components. Some of the most basic
components are computers, routers, and switches. Figure 1-1 shows some
Cisco routers and switches. Routers are used in a network to transfer
information between computers that are not on the same network. Routers are
capable of doing this by maintaining a table of all networks and the routes
(directions) used to locate those networks. Switches come in two varieties.
Layer 2 svvitches simply connect computers or devices that are in the same
network. Layer 3 switches can do that but are capable of acting as routers as
well. Two models of routers are depicted in Figure 1-1, with a switch in the
middle of the stack. Routers and switches are covered in depth in Chapter 10,
"Network Devices."

Fi2ure 1-1: Cisco routers and switches

In this section, the benefits of networking are covered as well as the
components required to constitute a network.

Defining the Benefits of Networks
There are many benefits to networks, one of which was touched on in the
introduction to this section: using a network makes sharing resources possible
(without putting on your sneakers and leaving your seat). When connected

by networks, users can share files, folders, printers, music, movies, you name
it! If it can be put on a hard drive, it can be shared. Additional benefits are
included in the following list
Resource Sharing Resource sharing is less earthshaking at home, but in
the workplace it was a key element that drove the adoption of PCs. Other
computer types such as mainframe computers and dumb terminals were
already in use, but were seen as specialized pieces of equipment to be
used only by guys in lab coats and some other geeky types. There were
other reasons for the PC revolution, but resource sharing helped to increase
productivity. As an example, 10 coworkers could access a file on the
network at the same time, which eliminated the time and effort spent
burning, labeling, transporting, and storing 10 floppies.
The term resource is used extensively when discussing
networking and simply refers to anything that a user on
one computer may want to access on a different computer.
Examples include files , folders, printers, and scanners.

Reduced Cost and Easier Installation of Software Another advantage for
business that didn't become apparent as quickly as resource sharing was a
reduced cost of software. Many software products are sold to organizations
on a network basis. For example, instead of buying 25 retail versions of
word processing software, a single copy can be purchased for the network
and then a number of seat licenses can be added to the bundle. The result
is a significant savings to the company.
Taking that idea a step further, the network also makes it possible to place
the installation files (from the CD containing the software) on a server and
to then install the software over the network (as sho\iVn in Figure 1-2). This
capability relieves IT staff from having to physically visit each machine
with CD in hand to perform the installation. Moreover, the software could

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

be installed on all five machines at once over the network by using those
same files.

Fi2ure 1-2: Network installation

Target Computer

Distribution Server

Target Computer
Target Computer

Target Computer

Target Computer

Improved Security All this peace, love, and sharing doesn't mean that
everything is available to everyone. Shared resources can be secured with
restrictions on who can access them and what exact access each individual
possesses. So you can share a file on your computer but share it with only
two of your coworkers, and not all of them. Moreover, you could allow
one coworker to only read the document while the other could be allowed
to edit or even delete the document.
This type of control was difficult when files were shared on floppies. After
the floppy left your hand, it was out of your control. Computer networks
can enforce security controls among the computers and users.
Improved Communications It's hard to even imagine today 's workplace
without email, instant messaging, video chatting, and conferencing, but
25 years ago, these tools did not exist. In today's world, almost no
communication can wait for regular postal mail (this service that we once
depended on is now often called snail mail). Even more impressive is that
distance is no obstacle. You can chat online with someone in India or
China as easily as with a fellow worker sitting in the next cubical!
Now think of all the paper that is being saved that used to be consumed
by companies sending regular mail to one another. The problem was
Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

multiplied by the need to keep multiple copies of the documents sent
through the regular mail. Email systems can be configured to maintain a
copy of every email sent, and documents that used to exist in multiple
physical copies now reside as a single digital copy on a server (and
probably also on a backup tape).
Meetings that used to require plane trips and hotel stays can now be held
online with all participants able to see one another, share documents, view
slides or documents from the presenter, and even hold votes and surveys.
The only consideration is time zones!
More Workplace Flexibility Users are no longer physically tied to the
same computer. If resources are stored on servers, as they are in most
organizations, a computer problem no longer renders a user unable to
work. In a domain-based network (more on that later in this chapter in
the section "Understanding Client-Server Networks"), the user can move to
any other computer that is a member of the domain, access his files on the
server, and continue to work while his computer is repaired or replaced.
Building on this idea, workers are increasingly telecommuting as they can
use the Internet to connect to the work network and operate as if physically
present in the office.
Telecommuting means working from another physical
location, usually from home. It saves gas, time, and in many
cases results in more productivity on the part of the worker.

Reduced Cost of Peripherals When users can share printers, scanners, and
fax machines, usually fewer devices are needed. This reduces costs for
the organization. Sharing these devices also offloads the responsibility for
managing and maintaining these shared devices.

Peripherals are any devices that operate in conjunction with
the computer yet reside outside the computer's box.
Examples include the display, mouse, keyboard, printer,
camera, speakers, and scanners.

Centralized Administration Although not possible in a peer-to-peer
network, in a domain-based network, all computer administration is
centralized. This means that the LAN administrator is responsible for
maintaining the security of the network, and this \iVOrk is done from a
special type of server called a domain controller. Domain controllers
do more than provide security. They also serve as the directory of the
resources available on the network. This is why these services are called
directory services. (Peer-to-peer networks, domain-based networks, and
LANs are explained throughout the rest of this chapter.)

Directory Assistance, Please!
Directory services, such as Active Directory by Microsoft, help users
to locate files, folders, and other resources in the network.

Identifying the Requirements for a Network
A network cannot be called a network if it does not meet certain requirements.
At their simplest, those requirements include the following:
• At least two computers
• A resource that needs to be shared
• A transmission medium
• A communications agreement

Each requirement is detailed in the following list. The coverage of the last
two bullet points is somewhat brief as transmission mediums are discussed
in Chapter 9, "Cabling," and protocols (communications agreements) are
covered in detail in Chapter 4, "Protocols."
At Least Two Computers It seems obvious, but if there are not at least
t\;vo computers, there is no need for a network. A single computer doesn't
need a network to access the information on its own hard drive. Getting
information from computer A to computer B without using the sneakemet
is what drove the development of net\;vorks.
A Resource That Can Be Shared You already know from our earlier
discussion that resources are anything that needs to be shared. This can
include physical entities such as printers and scanners, or it can be files
and folders located on another computer, as shown in Figure 1-3. If it can
be shared and moved from one computer to another, it can be considered a
resource.

Figure 1-3: Sharing resources
~;dJ +-•--l)'-----.Jo~

Workstation B

~
Workstation A

Printer A

A Transmission Medium Some form of communications medium is also
required. The most common form is a cable, but wireless communications
are becoming increasingly widespread because of certain advantages to
this approach. Both methods are shown in Figure 1-4.

Figure 1-4: Transmission mediums

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Laptop A

/: (6)
Wireless
Access Point
Access
Switch

Laptop B

Wired
Desktop A

Medium? Do I Need a Ouija Board?
A communications medium is any process that can be used by t\;vo
computers to transfer data. It can be bounded (via a cable) or boundless
(wireless).

A Communications Agreement One of the main stumbling blocks present
when computers were first being networked was a language problem. As
you know, two people who need to converse cannot do so unless they
speak a common language. Likewise, computers have to be speaking the
same language in order to have a communications agreement. Networking
languages are called protocols. In Figure 1-5, workstation 2 is able to
communicate with workstation 3 because they are both using TCP/IP, but
cannot communicate with workstation 1 because it is using IPX/SPX, a
different networking protocol.
Protocols are discussed in Chapter 4.

Fi&ure 1-5: Protocol agreement

t H rll

~

lllt

1 lli

Workstation 1

r=-.

I have some data
for Workstation 2.

What ??? I can't
understand you?
Workstation 2
I have some data
for Workstation 2.

Thanks. I'm
Workstation 2.
Workstation 3

Before the standardization of network protocols, brought about by the
explosion of the Internet and the introduction of reference models such
as the OSI and the DoD models, computers from different vendors could
not be networked together because they used proprietary and dissimilar
network protocols.
The OSI and DoD network models are covered in Chapter 2,
"The OSI Model."

In addition to the mm1mum requirements for a network, additional
components are usually present in varying combinations. Repeaters are
devices designed to regenerate or strengthen transmission signals to avoid
attenuation or weakening of the signal, which leads to data corruption. Hubs
are junction boxes with no intelligence that are used to connect devices
together on the same physical network. Switches can act as hubs but provide
vastly improved performance and offer additional functions not available in
hubs. Routers, as discussed earlier, are used to connect networks and allow
computers located on different networks to communicate. Cisco routers and
switches are intelligent because of the Cisco Internetwork Operating System
(lOS), which is included in and is used to manage the functions of these
products. The Cisco lOS is discussed in Chapter 12, "Managing the Cisco
lOS." Routers, switches, and hubs are covered in detail in Chapter 10.

t H rll

~

lllt

1 lli

Proprietary vs. Standard
The term proprietary, used often in the IT world, refers to any process
or way of doing something that works only on a single vendor's
equipment. The opposite of this is a standard, which is any way of
carrying out a function that the industry has agreed upon. An everyday
example of a standard is the ubiquitous wall socket. A standard was
developed so that consumers could be assured that any electrical device
would match this standard outlet type.

As the next few chapters unfold, you will gain new perspectives about
these requirements as you learn more about the details of each. Now let's look
at some characteristics of various types of networks.

Classifying Networks by Function
Networks can be classified according to a number of different characteristics.
They can differ based on location, and they can differ in the security
relationship that the computers have with another. These are not the only
ways networks can differ, but they are commonly used distinctions. In this
section, the distance factor is examined in a discussion of LANs and W ANs.
After examining LANs and W ANs, you will take a closer look at defining
networks by security relationships in the "Defining Network Architectures"
section.

Understanding LANs
If you survey networking books, you will find that the distinction between
a local area network (LAN) and a wide area network (WAN) differs from
one text to the next. In some treatments of this subject, the difference lies
www.itbookshub.com

in physical location, while in others the distinction is discussed in terms of
the speed of the connection. Because this text is designed to prepare you to
manage Cisco routers and switches, a Cisco perspective is appropriate.
Cisco defines a LAN as a high-speed data network covering a small
geographical area. For the purposes of this discussion, a LAN is a single
physical location, which could be a part of a building, an entire building, or a
complex of buildings.
In the vast majority of cases, the network will use a networking technology
called Ethernet. Other technologies do exist (such as one called Token Ring),
but Ethernet has become the de facto standard technology that is used for
connecting LANs.
Ethernet is discussed in more detail in Chapter 2 and Chapter
5, "Physical and Logical Topologies."

Standards
As stated earlier in this chapter, a standard is an agreed upon way of
doing things. In the networking world, there are two types: official
and de facto. An official standard is one that all parties agree to
and is usually adopted by a body formed to create standards, such as
the International Organization for Standardization (ISO) . A de facto
standard, on the other hand, is one that becomes the standard simply
by being the method that all parties gradually choose to use over a
period of time, without a formal adoption process.

Ethernet networks are typically built, owned, and managed by an
organization. It is impractical for the organization to connect offices in two
cities with Ethernet cabling (for many reasons that will be discussed later, one
of which is a limit on cable length of about 100 ft.) .

In a LAN, all of the computers are connected with a high-speed
connection. High speed is a relative term, but in this case, it indicates at
least 10 Mbps. In most cases today, the connection will be either 100 Mbps
or 1,000 Mbps. The location may contain multiple buildings ~ it could even
be an entire complex, but if the buildings are connected with a high -speed
connection, they would still collectively be considered a single LAN.
Cables are discussed in Chapter 9.

Understanding W ANs
A wide area network (WAN) is a collection of LANs connected to one another
with a WAN technology or with the Internet, allowing it to function as one
large network. In the previous section, the impracticality of a company strung
together by private Ethernet lines from one office to another was mentioned.
Above and beyond the cable length issue, there would be issues of where to
place the cables and how to maintain them.
The solutions that are available are as follows :
• Leasing a WAN connection from a telecommunications company
• Using the Internet
When a WAN connection is leased from a telecommunications provider,
the company offloads all maintenance and simply uses the existing network
that the telecommunication provider built. The advantage to this approach
is that your connection is dedicated, meaning there is no other traffic on
it. WAN technologies do not use Ethernet. There are a variety of WAN
connection types, such as Frame Relay, Integrated Services Digital Network
(ISDN), and Point-to-Point Protocol (PPP), and each has advantages and
disadvantages.

WAN technologies are beyond the scope of this book. For
more information, simply search for WAN methods on the
Internet.

Another available option is to use the Internet. When this approach is
taken, the company creates a logical connection called a virtual private
network (VPN) between the offices by using the Internet as the physical
medium. It is called private because the information that crosses the Internet
from one office to another is typically encrypted so that if it is intercepted, it
cannot be read.
Regardless of the underlying details, a WAN is used to connect LANs. The
relationship between the two network types is illustrated in Figure 1-6 . The
figure depicts three LANs in different cities using the wide area connection to
form a WAN.

Figure 1-6: A wide area network (WAN)

Atlant•

Defining Network Architectures
The architecture (or structure) of a network can be discussed from both a
physical and a logical vie\iVpoint. For example, in the previous section you
looked at ho\iV distance can be used to differentiate networks into architectures
called LANs and WANs. The architecture of a network can also describe the
Copy llJ t

a ri

rules and processes used on the network. The security relationships that exist
among the computers on the network can define different architectures. In this
section, the difference between peer-to-peer and client-server architectures is
explored.

Understanding Peer-to-Peer Networks
Peer-to-peer networks \¥ere the first type of networks to appear. This type
of network is often referred to as a workgroup. In a peer-to-peer net\;vork,
each computer is in charge of its own security, and the computers have no
security relationship \¥ith one another. This does not mean that the users on
the computers cannot share resources ~ otherwise, it wouldn't be a network!
There are certain shortcomings to this paradigm. In a workgroup, a user
can access resources on another computer only if that user has an account on
the computer where the resource resides. Moreover, depending on how the
sharing is set up, she may also have to identify herself and provide a password
to access the resource.
The ramifications of this can be illustrated with an example. Suppose you
have four computers in an office that are used by four different users. If your
goal is to allow all users to access resources located on all four computers, you
would have to create an account for each person on all four computers. That
means you would be creating 16 accounts in all (4 computers x 4 people).
That's a lot of work ! (I guess it's a form of job security!)
Figure 1-7 illustrates this situation. Each computer is named after its user,
and as you can see, all users must have an account on all computers. Also note
each user can be given different levels of access. Note that the passwords that
a user has been assigned on any t\;vo computers have no relationship to each
other. A user can have the same password on all computers, or a different
password on each computer, with no effect on functionality because they are
not related to each other in any way in a peer-to-peer network.

Figure 1-7: Peer-to-peer architecture
Copy llJ t

a ri

R011e.r

)J

Usei$-PoSSWord-Ae<ess

Users-Possword-Ae<ess

Roger 117% Full
Brianna pM6Q% Read
George bilter&petty FuD
JJ balfshellf Full

R011er 117% Full
Brianna pas66% Read
George bilter&petty Full
JJ balfsbellf Full

BriaMa

Users.-Password·Acce:ss
Roger s.aiQU Full
Brianna 208ZZ Read
George biner&Jl<I1Y Read
JJ fullneiSon Read

George

Users..Password·Access
Roger su~QU Full
Brianoa 867S3o9 Read

George topzme Full
JJ halfsbeiiN Full

Another challenge with workgroups is that after the number of computers
gets beyond 10, two problems occur. First, because of the nature of the
communication process that occurs in a workgroup, traffic overwhelms the
physical infrastructure, and the network gets very slow. This occurs because
in order to locate each other, the computers must broadcast for one another.
A broadcast is akin to a person calling out in a crowded room, "Who is Joe?"
Then, when Joe answers, you send him the data. In Figure 1-8, workstation 10
is seeking to connect to a computer named Bannarama, so a broadcast is sent
out to every computer. Then Bannarama answers with its IP address.
Moreover, unlike humans, the computers can remember who is vvho for
only a minute or so, and then they must broadcast again.
The second problem that occurs when more than 10 computers are present
in a peer-to-peer network has to do with the design of client operating
systems. Most client operating systems (meaning any operating system that is
not a server operating system) can host only 10 concurrent connections from
other computers at a time. So if a popular file is located on a computer in a
workgroup, and 10 computers are already connected, the 11th computer won't
be able to access the resource until a computer disconnects!
An IP address is a number in a specific format that is used
to identify a computer. This topic is covered in detail in
Chapter 7, "Classful IP Addressing ."

Copy llJ I

a ri

Figure 1-8: Broadcasting
Who is Banannarama?

Wo~tation

10
That's me!
My address is

192.168.5.6.

Workgroups still have their place and their advantages. One is low cost
when compared with a client-server network. Obviously, no servers (which
cost more than client computers) need to be purchased. Workgroups are also
quite simple to set up when compared with client-server networks. Home
networks are usually peer-to-peer, and many small office and home office
(SOHO) networks function well as workgroups.
However, in medium to large networks=- the management of security
becomes an administrative nightmare. As discussed earlier, each user must
have an account on every computer that he will use or access over the
network. Also=- peer-to-peer networks are not scalable. When a network can be
grown (with respect to the number of computers) without causing additional
network traffic or additional administrative effort=- it is said to be scalable.
In summary, the advantages of a peer-to-peer network are as follows:
• Low cost
• Easy to set up
• No server required
The disadvantages of a peer-to-peer network are as follows :
• No centralized control of security
• Administrative burden of maintaining accounts on all computers
• Not scalable

Copy llJ t

a ri

Understanding Client-Server Networks
The most obvious difference between a client-server net\;vork and a peer-topeer network is the presence of at least one server. This brings up an issue that
needs to be addressed before you encounter it. There are two explanations of
a client-server network that are commonly used. Both are applicable, so let's
cover both.
First, a client-server network can be explained in terms of resource access.
When viewed from this perspective, it means that the shared data is
centralized on a device called a file server.

What's the Difference between a Client
and a Server, Anyway?
Which computer is the client and which is the server is simply a matter
of perspective. If the computer is seeking to access a resource on
another computer, it is acting as a client. If it possesses a resource
that another computer accesses, it is acting as a server. Consequently,
computers in a peer-to-peer network will be acting as either at various
times, depending on whether they are accessing a resource or allowing
access to a resource .

A file server is a computer that contains resources (files) that users in the
network need. A server's operating system is designed differently than one
that will be used on client computers. It is not bound by a limit to the number
of connections. Hundreds of computers can connect. The advantage is that the
security surrounding the resources can be centralized on that server.
Using our example from Figure 1-7, if there was a file server in that
network, we would not have to create an account for every user on all
computers. We would have to do that only one time, on the server where the
resources are located.
Copy llJ t

a ri

The other explanation of a client-server network takes this a step further.
These networks are sometimes called domain-based networks. In this case,
the server is a special type of server called a directory server or domain
controller.
A directory server or domain controller maintains the
location of all resources in the network (including the
computers themselves) and the locations of each. The
computers in the network use this server to find things.
Instead of broadcasting to find resources, the computers
check with the directory server, which results in a great
reduction of traffic!

The domain controller creates a group security association between the
computers that are members of what is commonly called a domain (or a realm
in Unix). After a user is made a member of the domain, the user will have
two types of user accounts: a local account on her computer, as she had in
the peer-to-peer network, and a domain account. The domain account will be
created on the domain controller where it will be stored.
This domain account will allow the user to log into the domain from any
computer that is a member of the domain. This simplifies the account creation
process in the same way illustrated in the explanation of using a file server.
The accounts are created one time on the domain controller, and then the
account will work on any computer in the domain.
The domain controller, rather than the individual computers, is responsible
for validating the credentials of users. Whenever a user logs into the domain
from a member computer, the login request is sent to the domain controller,
which verifies the name and password and then sends the user an access
token. An access token is a file that lists the resources that the user is allowed
to access in the network, regardless of where the resource is located.
The benefit of this security paradigm is a feature called single sign-on.
After logging into the domain, a user will not be prompted for a password

again, even when accessing resources. It doesn't even matter which computer
the resource is on!
On other hand, there are disadvantages to implementing a client-server
network. The hardware and software required to deploy servers is
significantly more expensive than client software found in a peer-to-peer
network. Configuring and maintaining these servers also requires a much
higher degree of skill.
Moreover, when a single domain controller is in use, a single point of
failure has been introduced to the operation of the network. If something
happens to the domain controller, such as a hardware failure, all access
to resources can be interrupted. For these reasons, most networks deploy
multiple domain controllers to eliminate this single point of failure, further
adding to the cost of deploying a client-server network.
In summary, these are the advantages of a client-server network:
• Centralized administration
• Single sign-on
• Reduced broadcast traffic
• Scalability
Scalability means that the network can grow without the
congestion problems that arise when a peer-to-peer network
grows larger.

Disadvantages of a client-server network are as follows:
• Higher cost for server software and hardware
• More challenging technically to implement
• Single point of failure with a single domain controller or single file
server
Figure 1-9 compares the peer-to-peer and client-server networks.

8

Figure 1-9: The client-server model (top) and the peer-to-peer model
(bottom)
The Client-Server Model
Oient

Oient

Client

~alent

<:::3

<:::3

The Peer-to-Peer Model
Oient

Oient

Client

~Oient

<:::3
Oient

Oient

The Essentials and Beyond
Networks allow computers to communicate and share resources_
At their simplest, the requirements are two computers connected
by communications media sharing a resource _ The advantages of
networks are resource sharing, lower software and peripheral costs
in the enterprise, workplace flexibility , improved communications
and security , and centralized administration.
A LAN is a network of computers connected with a high-speed
connection and located in one physical location_A WAN is a group
of geographically distributed LANs joined by a WAN connection. A
LAN can be either a peer-to-peer network or a client-server network_
Resource access and security are distributed in a peer-to-peer
network, while both are centralized in a client-server network

M t
www.itbookshub.com

al co

dt

""'

d

ora

Additional Exercises
You are a consultant specializing in network design. Consider
the following scenarios and propose a design using the principles
discussed in this chapter (LAN, WAN, peer-to-peer, client-server).
Be prepared to discuss and defend your answer.
• An auto parts chain with 75 locations in five states
• A doctor's office with three computers
• A call center in which the users work in three shifts using
a single set of computers

Review Questions
1. Which of the following is not an advantage of networking
computers?
A. Resource sharing
B. Reduced security for data
C. Potential for increased productivity
D. Improved communications
2. A server is one that forms a security association between
network members and helps to locate resources.

A. File
B. Directory services
C. Security controller
D. Netvvork browser
3. What is the minimum number of computers required to fonn a
network?

A. One

B . Two
C. Three
D . Four
4. True or False: Telecommuting is when a user works from
another physical location.
5. What is a protocol?
A. A type of transmission medium
B . A security agreement
C. A communications agreement
D . A suggested best practice
6. refers to any process or way of doing something that works only
on a single vendor's equipment.
A. Proprietary
B. Standard
C. De facto
D. Registered
7. Which statement is true ,;vith regard to a LAN?
A. Distributed across a large geographical area
B . High speed
C. Leased from a telecommunications company
D . Requires a server
8. True or False: A de facto standard is one that all parties agree to
and is usually adopted by a body formed to create standards.

9. A peer-to-peer network is also sometimes called a.
A. Realm
B. Domain
C. Workgroup
D. Organizational unit
10. Which of the follovving are shortcomings of a peer-to-peer
network?
A. Difficult to implement
B. Requires server
C. High cost
D. Network congestion

Chapter 2

The OS/ Model
When the benefits of networking computers first became apparent, one of
the challenges of doing so was a lack of standardization among the makers
of hardware and software. Most networking solutions of the time were
proprietary in nature, making it difficult to mix computer solutions from
different companies. To put it in the vernacular of the time, everyone was
"doing their own thing." While that was a popular slogan and approach to life
at the time, it was not a good situation for networking.
In this chapter, two reference models developed to address this situation
are discussed. The model that the International Organization for
Standardization (ISO) created is the primary focus of the chapter. Another
reference model, the Department of Defense (DoD), or the Transmission
Control Protocol/Internet Protocol (TCPIIP), model (which is covered fully
in Chapter 3, "TCP/IP"), is briefly discussed as a point of comparison. Keep
in mind that these are only models, and some parts of the models evolved
differently in the real world than originally envisioned. However, they did
serve the purpose of establishing common ground that resulted in the
interoperability that gives us the robust net\vorks that we have today.
Specifically, this chapter covers the following topics:
• Using reference models
• Introducing the layers of the OSI model
• Describing the OSI encapsulation process

Using Reference Models
In the early days of networking, various manufacturers were using
incompatible networking protocols and systems for identifying and locating
computers on a network. The idea of locking customers into a system by
making the system proprietary seemed like a good idea in the beginning. But
it soon became apparent to the industry that if everyone got on the same page,
everyone could sell more hardware and software.
What the industry needed was a vendor-neutral organization to bring order
out of the chaos. The International Organization for Standardization (ISO)
became that organization.

The ISO
The International Organization for Standardization (ISO) creates all
sorts of standards, and they are not limited to computers and
networking. The ISO has developed more than 18,500 international
standards on a variety of subjects, and s01ne 1,100 new ISO standards
are published every year.
~ ·

ISO
~

This group created a reference model called the Open Systems
Interconnection (OS!) model to act as a common blueprint for all vendors to
work from , with the goal of promoting interoperability among vendors.
The ISO went about this job by creating standards. Standards are entirely
voluntary in nature. They are not laws. No vendors are required to abide by
them. In some cases, some vendors chose not to follow the standard until it
became apparent that the standard had been widely adopted. Most vendors
saw the creation of standards as a benefit and came onboard. In fact, many of
8

the people working on the committees that created these standards came from
these companies.
It's only natural that some vendors, particularly large ones, had more
influence on decisions that were made than others. The ideal approach would
have been to examine all proposals and select the best one on an impartial
technical basis, but in reality, some industry voices were louder than others.
Cisco was and remains a large player in how networking is done.
Regardless of each player's size and influence, all parties appreciated the
benefits of reference models. In this section, you'll look at some of those
benefits and then explore another model before diving into the OSI model
itself in the next section.

Understanding the Benefits of Reference
Reference models provide a common blueprint from which software and
hardware developers can work. The benefits of using reference models such
as the OSI model and the TCP/IP, or DoD, model (discussed in the next
section) are as follows:
• It encourages standardization by defining what functions are
performed at particular layers of the model.
• It breaks the communication process into parts, taking a modular
approach that allows each layer to perform its particular function
without regard to the other layers. This ultimately aids in
component development at each layer by providing an assurance
that the layer can be made to communicate with the layers above
and below it.
• It prevents changes in one layer from causing a need for changes in
other layers, speeding development.
• It allows various types of software and hardware to communicate
through a standardized communication process from layer to layer.

• It encourages vendors to build on each other's developments
through use of a common framework.

During the following discussion of reference models~ keep in mind that
the layers ~ as they are called, represent logical functions that are a part of a
communication process between two entities, usually computers. The goal of
breaking a complicated communication process into parts, or modules(which
is why this process is described as modular), is to avoid the need to
completely reinvent the entire communication process when a new
development takes place. By standardizing the interface between two layers
(interface just means the way they exchange infonnation), a change can be
made on one layer without requiring a change at any other layer. As long as
the standard interface between the two layers remains unchanged, the process
continues to work smoothly.

Exploring Reference Model Examples
Although the OSI model is where we vvill spend the bulk of our focus ~ it is not
the only reference model. The Department of Defense (DoD) created a fourlayer model in the early 1970s based on the protocol that eventually became
the protocol of the Internet and later the de facto standard for LAN protocols,
called the TCPIIP or Internet model.
The TCPIIP model uses four layers, and the OSI model uses seven~ but
they explain the same process of packet creation or encapsulation. All of the
same functions take place in each model; in the TCPIIP model, they are just
organized logically into fewer layers. As you will see, some of the TCPIIP
layers correspond to, or map to, multiple layers of the OSI model.
Figure 2-1 illustrates how the OSI and the TCP /IP models are related to
one another. Refer to this figure as the layers of the OSI model are explained
and keep in mind that the process of encapsulation is the same in both models;
only the number and names of the layers are different.
Figure 2-1: OSI and DoD models
8

OSI
7

TCP/ IP

----------

Application

6 Presentation
5

4

Session
-

4

Transport

3

Network

2

Data-Link
Physical

· +-------4

3
-

1

Application

Transport

· +-------4

2

Internet

1

Network
Access

--- _.....____

....,~

The Importance of Both Models
Most reference model mappings, whether they concern protocols or
devices, will be in terms of the OSI model. However, with respect
to the study of the TCPIIP protocol suite, it is important that you
understand the TCPIIP model, which is covered in detail in the next
chapter.

Introducing the Layers of the OSI
Model
There are seven layers in the OSI modet each layer plays a role in creating
a package of data along with critical information describing the data. This
package will be sent from one device to another device, where it will be taken
apart and read. This process is called encapsulation and de-encapsulation and
will be explained more fully in the last section of this chapter.

First, the role of each layer must be understood to grasp the encapsulation
process. Let's explore each layer and its job in the process. Notice in Figure
2-1 that the functions discussed in the three top layers of the OSI model are
condensed into the Application layer of the TCP/IP model, and the functions
of the two bottom layers of the OSI are combined in the Network Access layer
of the TCPIIP model.
The layers are numbered from the perspective of package reception rather
than package creation. This means that the Physical layer is layer 1, and the
numbers progress to layer 7, the Application layer. In this discussion, we are
approaching the model from the perspective of package creation, so we will
begin with discussing layer 7, the Application layer, and work our ,;vay up to
layer 1, the Phy sicallayer.

A Word about Layer Numbering
In this book and tnost treatments of network modeling, the TCPIIP
model is used to discuss the TCPIIP protocol suite and its operation.
However, in most Cisco docmnentation, the layer numbers of the
OSI model are used for purposes of describing device and protocol
mappings. For exatnple, a switch is said to be a layer 2 device, and a
router a layer 3 device, rather than layers 1 and 2, respectively, as they
would be if using TCPIIP layer numbers . You should learn both OSI
and TCPIIP layer names and numbers .

Understanding the Application Layer
The Application layer (layer 7) is where the encapsulation process begins.
This is where users interface with the model by working through the service
or application they are using. The information on this layer is specific to
the service or application that is requesting information to be transferred to
another device. An example protocol that operates at this layer is Hypertext
E18Me ts ~o

dot d ul ur

Transfer Protocol (HTTP). This is used to transfer web pages across the
network. The application data that exists on this layer in that case would be
a Hypertext Markup Language (HTML) document~ and we \iVould refer to it
generically as data. The encapsulated application data could also be a Portable
Document Format (PDF) or Microsoft Word document. It could be the text
of an email or a Microsoft Excel spreadsheet as well. Other examples of
protocols that operate at this layer are Domain Name System (DNS) queries~
File Transfer Protocol (FTP) transfers~ and Simple Mail Transfer Protocol
(SMTP) email transfers.

Understanding the Presentation Layer
The Presentation layer~ referred to as layer 6~ is responsible for the manner in
which the data from the Application layer on the source device is represented
(or presented) to the Application layer on the destination device. If any
translation between formats is required~ the Presentation layer will take care
of it. A good example of this occurs when data is encrypted ~ this layer ensures
that the data that is presented to the destination application can be read and
understood.

Encryption
Encryption scrambles the data so that it cannot be read if intercepted.
When encryption is performed ~ only the destination device has the
ability to unscramble~ or decrypt~ the data. This operation is
represented in Figure 2-2.

Figure 2-2: Encryption/decryption

www.itbookshub.com

Enuyption

Budidh56+1+989+<Vrf
inedu47r5yiogt9bvtg dei

_,A,
.......,-

0
6r'

~

Budidh56+1+989+cvrt
inedu47r5yiogt9bvtg dei

.,.,A._

0
6r'

r=!'...

""'V

~

"=v"

Bob, I'm encryp«ing this
mess.>ge bec.lust Ws top

seael

Bob, I'm eno}'pCing this
mess.>ge beuust Ws top
st<rel.

De<:ryptton

Another example is compression. The compression process eliminates
redundant information so that the data takes up less space. When the data
arrives at the destination, the redundant data is added back in. This process is
illustrated in Figure 2-3 .

Figure 2-3: Compression
Compress

Decompress

If data arrives compressed, the Presentation layer ensures that it is
uncompressed before it goes to the Application layer. The reverse of both of
these processes is also true. If the data is arriving from the Application layer
and needs to be encrypted or compressed, the Presentation layer will take care
of that.

Encryption

Where Should It Be Done?

Although encryption can be done at the Presentation layer as described
earlier, it can also be done at the Data-Link layer (discussed later).
Where the encryption takes place affects the amount of information
encrypted. If the process is done at the Presentation layer, only the
data is encrypted. If done at the Data-Link layer, the entire package
is encrypted. In some cases, it is desirable to "hide" some of the
information about the data that is contained on the other layer. If that
were the case, the encryption should be done on the Presentation layer.

Copy llJ t

a ri

The Presentation layer accomplishes its job by adding information to the
package that will be used on the receiving end to make any format translations
necessary . This information will go "in front" of the data from the Application
layer, and the resulting package will be handed down to the Session layer.
When the Session layer receives this package, it will consider the entire
package to be data without concerning itself with specific information added
by either upper layer.
When discussing the front and back of thi s package of
information, the front is the information that the destination
device will receive first, and the back is what will be
received last.

Understanding the Session Layer
The Session layer, referred to as layer 5, is responsible for coordinating the
exchanges of information between the layer 7 applications or services that are
in use. In the earlier example of the web page, the Session layer would be
managing the session between the browser on the source computer and the
browser on the destination computer.
The Session layer starts, maintains, and ends the session between the
applications. It is important to be clear that this does not mean managing the
session between the computers. That occurs at a different level. This session
is built and closed after the physical session between the computers has taken
place. To accomplish this goal, the Session layer adds information relevant
to managing the session "in front" of the information it received from the
Presentation layer. As all the layers do, it considers all the information from
above as data and does not concern itself with the specific information added
at layers 7 and 6.

The Application Layer in the TCP/IP
Model
At this point, I should point out that all of the activities that have taken
place thus far as processes in the osr model take place on the single
Application layer of the TCPIIP model, as shown in Figure 2-1.

Understanding the Transport Layer
Whereas the Session layer manages the session bet\;veen the application on
the source computer and the application on the destination computer, the
Transport layer is responsible for identifying the application to the
destination computer. It does this by using what are called port numbers. The
port numbers have been standardized so there is no confusion.
In the web page example, the Transport layer would use the port number
assigned to the HTTP protocol, ·which is port 80. Figure 2-4 illustrates how
a server acting as a Telnet, FTP, and web (HTTP) server would use the port
number assigned to Telnet, FTP, and the web service (ports 23, 21 , and 80,
respectively) to communicate with different computers requesting different
.
servtces.

Figure 2-4: The use of port numbers
FTP, Telnet and Web Server

Web Page
FTP Download

FTP Download

Telnet ~ion

8

Port Numbers
The kind of ports being discussed here are not physical ports but
software ports. Computers are capable of using up to 65,535 ports. Port
numbers 1 through 1,023 are called well-known ports, as they have
been standardized. Port nmnbers 1,024 through 49,151 are available to
be registered by software makers to use as identifiers between network
endpoints of their applications. These must be registered with the
Internet Assigned Numbers Authority (lANA). The numbers 49,152
through 65,535 are called dynamic ports and are used at random by
the computers. Chapter 3 covers how those are used .

The OSI model as originally conceived was not tied to any particular
set of Transport layer communication methods. Each networking protocol
could have its own set of transmission processes operating at various levels
of the model, including the Transport layer. Because TCP/IP became the
standard for the Internet and subsequently for LANs as well, we will focus our
attention on the protocols in the TCP liP suite. But other networking protocol
suites such as Internetwork Packet Exchange/Sequenced Packet Exchange
(IPX/SPX, Novell's propriety networking protocol) also have their own
Transport layer mechanisms. This is a mere historical footnote, however,
because all operating systems (including Novell) now use TCP/IP.
There are two protocols in the TCP liP suite that operate on the Transport
layer: TCP and User Datagram Protocol (UDP). As a result, port numbers
come in two types, depending on the Transport layer protocol that is in use.
The protocol that is used for a particular transmission depends on the type of
delivery that is required. This is not something that is a choice available to
you as a user. The choice is made for you based on the type of transmission.
There are three types of transmissions in a network: unicast, broadcast,
and multicast. The characteristics of each are listed here and are illustrated in
Figure 2-5:
8

Unicast When a single source host is sending information to a single
destination host, it is called a unicast. This is also known as one-to-one.
Broadcast When a single host is sending information to all other hosts on
the net\;vork, it is called a broadcast. This is also known as one-to-many.
Multicast When a single host is sending a transmission to some, but not all,
of the hosts on the network, it is called a multicast. This is also known as
one-to-some.
Figure 2-5: Transmission types
Unicast Wwnis.sion -

So<r<t

On~

host seMis and the other re<-rives.

Recriver

So<r<e

When a transmission is either broadcast or multicast (which means in
either case, multiple destination hosts are involved), the protocol used is UDP.
The characteristics of TCP and UDP are covered completely
in Chapter 3.

When the transmission is a unicast (one-to-one), the protocol used is
TCP. The characteristics of these t\;vo protocols are quite different. Those
differences are discussed in Chapter 3. But for now, understand that the

8

Transport layer identifies the Transport layer protocol and the port number, as
shown in Figure 2-6.
Fi2ure 2-6: TCP and UDP port numbers
FTP
' I'

HTIP

Tel net
J

21

80
-

.....

'

23

TCP/ IP or UDP

To accomplish its goal of identifying the Transport layer protocol and the
port number, the Transport layer adds the port number and type "in front" of
the information it receives from the Session layer. For example, it would add
TCP 23 to indicate Telnet, because Telnet uses the TCP protocol and port 23 .
As all the layers do, it considers all the information from above as data and
does not concern itself with the specific information added at layers 5, 6, and
7.

Understanding the Network Layer
The N etwork layer is responsible for identifying the destination device by
its logical identification. That logical identification, when we are discussing
TCPIIP, is called an IP address.
IP addresses are discussed in Chapter 6, "Numbering
Systems," Chapter 7, "Classful IP Addressing," and Chapter
8, "Classless IP Addressing."

M t

al co

dt

ttY: d

ora

An IP address is a number that uniquely differentiates a host from all
other devices on the network. It is based on a numbering system that makes it
possible for computers (and routers) to identify whether the destination device
is on the local network or on a remote network.

Local vs. Remote
If the source and destination hosts are on the same network, the
destination device is considered to be on the local network. If the
two computers are on different networks, the destination device is
considered to be on a remote network. What constitutes local and
remote from an IP addressing standpoint is covered in Chapters 7 and
8.

The protocol in the TCP liP suite that identifies the IP address of the
destination and adds this information to the package is called the Internet
Protocol (JP).
The process used by IP to identify the IP address can vary
and is covered in Chapter 4, "Protocols."

To accomplish its goal, the Network layer adds the IP address "in front" of
the information it receives from the Transport layer. As all the layers do, it
considers all the information from above as data and does not concern itself
with the specific information added at layers 4, 5, 6, and 7.

Understanding the Data-Link Layer
The Data-Link layer is responsible for converting the logical identifier (in the
case of TCPIIP, an IP address) to a physical identifier. The specific type of
Data-Link identifier depends on the Data-Link protocol in use. For Ethernet,

this identifier is called a Media Access Control (MAC) address . It is applied
to the network adaptor by the manufacturer during production, as shown in
Figure 2-7.

Figure 2-7: MAC addresses and network adaptors

Ethernet and 802.3
Ethernet is a widely used networking technology that operates at both
the Physical and the Data-Link layers of the OSI model. Ethernet is
probably the technology you will most likely come in contact with
because it is used in almost all LANs. 802.3 is the standard that
specifies how Ethernet works so that all implementations of Ethernet
are the same and therefore compatible. 802.3 and other members of
the 802.xx family of standardized technologies are discussed more
completely in Chapter 4.

MAC addresses are not the only type of layer 2 (Data-Link layer)
addresses. An example of a WAN protocol, Frame Relay , uses layer 2
addresses called Data-Link Connection Identifiers (DLCis) to identify
endpoints in a Frame Relay network. Although they look quite different from
MAC addresses, they serve the same purpose.

M

I

WAN protocols such as Frame Relay and their
characteristics such as DLCis are beyond the scope of this
book.

Just as the Network layer identifies the IP address and labels the package
with it, the Data-Link layer must do the same for the MAC address. At
this point in the process, the IP address is known, and the MAC address is
not. Using another protocol in the TCP/IP suite, Address Resolution Protocol
(ARP), the MAC address will be learned and placed in the package.
The process that is used to "learn" the MAC address is
discussed in Chapter 3. The format of MAC addresses is
discussed in Chapter 6 and Chapter 11 , "LAN Operations."

To accomplish its goal, the Data-Link layer adds the MAC address "in
front" of the information it receives from the Network layer. As all the layers
do, it considers all the information from above as data and does not concern
itself with the specific information added at layers 3, 4, 5, 6, and 7. At this
point, all information added to the front of the package by layers 3- 7 will
collectively be referred to as upper-layer data. And the Data-Link layer will
place a header on the package called the Data-Link header.
When discussing the front and back of this package of
information, the front is the information that the destination
device will receive first, and the back is what will be
received last.

Unlike the other layers, however, the Data-Link layer will also add
something to the end of the package called a trailer. The trailer contains some
information that is mathematically related to the data (remember, data refers

to all the information from layers 3-7) in such a way that it can be used
by the destination device to perform a cyclic redundancy check (CRC). This
check verifies that the data that left the source computer did not change at all
during the transmission. If the data does not pass this check, the destination
device will discard it because it usually indicates that the data has either been
corrupted (damaged) in transit or has been intercepted and altered. The main
parts of the resulting package are shown in Figure 2-8.
Figure 2-8: Header, data, and trailer
Data· link Layer
Header

Upper· La~
Data

Data· l ink La~
Trailer

Understanding the Physical Layer
At the Physical layer, the entire package including header, trailer, and data
will be converted into bits for transmission. All information that traverses the
network is in this form, meaning it is all a series of ones and zeros that can be
reconverted on the other end and read. The physical medium must be capable
of representing these ones and zeros in some form or fashion.
The manner in which these bits are represented depends on the physical
medium in use. If it is a wired network, the bits will be represented with the
presence or absence of an electrical charge. If it is a wireless medium, the bits
will be represented with radio waves that are altered or modulated so that the
ones can be differentiated from the zeros. Finally, if the cable is fiber-optic,
light patterns generated by a small laser (on and off) will be used to indicate
ones and zeros.

Describing the OSI Encapsulation
Process
M t

www.itbookshub.com

al co

dt

""'

d

ora

Now let's put it all together ,;vith an example and see how all of the pieces fit
together. Imagine that you are on your company website and you have clicked
a link on the page. By doing so ~ you have just made a request of the web
server to send you a document (most web pages exist as documents with an
. h t ml extension). This document will be sent to your computer~ which will
use the proper application (your Internet browser) to display the document so
.
.
you can view It.
So that we have some real information to use in the example~ details about
the two computers (your laptop and the web server) are shown in Table 2-1.
Refer to it as we take the information and identify where it goes in the process
and how it is used. To simplify the process, we are going to assume that the
web server is not located on the Internet, but is located on the same network
as your computer. This is not unusual, as many organizations use web servers
on the local network to provide infonnation to employees.

Table 2-1: Computer details for sample
Computer lP Add""" MAC AddNS« Port Number

Web server 192.1 68.5.1 5-5-5·5-5-5

TCP80

192. 168 ..5.2 6-6-6-6- 6-6

TCP80

Laptop

MAC Addresses
Please note that the format of the MAC addresses in Table 2-1 is not
correct, but has been simplified for this example. The correct format of
MAC addresses and the meaning of each section in a MAC address are
covered in detail in Chapters 6 and 11.

Identifying the Process on the Source Device
Using the information shown in Table 2-1 , the web server will create the
package containing the web page by using the following steps:
• Layer 7 obtains the data in the form of the HTML document.
Copy llJ t

a ri

• Layer 6 adds information about the formatting.
• Layer 5 adds information required to create a session between the
web server and the web browser on the laptop.
• Layer 4 adds the transport protocol and the source and destination
port numbers, in this case TCP (it's a unicast) and port 80 (HTTP).
• Layer 3 adds the source and destination IP addresses, in this case a
source of 192.168.5. 1 and a destination of 192.168.5.2.
• Layer 2learns the destination MAC address and adds the source and
destination MAC addresses, in this case, a source of 5-5-5-5-5-5
and destination of 6-6-6-6-6-6.
• Layer 1 converts the entire package into bits and sends it across the
network to the laptop.

Identifying the Process on the Destination Device
Referring to Table 2-1 , the laptop will receive this package and will handle it
in the following way:
• Layer 1 receives the bits in electrical format, converts them to be
read by layer 2, and hands them to layer 2.
• Layer 2 examines the destination MAC address to see whether it is
addressed to it, sees the MAC address of 6-6-6-6-6 (its own), drops
that part of the transmission, and hands the remaining data to layer
3.

• Layer 3 examines the destination IP address to ensure that it is
its own (192. 168.5.2), drops that part, and hands the rest of the
package to layer 4.
• Layer 4 examines the destination port number (port 80), alerts the
browser that HTTP data is coming in, drops that part, and hands the
rest of the package to layer 5.

M t

al co

dt

ttY: d

ora

• Layer 5 uses the information that was placed on this layer by the
web server to create the session between the web server and the web
bro\iVser and then hands the rest of the information to layer 6.
• Layer 6 performs any format translation that may be required and
hands the remaining data (the HTML document) to layer 7.
• The layer 7 application (the web browser) receives the HTML
document and opens the document in the browser window.
Although this example used the transfer of a web document, the process is
the same for any transmission between two computers, regardless of the type
of data or the protocol in use. Now that you have a good basic understanding
of the process, in Chapter 3, you'll explore this process in terms of the TCP
model, which some would say is a more realistic representation of the real
world because the TCP /IP protocol is used on the Internet and on the vast
majority of LANs.

The Essentials and Beyond
The Open Systems Interconnection (OSI) model was created by
the International Organization for Standardization (ISO) to bring
some order and thus interoperability to the networking devices that
manufacturers were creating. It broke the communication process
into seven layers, each describing a step in the process of data
encapsulation.
The benefits of reference models, including the OSI model, is that
they encourage standardization and interoperability, help enhance
development on specific layers without requiring a change to other
layers, and encourage hardware and software developers to build on
one another's accomplishments through their modular approach.

Additional Exercises

In the following list, identify the OSI layer where the information
\iVould be located:
• UDP 52
•

188.69.44.3

• PDF document

• 5-5-S-5-5-5
•

TCP 80

•

10.6.9.7

• Bit pattern

Review Questions
1. Which of the following is not an advantage of networking
reference models?
A. They encourage standardization by defining what functions
are performed at particular layers of the model.
B . They ensure that networks perform better.
C. They prevent changes in one layer from causing a need for
changes in other lay ers, speeding development.
D . They encourage vendors to build on each other's
developments through use of a common framework.
2. Which organization created a four-layer reference model in the
early 1970s?
A. OSI
B . ISO
C. DoD

D . IEEE

3. Which layers of the OSI model map to the Application layer of
the DoD, or TCPIIP, model?
A. Physical
B. Application
C. Presentation
D. Session
4. Which layers of the OSI model map to the Network Access
layer of the DoD, or TCP/IP, model?
A. Application
B. Session
C. Data-Link
D . Physical
5. Which layer of the OSI model is responsible for coordinating
the exchanges of information between the layer 7 applications or
services that are in use?
A. Application
B . Session
C. Data-Link
D . Physical
6. What is the information that is used on layer 3 of the OSI
model?
A. A bit pattern
B . MAC addresses

C. IP addresses
D . Port numbers
7. What two pieces of information are communicated in the
following : TCP 23?
A . Port number and transfer speed
B . Transport protocol and encryption type
C. Port number and transport protocol
D. Transfer speed and encryption type
8. What are the port numbers from 1 to 1,023 called?
A. Well-known

B . Dynamic
C. Registered
D. Static
9. Which type of transmission is referred to as one-to-one?
A. Multicast

B . Anycast
C. Unicast
D . Broadcast
10. What transport protocol is used for broadcasts?
A. TCP

B. RDP
C. UDP
D. ARP

Chapter 3
TCP/IP
In 1969, the U.S. Department of Defense, acting through its Advanced
Research Projects Agency (ARPA, now called DARPA) and in partnership
with U.S. universities and the corporate research community, created a fournode network called the ARPANET. This baby step toward what is today
known as the Internet used the Network Control Protocol (NCP). In 197 4,
when NCP proved incapable of handing the increasing amount of traffic, the
design for a new set, or suite, of networking protocols was presented called
Transmission Control Protocol/Internet Protocol (TCPIIP).
Over the next five years, the protocol went through four version updates.
In 1979, version 4, which we have used until just recently and are still
using in combination with version 6, was presented and adopted. By 1983
it w as mandated that all machines that connected to the ARPANET use this
protocol. When this mandate was handed down, it set in motion the adoption
of TCPIIP as the protocol of the coming Internet and of any LANs that wanted
to connect (without using any protocol conversion) to the Internet.
Because of TCP/IP's key role in all networking, it is important that you
have a good understanding of this protocol, its parts, and its operations. This
chapter is dedicated to TCPIIP. Specifically, this chapter covers the following
topics:
• Understanding the TCP /IP model
• Describing the TCP liP encapsulation process
• Describing the functions at the Transport layer

• Describing the functions at the Internet layer
• Describing the functions of ARP

Understanding the TCP/IP Model
In Chapter 2, "The OSI Model," the OSI model and the TCPIIP model were
compared side by side. But that chapter only briefly noted the TCP /IP model
and focused most of our attention on the OSI model. It is important that equal,
if not greater, attention is allotted to the TCP/IP model because it describes
the encapsulation process from the perspective of the protocol that is the most
widely used networking protocol and the one with which you will probably
work the most in your career.
TCPliP is not the only networking protocol ever used. Other networking
protocols were created by networking software and operating system
companies to support networking between their products. Some of these
protocols worked quite well, as long as all of the computers and devices
were capable of using the protocol. The problem was that companies such as
Microsoft, Novell, and Apple had all gone in different directions and created
their own networking protocols. There was no common language.

Proprietary LAN Protocols
Some early examples of proprietary LAN protocols and the companies
that developed them are as follows:
• NetBEill (Microsoft)
• IPX/SPX (Novell)
• AppleTalk (Apple)

A translation mechanism did exist, but when TCP /IP became a
requirement to connect to the Internet, it seemed pointless to resist switching
to this standard. One by one, all of the aforementioned companies and smaller
companies as well made TCP/IP the native networking protocol of their
products. It is now the common language of networking worldwide.
This section covers the four layers of the TCP /IP model and how they
correspond to the seven layers of the OSI model.
Beyond this chapter, you will find that reference model mappings, whether
they concern protocols or devices, will be in terms of the TCPliP model.
However, with respect to the study of the TCP/IP protocol suite, it is
important that you understand the OSI model as well.
A reference model mapping is used to link a protocol or
device with the model layers that contain the information
that the protocol or device acts upon.

A Word about Layer Numbering
In this book and most treatments of network modeling, the TCPIIP
model is used to discuss the TCPIIP protocol suite and its operation.
However, in most Cisco documentation, the layer numbers of the
OSI model are used for purposes of describing device and protocol
mappings. For example, a switch is said to be a layer 2 device and a
router a layer 3 device rather than layers 1 and 2, respectively, as they
would be if using TCPIIP layer numbers . You should learn both the
OSI and TCPIIP layer names and numbering schemes.

Exploring the Four Layers

As you learned in Chapter 2, the TCI/IP model contains four layers: the
Application layer, the Transport layer, the Internet layer, and the Network
Access layer. Considering the importance of this model, a brief review of the
layers and a discussion of the function of each is in order. Later in this chapter,
a section is devoted to the detailed operation of the Transport and Internet
layers, where the TCP/IP suite functions.
Layers use protocols. A protocol is an agreement on how something is
done. In networking, a protocol defines how the information that is
transmitted from one computer to another is structured. Some protocols are
special function protocols, and some are networking protocols. The function
of a protocol is largely determined by the layer of the TCPIIP model at which
it operates.
Networking protocols provide transport services to the special purpose
protocols. They also define the rules of communication between devices.
In this respect, networking protocols are like languages. The devices must
share at least one common language. TCPIIP is a networking protocol and is
composed of a set of subprotocols that form \Vhat is called the TCPliP suite.
The protocols in the TCP/IP suite are as follows :
• Transport Control Protocol (TCP)
• User Datagram Protocol (UDP)
• Internet Protocol (IP)
• Address Resolution Protocol (ARP)
• Internet Control Message Protocol (ICMP)
• Internet Group Management Protocol (IGMP)
These protocols are discussed further in the sections of this chapter that
discuss their relevance with the layers.
As you can see in Figure 3-1 , besides the six protocols of the TCP/IP suite,
other protocols and services can also be mapped to this model. Although not
shown in this figure, devices can also be mapped to the model. More details

M t
www.itbookshub.com

al co

dt

ttY: d

ora

about the figure follow later in this section, so use it as a guide throughout the
discussion of the processes of encapsulation and de-encapsulation.
Encapsulation is discussed in the section "Describing the
TCP/IP Encapsulation Process" later in this chapter.

Figure 3-1: TCP/IP model
TCP/IP Model

Application

TCP/IP
Protocol Suite
Telnet, SMTP, POP3,
FTP, NNTP, HTIP,
SNMP, DNS, SSH, ...

~~---~-an_sp_ort__~l ~~___rc_P,_u_oP__~I
~'___l_nt_ern_et__~l

IP, ICMP, ARP, DHCP

Network Access

Ethernet, PPP, ADSL

The four layers of the TCP/IP model are as follows :
The Application Layer The Application layer is the user applications'
interface to the networking process that is facilitated by TCPIIP. When
a user attempts to access anything, the computer has to decide whether
the object is located locally on the hard drive or is somewhere out on
the network. If the computer determines that the network is required, the
Application layer begins the process of creating the package (or series
of packages, in most cases) that will be used to request the object or
information from the remote device, or alternately to transfer requested
information to another device. As you will learn later in this chapter, the
name used to describe this package will change as it is transferred from
one layer to another.

8

The information that is contained in the package that will be handed
down to the Transport layer includes the data itself (for example, a web
page or a document) and all other information required to establish the
session between the source and destination service or application and to
manage the format or presentation of the data. In doing this, the Transport
layer on the source device uses port numbers to identify protocols and
services. These port numbers are used to communicate this infonnation to
the Transport layer on the destination device. When routers make decisions
about the handling of packets based on port numbers, it is said that they are
operating at the Transport layer because the routers are using information
that is placed in the packet at that layer.
Packets are discussed in the section "Understanding Data
and PDUs" later in this chapter.

The Transport Layer The parts of the TCP/IP suite dedicated to using
the information provided by the port numbers are located at the Transport
layer. UDP and TCP are the two subprotocols of TCP liP that operate
on this layer. As you learned in Chapter 2, the protocol selected at this
layer will be a function of the transmission type (unicast, multicast, or
broadcast) and the port number specified between the Application layer
and the Transport layer. The two protocols are discussed in detail in the
section "Describing the Functions at the Transport Layer" later in this
chapter. The protocol and port number required are added to the package,
and the package is handed down to the Internet layer.
Although one of the protocols in the TCP/IP suite that
operates at the following layer is called IP, the layer itself is
called the Internet layer.

The Internet Layer At the Internet layer, the logical addresses of the
source and destination devices are determined and placed on the package.
This information, in the form of IP addresses, is used by the devices on the
network that can operate at the Internet layer in the process of routing the
package to its final destination. As you may have surmised by now, this is
why routers are Internet layer devices. They use information placed in the
package at the Internet layer (IP addresses) to make routing decisions. In
the section "Describing the Functions at the Internet Layer," you vvilllearn
more about this process. In the section "Describing the Functions of ARP,"
you will see how ARP uses IP addresses to identify the MAC address that
will be required at the Network Access layer, There are two more protocols
operating at the Internet layer: ICMP and IGMP, which are covered in
detail in Chapter 4, "Protocols."
The Network Access Layer At the Network Access layer, the source and
destination physical addresses are put on the front of the package in a part
called the header. Information used to perform a frame check sequence on
the message is placed at the back of the package in a section called the
trailer.
Trailers and frame check sequences are discussed later in
this chapter, in the section "Describing the Contents of
Frames."

Finally, the package is converted to ones and zeros in the format required
by the physicaltnedium in use. If the computer is connected with a cable,
the format will be electrical impulses. If the computer is connected to a
wireless network, the format will be radio waves. If the computer has a
fiber-optic connection, the format will be light waves. This final operation
is performed by the network adaptor in the cotnputer, which is why you
must have an Ethernet (wired), wireless, or fiber-optic network adaptor,

respectively, in a computer to operate on those network types, so that the
bit patterns (the ones and zeros) can be sent in the required format.

Comparing the OSI and TCP/IP Models
As you learned in Chapter 2, the OSI model and the TCP/IP model can be
placed side by side for comparison, as shown in Figure 3-2. You also learned
that both models describe the process of encapsulation, which is the building
of an information package that can be transmitted across a network, and
then de-encapsulation, which is the process of taking the package apart and
processing the information on the destination device.

Figure 3-2: OSI and TCP/IP models
OSI

7

Application

6

Presentation

5

Session

TCP/IP

---------4

Application

---- + - - - - - 1

4

Transport

3

Transport

---- + - - - - - 1

3

Network

2

Internet

--- -t--------t

2

Data-Link
1

1

Physical

Network
Access

--- _......________.

You already know the following about these two models from Chapter 2:
• There are seven layers in the OSI model and four in the TCPIIP
model.
• The top three layers of the OSI model (Application, Presentation
and Session) map to the Application layer of the TCP liP model.
• The bottom two layers of the OSI model (Data-Link and Physical)
map to the Network Access layer of the TCP/IP model.
Uh

tt

~

httzt

\l

ri

The OSI model was developed before the networking protocol TCPIIP was
developed. Therefore, OSI was a general model that could be only predictive
in nature and not necessarily reflective of how intemetworking eventually
evolved. As the old saying goes, "The battle plan goes out the window when
the first bullet is fired."
The TCPIIP model, on the other hand, was developed after TCP/IP was
developed, and therefore is not so much a prediction of how things could be,
but a description of how things are. That's why in most cases descriptions of
networking processes are discussed in terms of the four layers of the TCP/
IP model rather than the OSI model. Particularly with Cisco routers and
switches, most operations will be framed in terms of the TCP/IP model.
Some of the detailed differences in how certain operations are performed
in the TCP/IP model as compared to how it was envisioned they vvould be
done in the OSI model are as follows:
• In the OSI model, it was envisioned that the Session layer would
handle the establishment and management of the communication
session between the application or service being used. In TCP/IP,
those functions are performed by the TCP/IP protocol itself at a
different layer, the Transport layer.
Chapter 2 outlines the OSI model as a potential framework
for how the network transmission process would occur. In
this chapter, using the TCPIIP model, the process is depicted
as it occurs using TCP/IP.

• Data conversion into generic formats understood by both sides of
the communication is performed at the Presentation layer of the OSI
model. These functions take place in the Application layer of the
TCPIIP model.
• The Application layer in the OSI model is responsible for providing
an interface to the user application as an entry point to the

networking process. Both models perform this function at the
Application layer but in different ways. The difference between
these processes is beyond the scope of this book, but the method
used in the TCP/IP model is more direct as there fewer layers in the
process.
• The identification of a protocol or service occurs at the Transport
layer in both models. However, in the TCP/IP model, this layer is
also \iVhere the connection services (UDP or TCP) are provided.
TCP and UDP are explained in the section "Describing the
Functions at the Transport Layer" later in this chapter.

• The connection services noted in the preceding list item occur on
the Network layer of the OSI model, which maps to the Internet
layer of the TCP/IP model. On the Internet layer of the TCP/
IP model, the IP protocol of the TCP/IP suite operates and is a
connectionless service.
• When TCP/IP was developed, it was decided that the division of the
bottom layer into D ata-Link and Physical layers was unnecessary .
Thus their functions are combined in the Network Access layer of
the TCPIIP model.
• The OSI model envisioned the host devices as deaf, dumb, and
blind bystanders to the networking process, not participants (thus
the term dumb terminal). In the TCPIIP model, the hosts participate
and take part in functions such as end-to-end verification, routing,
and network control. They act as intelligent role players in the
transfer of information.
Thankfully, the specific differences as illustrated in the preceding list
are less important than knowing the details of how network operations are
handled in the TCP/IP model.

Describing the TCP/IP Encapsulation
Process
The generic term data package is often used to describe the data container
of information sent from one computer to another. Another term for this
that is thrown around somewhat imprecisely in networking circles is packet.
However, in the Cisco world, using the term packet in such a manner is
technically incorrect.
As a data package is being built and pieces are being handed down from
one layer to the next, this unit of information has a different name at each
step. As you will see in the following sections, it is called a packet at only
one specific point in the process. The following sections cover the package
building process called encapsulation.

Understanding Data and PDUs
In Chapter 2, you learned that the information passed from an upper layer
down to a lower layer is seen as a single piece of data to the lower layer. For
example, when the Internet layer hands the information from the upper layers
down to the Network Access layer, the Network Access layer is not aware
of which part came from which layer. It sees that entire unit as one piece of
data. This monolithic (from the perspective of the lower layer) chunk of data
is called a protocol data unit (PDU).
When the information is handed down from layer to layer, the name of
the PDU changes, as shown in Figure 3-3 . Let's take a closer look at what is
contained in each type ofPDU.

Describing the Contents of Data

Copy llJ t

a ri

In the "Exploring the Four Layers" section, you learned that the Application
layer adds any required information concerning the presentation and
formatting of the data to the header and hands it do\;vn to the Transport layer.
When this PDU is delivered to the Transport layer, it is simply called data .

Figure 3-3: Protocol data units
ProtO<ol data units (POUsJ
Appliation
Header
Tlll~rt

Headtt

F111me
Header

Net\\'011<
Header

T111~rt

Net\\'011<
Header

T111~rt

Header

Header

1010010000101010000111101010

Data

Application: Data

Data

Tlllnsport: Segments

Data

Internet Packets

Data

F111me
T111iler

Netwo11< Access: Frames
Bits

Describing the Contents of Segments
The Transport layer adds port number information to the data that was handed
down from the Application layer. Earlier in this chapter, you learned that this
information consists of the Transport protocol (either TCP or UDP) and the
port number of the requested service or application. As you can see in Figure
3-3, this is added in the form of a Transport header, meaning it is in front of
the data so that it will be read by the destination device before the actual data
is read. This allows the destination device to "know what is coming," so to
speak, or what is being requested. After this information has been added, the
ensuing PDU is called a segment.

Describing the Contents of Packets
This segment PDU is handed down from the Transport layer to the Internet
layer. The Internet layer adds the required logical address information to the
segment. As you learned in the section "Exploring the Four Layers," this
information consists of the IP addresses of the source and destination devices.

Copy llJ t

a ri

In Chapter 4, you will learn how the source device "learns" the IP address of
the destination device.
After this information has been added to the segment in the form of a
Network header, the PDU is now called a packet. So now you can see that
referring to the entire unit as a packet (although it is done all the time in casual
conversation) is actually quite imprecise. It is called a packet only at this point
in the process. The packet is now handed to the Network Access layer.

Describing the Contents of Frames
The Network Access layer receives the packet and adds physical address
information in the form of a frame header, also commonly called a DataLink header. This information is the physical address, or Media Access
Control (MAC) address, of the source and destination devices. In the section
"Illustrating the ARP Broadcast," you will learn how the source device uses
the IP address placed in the PDU by the Internet layer to determine the MAC
address of the destination device. In the section "Describing the Logic of
MAC-to-IP-Address Conversion," you will learn what role these two types
of addresses play in the routing process. An even more detailed discussion
follows in Chapter 11, "LAN Operations."
The Nenvork Access layer then does something the other layers did not.
It also adds what is called a .frame trailer (or Data-Link trailer). This section
contains information that can be used to check the integrity of the data, called
a.frame check sequence (FCS). This verification will be perfonned by the next
device to receive this frame (which, as you will see in Chapter 11 , could be a
switch, a router, or the destination device) and by all other devices in the path
to the destination device. This check is done so that no energy is expended at
any point handling or reading data that is corrupted. Now the frame is ready
to be sent out on the media.

Integrity and the FCS
When the data in a frame is said to have integrity, it means that the data
has not changed even 1 bit (re1nember it' s all ones and zeros, or bits).
Such a change can occur through data corruption or data manipulation
by hackers. The FCS process examines the data before it leaves and
places a nUinber in the end of the frame (trailer) that can be used to
verify this integrity at each step in the routing process. If the FCS
calculation doesn't succeed, the data is dropped.

Understanding the Conversion to Bits
At this point, the construction is complete, and the frame is ready for delivery.
The network adaptor converts the information into a series of ones and zeros
that can be read by any device receiving this frame. At the beginning of the
frame is a series of ones and zeros that are designed to allow the receiving
device to lock on to or synch up with the signal. This information is not part
of the information added by the upper layers and is used solely for the purpose
of synching up. Once the receiving device has synched up with the frame, it
will start reading the data, starting with the frame header and proceeding to
the network header and so on .
When the destination device receives the frame, the entire process is
carried out in reverse. Each layer reads the information placed in the frame
by the corresponding layer on the source device until the data arrives at the
port of the correct service or application ready to be read. The encapsulation
process and the de-encapsulation process are shown in Figure 3-4.
Although they are not the only protocols in the TCPIIP suite, the main
players in the vast majority of data transfers are TCP, UDP, IP, and ARP.
These four protocols operate on the Transport and Internet layers. In the next

Copy llJ t

a ri

sections, you will examine some of the main processes that occur in these two
layers and the parts these protocols play in those processes.

Fi2ure 3-4: Encapsulation and de-encapsulation
Data

Appli<ation
Layer

Header

-.(>Data Flow
Data

Transport

Htader

Layer

-(}Data Row
lnltmet
Layer

Htadtr

Data
-{> Data Flow

Headtr ~

Data

Networ1< A/.W>$
Layer

~

EnG~ psulation

Data

Appli<ation
layer

Header

O Data Flow
Transport

Header

Data

layer

{j. Data Row
Data

Internet
layer

Header

-'(} Data Flow
Data

Header ~

Nttwor1< A<.cess
layer

0
De·encapsulation

Describing the Functions at the
Transport Layer
The two protocols in the TCPIIP suite that operate at the Transport layer are
TCP and UDP. Both utilize port numbers to label segments \Vith the services
or applications required at the destination before handing the segment down
to the Internet layer. These labels placed in the Transport header by the source
device are read when the segment is at the Transport layer of the destination
device. Ho\vever, the services that these t\vo protocols provide to the frame

8

after it leaves the computer are quite different. In this section, you'll examine
their characteristics.
Earlier, in the section "Comparing the OSI and TCPIIP
Models," specific differences between the two models are
discussed. If you think that something sounds a little strange
as you read through the following sections, it might help
to flip back to that section . You might be thinking of
functionality that is more specific to the OSI model instead
ofthe TCPIIP model.

Understanding TCP
Several terms can be used to describe the operation of TCP. First, you'll
look at each description and how each relates to TCP. Then in the following
section, "Understanding UDP," you'll examine the effect that these features
and functions have on the types and volume of information TCP places in the
Transport header.
Connection-Oriented TCP is described as connection -oriented because
the source and destination device create a state of connection that will be
verified by both ends before any data transfer takes place. There is even
a predictable script to this dance called the TCP three-way handshake.
Unless these three steps are completed successfully, no data transfer will
take place.

The TCP Three-Way Handshake
The TCP three-way handshake contains the following steps and is
covered in detail in Chapter 4. In the figure, the abbreviation SYN
stands for synchronization request, SYN/ACK for acknowledgment

of receipt of the request and ACK means acknowledgment of
synchronization and the establishment of the connection.

SYN

SYN/ACK

ACK

Guaranteed Delivery TCP delivery is said to be guaranteed because
the receiving device must acknowledge the receipt of each frame. If this
acknowledgment has not been received, the source device will send the
frame again.
Stateful TCP is also said to be stateful because each data transfer must
be accomplished from a "state" of connection. If for some reason this state
is lost, it must be reestablished again by using the three-way handshake
before the data transfer can resume. Many times, slow network transfers
can be traced to frequent losses or "resets" of the connection due to
transitory network problems.
Along with acknowledgments, TCP also provides many other features that
you will look at in detail in Chapter 4, such as sequencing, flow control,
and windowing. As a result of these features, TCP is said to be very reliable
and self-adjusting to conditions on the network. This is why it is utilized for
unicast (one-to-one) transfers. The downside is that this comes at a cost.
The Transport header that TCP places in front of the segment (called a
TCP header) is much larger than the header placed in the segment by UDP.
All of the additional services (using the three-way handshake to establish the
connection, the guarantee of delivery, and the maintaining of state) require
more-detailed information to be passed back and forth between the source and

1

,

I

destination device, and that information takes space. This extra information
and the space it requires is called overhead.
The TCP header is shown in the next section.

Understanding UDP
Describing UDP could almost be accomplished by reversing everything I
have said about TCP. Let's look at each characteristic of UDP and then assess
the resulting effect on the Transport layer header that UDP attaches to the
segment handed down from the Application layer.
Non-Connection-Oriented UDP is non-connection-oriented because no
connection is established before data transfer begins. As a result, UDP
frames exit the computer much faster with no "wait time" for a connection.
On the other hand, many of the services that TCP provides that require
a state of connection (such as acknowledgments and sequencing) are not
available to a UDP frame.
Nonguaranteed Delivery UDP delivery is said to be nonguaranteed
because the receiving device is not required to acknowledge the receipt
of each frame. In most cases, this situation is not as bad as it may seem.
Many of the upper-layer protocols that use UDP as their Transport protocol
have their own built-in methods of acknowledgment. Therefore,
acknowledgment would be redundant at this layer.
Stateless UDP is also said to be stateless because each data transfer need
not be accomplished from a "state" of connection. When a device sends
a UDP frame , it does so with a sort of blind trust that the frame will get
where it's going!

The Transport header that UDP places in front of the segment (called a
UDP header) is much smaller than the header placed in the segment by TCP.
This space savings results in UDP having low overhead. In Figure 3-5, the
8

two headers are side by side for comparison. Don't be concerned at this point
with the names of the fields, but note that the TCP header is 20 bytes in size,
and the UDP header is only 8 bytes. The part marked data (if any) is the
data portion handed down from the Application layer. Chapter 6, "Numbering
Systems," covers bytes and bits, and Chapter 4 provides more detail about the
header contents.

Checksums and Frame Check Sequences
Fratne check sequences (FCSs) are also referred to as checkswns. As
you can see in the TCP, UDP, and IP headers in Figure 3-5, the field is
actually called 16-bit UDP checkswn. Cisco proprietary protocols use
a field called frame check sequence, and FCS is often used in Cisco
documentation, so I have used that term in this text.

Figure 3-5: TCP and UDP headers
UDPHe•r

16

0

16·Bil lou«<

FOrt"""""

31

T

16·8< D<slb><;on 11>1 Numb«

~--------~------~8~
~--16-_Bit
UO_PLong_:_"'_ __,___ _ _
I6·Bi'tUO_P~-'"'----j j_

l(P H~ader

16

0
16·81! Souf'(t ~ NIM'Jlbtf

31
16·8lt ~~~Pori Humber

3l·Bit S«JutnCe Hur:~ber
32·8i1 ~'SedGment ttJmbtr
4·8it Headet
l <ngt'l

R""'-ed
(6 Bil$)

u

A p R

s

r

R c s s y I
G K H T N N

t6-8i1 T<P~nt

16·BitWindow Silt

16-Blt Urgent Polflllef

Ope~,. (W '""'

I
1

208)1tS

Oata(WMy)

Describing the Functions at the Internet
Layer
Copy tq t

a ri

While the protocols operating at the Transport layer are concerned with
ensuring that the proper applications or services on the source and destination
devices can locate one another, the protocols on the Internet layer are
responsible for getting the packet labeled with source and destination IP
addresses. Information provided on this layer is used for routing purposes.
This Internet layer information is what routers are interested in as they make
routing decisions.
As you will see later in the section "Describing the Logic of MAC-toIP-Address Conversion," while the information placed in the frame header
(MAC address) may change many times during the transit from source to
destination, the information in the IP header \Vill stay the same the entire
way. In this section, IP addressing, routing, and packet forwarding are all
briefly discussed. IP addressing is covered in detail in Chapter 7, "Classful IP
Addressing," and Chapter 8, "Classless IP Addressing." Routing and packet
forwarding are explained in Chapter 11 .

The IP Header
Although the layer at which the IP protocol operates is called the
Internet layer, the part of the header that IP places on the packet is
generally referred to as the IP header.

Defining Logical Addressing
Logical addresses are those that can be managed, changed, or assigned by
a human. IP addresses are an example of logical addresses, but not the only
one. As an example, Chapter 2 briefly mentioned a proprietary networking
protocol called IPX/SPX. This Novell protocol had its own system of logical
addresses that were called network numbers and node numbers. Because

we are discussing only TCPIIP, the logical addresses covered here are IP
addresses.
IP addresses in their simplest form allow each computer or device on a
network to be uniquely identified from any other device. In Chapters 7 and
8, you will learn that this numbering system can be used to group computers
into what are called subnets. Subnets are subdivisions of the larger network.
Computers in the same subnet share a common section of the IP address,
similar to how family members might share the same last name. When a
computer wants to send data to another device that is in a different subnet,
routing must take place.

Performing Routing
When the source device places the source and destination IP addresses in the
IP header, that information will not change as the packet is routed across the
networks. Each router will examine what the destination address is, perform
its part of the routing process, and leave this unchanged. When the response
goes back from the destination to the source device, this fact remains the
same. The IP addresses will not be altered at any point.
Routers maintain routing tables that can be used to indicate in which
direction to send a packet, based on the section of the IP address that is
referred to in the previous section using the analogy of the family last name.
This section is called the network portion or in some cases the subnet portion
of the address, depending on how the network is logically organized by the
administrators. The process of passing a packet from one router to another is
called packet forwarding.

Accomplishing Packet Forwarding
Even though it is physically the same block of information, when a router
deals with the transfer of data, it is said to be forwarding a packet, while

switches are said to be forwarding frames . This is because routers read and
act upon the information that was placed in the PDU called a packet (IP
addresses). Switches read and act upon information placed in the PDU called
a frame (MAC addresses). Routers and switches are discussed in greater detail
in Chapter 10, "Network Devices."
After the Internet layer has done its job of labeling the packet with the IP
addresses, the physical addresses must be placed in the frame. That is the job
of the Address Resolution Protocol, or ARP, covered in the next section.

Describing the Functions of ARP
When data is being transferred from one network or subnet to another, routing
takes place and Internet layer information is utilized (IP addresses) by the
routers to perform this function. However, when data is sent within a network
or subnet, routing is not required. In that case, operations happen at the frame
level. In this section of the chapter, you'lllook at how the Address Resolution
Protocol, or ARP, does its job of identifying and placing the source and
destination MAC address in the frame and why the MAC addresses (unlike
the IP addresses) may change many times as the data travels across the
network.

Illustrating the ARP Broadcast
After the Internet layer places the source and destination IP addresses in the
packet, and before the frame is delivered to the Network Access layer, where
it will become a frame and have a frame header and trailer attached, the source
and destination MAC addresses must be known so they can be placed in the
frame header.
The numbering system used in MAC addresses and the details of how they
are permanently applied to a network adaptor are covered in some detail in

Chapter 6. But just so you can take a quick look at one, Figure 3-6 shows the
MAC address of a wireless network's adaptor card. This particular one is in
the form of a PC card that plugs into a PC card slot on a laptop that enables
you to add wireless functionality. The MAC address has been circled.

Learning the source MAC address does not require any network activity.
It is the MAC address that is assigned to the network adaptor in the source
machine. However, determining the destination MAC address does require
the help of ARP. ARP operates at the Internet layer, but the fruit of its
labor (the MAC address) is attached at the Network Access layer. Therefore,
the MAC address is a part of the frame header and not the packet header.
ARP broadcasts on the local network (remember, a broadcast goes to every
computer). The essence of its message is, "If this is your IP address, send me
your MAC address." All of the computers receive the message, but only the
computer that possesses the destination IP address responds. Then the MAC
address is placed in the frame. When the source and destination computer are
in the same subnet, the process is as simple as Figure 3-7. When they are not,
the process is a bit more complicated, and I cover that in the last section of
this chapter.
Figure 3-7: ARP broadcast

M

I

I need the MAC
address for

192.168.1.2

192.168.1.1

IP: 192.168.1.2
MAC: 00:02:33:c0

192.168.1.2

ARP-Internet Layer or Network Access
Layer?
ARP has classically been placed on the Internet layer, but it does part
of its work on the Network Access layer, when it performs the ARP
broadcast and supplies the MAC address for the Network Access layer
frame .

Describing the Logic of MAC-to-IP-Address
Conversion
In any network with computers that are located in different subnets and that
need to reach other, the computers are configured with three values by the
administrator. Those values are as follows:
IP address This uniquely identifies the computer.

Subnet mask This value identifies the subnet in which the computer is
located.
Default gateway This is the IP address of the nearest router in the
network.
The IP address, subnet mask, and default gateway values are
discussed in detail in Chapters 7 and 8.

M 1 al co

dt

""'

d

ora

After the source computer determines the destination IP address, it will
determine whether that destination computer is in the same network or subnet
as itself. This process, called anding, is covered in Chapter 7. For now, realize
that this process allows the computer to determine this net\vork information.
If it is determined that the two computers are in the same network, the
process proceeds as shown in Figure 3-7 . However, if that is not the case,
ARP will broadcast for the MAC address of the router or the default gateway,
not the MAC address of the destination computer. It is important to realize
that the IP address of the destination computer will still go into the packet,
but the destination MAC address placed in the frame will be that of the router.
ARP will determine the MAC address of the router in the same fashion as
it would if it were determining the IP address of a computer that is, with a
local broadcast.
When the frame is sent out, it will go to the router. When the router
receives the frame, it will perform a lookup in its routing table and determine
in which direction to send the packet based on the IP address of the
destination computer. However, if the destination computer is not located on
one of the local interfaces of the router and the router needs to send this packet
to another router, it will place the MAC address of the next router in the frame
and leave the destination IP address unchanged. If this packet needs to go
across many routers, the MAC address will keep changing. The MAC address
will always be the MAC address of the next router until the packet arrives at
the local subnet where the destination computer is located. Only then will the
MAC address of the destination computer be placed in the frame.
As a simple illustration of this process, let's assign some IP addresses and
MAC addresses to two computers and three routers and see what happens
to the addresses as they go across the network. The network is arranged as
shown in Figure 3-8. To understand this process, you need to know that the
three routers will each have two sets of addresses, one for each interface in
use. Interfaces on a router are net\vork connections. For example, RTR2 has
one interface that connects to RTRl and another that connects to RTR3. The

M t

al co

dt

ttY: d

ora

interfaces are also labeled in the diagram. Do not worry about understanding
the IP addresses or the MAC addresses at this point. Just try to follow the
logic of how the MAC addresses change and the IP addresses do not.

Figure 3-8: Frame forwarding
RTR3a

WKS2

RTRI

RTR2

WKSI

The IP addresses and the MAC addresses of each device are shown in
Table 3-1.

Table 3-1: Device IP addresses and MAC addresses
Device IP Address MAC Address
WKS1

192.168.5.5 a-a-a-a-a-a

RTR1a 192. 168.5.6 b-b-b-b-b-b
RTR1b 172.16.5.5

c-c-c-c-c-c

RTR2a 172.16.5.6

d-d-d-d-d-d

RTR2b 10.6.9.5

e-e-e-e-e-e

RTR3a 10.6.9.6

f-f-f-f-f-f

RTR3b 27.3.5.9

o-o-o-g-o-g
ooo
o

WKS2 27.3.5.10

h-h-h-h-h-h

There will be four handoffs to get this packet from WKS 1 to WKS2. Table
3-2 shows the destination IP addresses and destination MAC addresses used
at each handoff.

M t

al co

dt

ttY: d

ora

Table 3-2: Handoff destination addresses
Han doff

Packet (IP) Destination
Address

Frame (MAC) Destination
Address

WKSl to
RTRla

27.3.5.10

b-b-b-b-b-b

RTRlb to
RTR2a

27.3.5.10

d-d-d-d-d-d

RTR2b to
RTR3a

27.3.5 .10

f-f-f-f-f-f-f

RTR3b to
WKS2

27.3.5 .10

h-h-h-h-h-h

As you can see, the destination IP address in the packet does not change,
but the MAC address in the frame changes at each handoff.

The Essentials and Beyond
TCP/IP is the most important networking protocol you will study, and
as such its operations are important to understand. Like the OSI model,
it is used to describe the process of encapsulation. There are four layers
in the TCP/IP tnodel as opposed to seven in the OSI model. Those four
layers are the Application, Transport, Internet, and Network Access
layers.
At each layer of the tnodel, the PDU is referred to differently. It begins
at the Application layer as data and then changes to a segment, a
packet, a frame, and finally to a series of bits to be transmitted.
The TCPIIP suite operates at the Transport and Internet layers. At
the Transport layer, TCP and UDP operate and connect services and
applications by using port numbers. At the Internet layer, IP and ARP
provide IP and MAC addressing.

M t

al co

dt

ttY: d

ora

Working together, this suite of protocols handles all transfer of data
across a network, both within a LAN and between LANs .

Additional Exercises
Using Figure 3-8 (shown earlier) and Table 3-3, fill out Table 3-4 with
the destination IP address and destination MAC address that would be
in the packet and frame , respectively, at each handoff if a packet were
sent from WKS 1 to WKS2 .
The IP addresses and the MAC addresses of each device are shown in
Table 3-3.

Table 3-3: Device IP addresses and MAC addresses
Device IP Address MAC Address
WKS1

16.8.8. 8

v-v-v-v-v-v

RTR1 a 16.8.8.15

a-a-a-a-a-a

RTR1b 77 .6.8 .12

d-d-d-d-d-d

RTR2a 77 .6.8.46

q-q-q-q-q-q

RTR2b 54.97.66.4

w-w-w-w-w-w

RTR3a 54.97.66.46 s-s-s-s-s-s
RTR3b 196.64.3.3

n-n-n-n-n-n

WKS2 196.64 .3.74 e-e-e-e-e-e

Table 3-4: Handoff destination addresses
Handoff

Packet (IP) Destination
Address

Frame (MAC) Destination
Address

WKS1 to
RTR1a

M t

al co

dt

tru; d . ora

Handoff

Packet (IP) Destination
Address

Frame (MAC) Destination
Address

RTRlb to
RTR2a
RTR2b to
RTR3a
RTR3b to
WKS2

Review Questions
1. In what year was it mandated that all computers connected to
the ARPANET use TCPliP?

A. 1979
B . 1969
C. 1983

D . 1974
2. Which of the following is a layer in the OSI models not found
in the T CP liP model?
A. Application
B . Presentation
C. Network Access
D . Internet
3. Which layer in the TCP/IP model uses port numbers?
A. Network Access
B . Application

C. Transport
D. Internet
4. The Internet layer is where the _ _ _ is placed.
A. Port number
B . IP address

C. MAC address
D. Data
5. How many protocols are in the TCP/IP suite?

A . Five
B. Four

C. Seven
D . Six

6. Which of the following is not a difference between the OSI and
TCP/IP models?
A. In the OSI model, it was envisioned that the Session layer
would handle the establishment and management of the
communication session between the devices. In TCP/IP, that
function is performed by the TCP liP protocol itself at a different
layer, the Internet layer.
B. Data conversion into generic formats understood by both
sides of the communication is performed at the Presentation
layer of the OSI model. These functions take place in the
Application layer of the TCPliP model.
C. When TCP/IP was developed, it was decided that the
division of the bottom layer into Data-Link and Physical layers

was unnecessary and thus all functions are combined in the
Network Access layer of the TCP/IP model.
D. The OSI model envisioned the host devices as deaf, dumb,
and blind bystanders to the networking process, not participants
(thus the term dumb terminal). In the TCP/IP model, the hosts
participate and take part in functions such as end-to-end
verification, routing, and network control. They act as
intelligent role players in the transfer of information.
7. What is the PDU called at the Transport layer?
A . Data
B. Segment
C. Frame
D. Packet
8. At what layer is the PDU called a frame?
A. Network Access
B. Application
C. Transport
D. Internet
9. Which of the following describes UDP ?
A . Connection-oriented
B. Guaranteed
C. Stateless
D. Used for unicasts

10. Which protocol is responsible for identifying the destination
MAC address?
A . TCP

B. RDP
C. UDP

D. ARP

Chapter4
Protocols
A protocol is an agreement on how something is done. There are many
types of protocols. There are business protocols that define how business is
properly carried out and social protocols that define what type of behavior is
acceptable. Networking protocols define the rules of communication between
devices.
It is possible for computers to be enabled for more than one net\vorking
protocol at a time, but to interact with another computer, both devices must
share at least one networking protocol. In this respect, protocols are like
languages. If both devices don't speak a common language, they can't
communicate.

In this chapter, protocols at every layer of the TCPIIP model are discussed.
Some of these are networking protocols and some are special function
protocols, such as SMTP, which transfers em ails. As you have learned,
routing is the process of determining the best route to a packet's destination.
This best route can be configured manually on the router (called static
routing), or the router can be configured to use a routing protocol, which
dynamically learns the routes. There is also a routed protocol, which is a
networking protocol such as TCP /IP, that can be routed, but it does not
perform the routing. Routing and routed protocols are compared and
contrasted in this chapter as well. Specifically, this chapter covers the
following topics:
• Understanding the function of protocols

• Exploring Application layer protocols
• Exploring Transport layer protocols
• Exploring Internet layer protocols
• Exploring Network Access layer protocols

Understanding the Function of
Protocols
The function of a protocol is largely determined by the layer of the TCP/
IP model at which it operates. The layer on which it operates is dependent
on the type of information that it uses in the process of carrying out its job.
For example, if a protocol uses Transport layer information (port numbers) to
perform its job, it will be a Transport layer protocol. If it uses MAC addresses,
it will be a Network Access layer protocol.
However, there is another way to classify networking protocols such as
TCP liP . There are routed protocols and routing protocols. In this section,
routing and routed protocols are discussed.

Defining Routed Protocols
A routed protocol is a networking protocol that is capable of being routed.
This means that the protocol was designed for transferring information to
networks other than the network in which the source device resides. That
requires its design to include some method of identifying devices and groups
of devices that can be used in the routing process.
Routing services are provided to routed protocols in one of two ways. In
static routing, routes are manually configured on the routers at the command
line. In dynamic routing, routers on the network are configured to use a
routing protocol to determine routes.

Not all networking protocols are capable of being routed. Therefore, they
are not routed protocols, even though they are networking protocols. An
example is NetBEUI, an early Microsoft protocol. It was designed as a
protocol for small workgroups of computers that were located on the same
physical segment. It uses no numbering system of any kind, and the
computers are identified by names that each machine broadcasts out to the
other machines when required. The protocol can't be routed because there is
no information for the router to use to determine where it came from and
where it needs to go.
Other protocols such as TCP/IP, IPX/SPX, and AppleTalk were designed
with routing in mind. Each has a numbering system that can be used by
routers to determine the source and destination and the path required to get
the packet from point A to point B.

Defining Routing Protocols
A routing protocol obtains and uses the information required to route the
packets of the routed protocol. For example, in an IP network, the routing
protocol will use routing tables that are constructed in terms of IP addressing
infonnation to determine how to get the IP packets to their destination. Cisco
routers are capable of routing IP, IPX, and Apple Talk even though they use
different numbering systems. In today's networks, it is hard to find IPX and
AppleTalk being routed, however.
Routing protocols were developed as an alternative to manually creating
the routing tables in the routers from the command-line interface of the router.
Configuring routes from the command line is called static routing. There are
several reasons why routing protocols are preferable to static routing. First,
routing protocols have the capability to react to changes in the network, such
as a malfunction of a link in the network. Second, they can choose the best
route to a destination when multiple routes to the same destination exist.
Finally, they have the capability to learn the routes and populate the routing

tables without manual programming by the administrator. The rest of this
chapter is devoted to routed protocols.
Chapter 15,

~~Configuring

Static Routing," and Chapter 16,
~~Configuring Dynamic Routing," cover in detail the
characteristics and the configuration of both static routing
and routing protocols.

Exploring Application Layer Protocols
Protocols that operate at the Application layer are dedicated to a very specific
function. For example, DNS, which gets its name from the hierarchical
system that its uses called the Domain Name System, does nothing but
handle requests from computers that are trying to match an IP address with a
computer name (which is discussed in detail later in this section).
Application layer protocols have a dependent relationship with the
protocols that operate at the lower levels of the TCP/IP model. There is no
mechanism built into these protocols to locate the source and destination and
get the application data where it needs to go. The Application layer protocol
depends on TCP, UDP, IP, and ARP to take care of that function. In this
section, you'll learn about the purpose and operation of some of the most
common Application layer protocols.

Describing FTP
File Transfer Protocol (FTP) is a connection-oriented protocol dedicated to
moving file s from one computer to another. It operates on a client-server
model, which means that the FTP client application is used to request the data,
and the FTP server will respond and send the data. It can be executed from

the command line with FTP commands, but many FTP applications now do
not require any typing of commands.
FTP uses TCP port 21 for the client to connect to the server and then
uses port 20 for the file transfer. If used in what is called passive mode , the
transfer will occur using a random port number chosen by the client. This is
an example of an upper-layer protocol (FTP) using the services of the lowerlayer protocol (TCP).

Cross-Layer Communication
When the Transport layer receives the data from the Application layer,
it reads the header placed on the data by that layer to determine the port
number that needs to be placed on the segment.

In this case, because a TCP port is in use, all rules of engagement that
go along with TCP are in effect. This means that the TCP handshake must
complete successfully, all packets must be acknowledged, and if the session
is interrupted, it will need to be rebuilt with the handshake to resume data
transfer. The handshake is covered in more detail later in this chapter, in the
section "Reviewing TCP."
Authentication can be used when connecting to the FTP server. However,
it is important to note that the authentication packets that go back and forth
between the client and the server are sent in clear text. This means that if the
packets were to be captured with a protocol analyzer, or sniffer, the usemame
and password could be read.
For this reason, in many cases FTP uses anonymous authentication, which
means that users are allowed to connect without a name and a password. In
either case, the lack of a secure connection makes FTP ill-suited for secure
transfers. Other secure alternatives to FTP do exist, such as SSH File Transfer
protocol. Despite the relative lack of security, FTP is still the most widely
used file transfer protocol for two reasons. In the vast majority of cases, the

information is not sensitive or valuable enough for a hacker to go to the
trouble of capturing and decoding the packets and obtaining a username and
password. Moreover, it is a mature and well-known standard that benefits
from all of the features of TCP (acknowledgments, sequencing, and so on).

SSH
For more information on Secure Shell FTP, see the following website:

http : //en . wiki pedi a . org/wi ki/SSH_File_Transfer_Pro t ocol .

Describing TFTP
Trivial File Transfe r Protocol (TFTP) is the connectionless version of FTP.
TFTP has a very limited set of capabilities and provides no authentication.
It is designed to be lighnveight and fast, and so it uses UDP as its transport
protocol. UDP packets are very small, and UDP transfer is fast and perfectly
suited for TFTP. The port number is UDP 69 to begin the connection, but the
client and server may change to random ports for the transfer afterward.
TFTP is rarely used as a substitute for FTP. However, because of its low
memory requirements and simplicity, it is often used to connect to a server
and to download router operating systems and configuration files to a Cisco
router. Because TFTP uses UDP, it is connectionless and does not incur
the overhead of TCP, nor does it enjoy any of the benefits of TCP such as
acknowledgments and sequencing.

TFTP

In Chapter 12, ~~Managing the Cisco lOS," you will learn how to use
TFTP to transfer a router operating system (called the Cisco lOS) from
a TFTP server to a router. It is also possible to have a router boot its
lOS from a TFTP server rather than from its usual local location on the
router. You will learn more about that in Chapter 12 as well. In both
cases, TFTP is the protocol in use.

Describing SMTP
Although it is not the only protocol involved in the sending and receiving of
email, Simple Mail Transfer Protocol (SMTP) is the Internet standard used
when email is transferred from one server to another. The use of this standard
is what allows a Microsoft Exchange email server to send mail to a Novell
GroupWise email server and receive email from an IBM Lotus Notes email
server. All of these servers (and other brands as well) use SMTP to transfer
email.
SMTP is a store-and-forward protocol that has also been used in other
situations that can benefit from its capability to attempt a connection, fail ,
store the information, and try again later. For example, SMTP is an alternative
to TCP/IP \Vhen transferring Microsoft Active Directory replication traffic
between Active Directory sites. When a connection is unreliable, SMTP's
store-and-forward nature is beneficial.

Email Protocol
The following image shows how SMTP and client protocols are used
together to make email transfers.

___

Miuosoft EJ<(hange

--~

v
•

s

j,P3

Ted sends an email lo Sally

Novdl Groupl'f.se

S~1TP

_.
":;
•

~

4
\~

s

Sally retrieves lhe email from lhe setVer

It is a text-based and command-driven protocol that can be executed
from a command line, although email servers will execute these commands
automatically \iVhen required. It also is client-server in nature, with the SMTP
client making requests of the SMTP server. These requests are called
transactions. The SMTP server can also respond to email clients by using
protocols such as Post Office Protocol (POP3) or Internet Message Access
protocol (IMAP4). (The 3 and 4 simply stand for versions of the POP and
IMAP protocols, respectively.) These protocols are required because SMTP
only delivers email. It cannot request email. SMTP uses TCP port 25 so it is
connection oriented and thus benefits from all of the features and overhead of
TCP.

Overhead
TCP and UDP both have packet headers. The header on the TCP
packet is almost three times the size of the UDP header. The TCP
packet header is larger because more space is required to hold all the
information that TCP uses to perfonn acknowledgments, sequencing,
and other functions. The atnount of space used in the header is often
referred to as overhead. This is why TCP is said to have more
overhead than UDP.

Describing DNS
E18Me IS ~o

dol d ut ur

If DNS did not exist, we could not connect to web sites on the Internet or other
computers on a LAN without knowing the IP address of the computer hosting
the website or the IP address of the computer on the LAN. DNS takes care
of this for us and because most of us don't even know our own computer's
IP address, this is an incredible benefit. DNS performs resolution of an IP
address to a computer name or website name. It operates in a hierarchical
arrangement known as the DNS namespace.
The DNS namespace refers to the naming system used in DNS. To prevent
DNS servers on the Internet from being overwhelmed with the number of
names to resolve, the servers are organized into a hierarchy. Each level of
the hierarchy contains part of the information required to locate a website
or company domain. By storing and delivering the name-to-IP-address
information in this fashion, the servers have a much more manageable amount
of data with which to work. There are three levels to this hierarchy:
• Root level
• Top level
• Domain level
When you see the DNS name for a website, different parts of the name are
derived from different levels of the hierarchy. Consider the following name:
abc . com.

The dot (period) at the far right (which is not required and is usually left
off in the real world) represents the root level. The com part is from the top
level, and the a bc is from the domain level. The period between abc and com
is required and important to include for proper interpretation of the name by
the DNS servers. When a computer needs to know the IP address for abc . com,
it will begin a search at the root level. The root-level servers have information
about only top-level servers (. com, . mil , . n et, and so forth). The root-level
server will direct the query to a top-level server (. com in this case). The . com
server will know all records that end in . c o m, including a be . com. The server
will return the IP address to the computer, and then the computer can make an
IP-address-to-IP-address connection with that web server.

DNS servers on the Internet are managed by a collection of universities,
private corporations, and the Internet Corporation for Assigned Names and
Numbers (ICANN). Individual companies also operate their O\iVn DNS
servers, which then rely on the Internet DNS servers to locate computers
outside of the company. The complete details of DNS are beyond the scope of
this book, but let's take a look at how a DNS server operating on a LAN does
its job.
Each computer is configured with the address of the DNS server. This IP
address can be either configured statically or provided automatically from a
DHCP server.
Dynamic Host Configuration Protocol (DHCP) is discussed
in detail in Chapter 7, "Classful IP Addressing."

This is a server that provides IP addressing configuration information to
computers automatically, saving the administrative effort and human error
inherent in performing this configuration statically on each device. One of the
items that the DHCP server can issue to the computers is the IP address of the
DNS server.
DNS is another client-server protocol. A series of messages pass back
and forth between the DNS client and the DNS server, resulting in the DNS
server providing the IP address of the computer whose name the DNS client
requested. These requests, called queries, and responses, called resolutions,
use UDP port 53. Because of its low overhead, UDP is fast and works well for
these transfers. This is an example of the Transport protocol (UDP) leaving
the reliability up to the upper-layer protocol (DNS). If a DNS client does not
receive a reply in a certain amount of time, the client will make additional
attempts.
Multiple DNS servers often exist in a network to provide fault tolerance.
When this is done, the DNS servers must keep their records synchronized.
These sets of records are called zones, and the synchronization is done with

a process called zone transfers . For this operation, DNS does not use UDP; it
uses TCP port 53. This process is displayed in Figure 4-1 .
Figure 4-1: DNS use of TCP and UDP
DNS Server A

...

ZoneTransfer (TCP)

---

DNS Server B

~
0

"'

s

DNS Query (UDP)

Describing SNMP
Simple Ne twork Management Protocol (SJVMP) is an Application layer
protocol used to manage and monitor devices on a network from a central
location. These devices can include any device type for which information
is contained in a management information base (MIB). MIBs describe the
structure of the management data of a device subsystem; they use a
hierarchical namespace containing object identifiers.
These devices can include computers, routers, switches, wireless access
points, and more. The system operates with three components:
• The managed device the actual computer or other hardware
• An agent software that runs on managed devices
• A network management system (NMS) software that runs on the
manager device
SNMP uses UDP to transfer messages back and forth between the
management system and the agents running on the managed devices. Inside
the UDP packets (called datagrams) are commands from the management
system to the agent. These commands can be used either to get information
from the device about its state (SNMP GetRequest) or to make a change in
the device's configuration (SetRequest). If a GetRequest command has been
sent, the device will respond with an SNMP response . If there is an item of
E18Me ts ~o

dol d ul ur

information of particular interest to an administrator about the device, that
administrator can set what is called a trap on the device. A trap is designed
to send a message (SNMP trap) to the management system if a certain event
occurs. These communications are illustrated in Figure 4-2.
Figure 4-2: SNMP messages
SNMP Response
(55% Available Memory)

~
~

SNMP GetRequest
(What's your available memory?)

SNMPTrap
(I'm overheating!!!)

SNMP also uses more than one port in its operations. The SNMP agent
receives requests on UDP port 16 1. The management system may send
requests from any available source port to port 161 in the agent. The agent
response will be sent back to the source port on the manager. The
management system receives notifications (traps) on port 162. The agent may
generate notifications from any available port.

Exploring Transport Layer Protocols
The Transport layer is responsible for identifying the Application layer
protocol to the destination computer. It does this by using what are called port
numbers. You also learned that there are two transport protocols: UDP and
TCP. UDP is used for broadcast and multicast transmissions, and TCP is used
for unicast transmissions. TCP and UDP use these port numbers to identify
services, protocols and applications that operate on the Application layer.
In this section, you'll look at more details of UDP and TCP, paying
particular attention to the additional features of TCP that allow it to add
reliability and help maximize network performance.

8

Reviewing TCP
As you learned in Chapter 3, "TCP/IP," TCP creates a state of connection that
is verified on both ends of the communication before data transfer takes place.
The fact that the receiving device must acknowledge the receipt of each frame
also guarantees delivery of information. Beyond these basic concepts, TCP
has a number of features that make it more complex than UDP but also more
reliable. The features of TCP are as follows:

Sequencing Data transmission in most cases requires many packets. When
packets are being routed across the network, there is no assurance that
the packets will arrive at the destination in the same order that they were
sent. This is due to multiple paths to the destination, changing network
conditions, and other factors. As packets are sent, TCP places a sequential
number on each packet. This allows the destination device to place the
packets in the proper order after all of the packets that are a part of the
transmission arrive. These numbers are also a part of the ackno\;vledgment
system explained in the next section.
Acknowledgments Earlier you learned that TCP provides reliability in
that the destination device acknowledges each packet it has received so
that any missed packets can be retransmitted. It does not do this by sending
an acknowledgment (ACK) packet back for each packet received. That
would create tremendous traffic. The solution is much more elegant than
that. The computers arrive at an agreement concerning how many bytes of
data can be sent before the cumulative data must be acknowledged (this is
called windowing, covered in the next section). By signaling the number
that it needs to receive next, the destination computer is also signaling what
it has received and, in effect, what it has missed. This process is displayed
with no errors in Figure 4-3 and with errors in Figure 4-4.
Figure 4-3: ACK with no errors

8

I received all 3,000
bytes- sending ACK

John
(Web Browser)

Ruby
(Web Browser)

1,000 Bytes of Data, Sequence= 1,000
1,000 Bytes of Data, Sequence = 2,000
1,000 Bytes of Data, Sequence = 3,000
No Data Acknowledgment =4,000

Figure 4-4: ACK with errors

John

Ruby

(Web Browstr)

(Web Browse~

1.000 Bytes of Data, Sequence =1.000
S<quence = 2,000 is
lost. retransmit it.

1.000 Bytes of Data. Sequen<e = 2,000
1.000 Bytes of Data, S<quence = 3.000
No Oat> Adulowledgment = 2,000
1,000 Bytes of Data, S<quence = 2,000
No Data Adulowledgment = 4,000

~

~,---------.,
I re<eived 2,000..2,999
and have 3,00()-3,999;
IEf'od 4,000

Windowing and Flow Control In the preceding paragraph on
acknowledgments, you learned that the source and destination computers
agree on the amount of data to send before an acknowledgment is required.
This amount is not static. It can change, which is a good thing. If network
conditions allow, larger sets of data can be sent between acknowledgments
without errors. If, on the other hand, errors start to occur, the amount
can be decreased (in poor network conditions, larger amounts of data sent
between acknowledgments tend to increase the possibility of errors). The
process of monitoring the network conditions and window size \Vith a
goal of reducing the number of acknowledgments required is called flow
control.

8

This automatic adjustment process is accomplished with the TCP sliding
window a window of transmitted data between ACKs. This process is
managed with a field in the TCP header called the Window field. If a
series of sets of data are successfully sent with no errors, the window
size might be increased. If, on the other hand, errors are starting to occur,
the windovv's size might be decreased. The value in the Window field is
the amount of buffer space available for incoming data on the destination
device. The sending device monitors this value as each ACK is received.
The TCP Three-Way Handshake As you learned in Chapter 3, TCP
is a stateful protocol a state of connection is established before any
transmission takes place. This is accomplished with a predictable process
called the TCP three-way handshake. At different points in the process,
the two computers are in various states. The entire process is illustrated in
Figure 4-5.

The steps are as follows :
SYN This is sent from the computer requesting a connection or
synchronization. After the sending computer sends S YN, the computer
is said to be in the S YN SENT state.
SYN ACK Before the receiving computer receives the SYN packet,
it is said to be in a LISTENING state. After the receiving computer
receives the SYN packet, it will transition to the SYN_RCVD state and
will transmit a packet called the SYN ACK, the purpose of which is to
let the sending computer know that the SYN packet was received.
ACK When the sender receives the SYN ACK packet, it will transition
to the ESTABLISHED state and transmit back an ACK packet. When
the receiver gets this ACK packet, it will also transition to the
ESTABLISHED state. At this point, a state of connection has been
established.
Figure 4-5: TCP three-way handshake

M t

al co

dt

ttY: d

ora

Window This field indicates the size of the receive window as discussed
in the previous list item, "Windowing and Flow Control."
Checksum This value is used to verify the integrity of the information in
the header to detect header corruption.
Urgent This field is related to one of the use of the Urgent flag in the Flags
field.
Options and Padding This field is related to the Data Offset field and
ensures that the length of the header is a multiple of 32 bits.
Data This is the upper-layer data.

TCP Overhead
As noted earlier in this chapter, the header on the TCP packet is
almost three times the size of the UDP header. All the information
that TCP uses to perform acknowledgments, sequencing, and other
functions requires more space in the header. Consequently, UDP has
less overhead than TCP.

Reviewing UDP
With regard to UDP, there's not a lot to add that hasn't already been said in
Chapter 3. UDP has none of the features of TCP and none of the overhead.
As you can see in Figure 4-7 , its header contains only fields for source port,
destination port, length, checksum, and the data.
Figure 4-7: UDP header
Source Port (16 bits)

Destination Port (16 bits)

Length (16 bits)

Checksum (16 bits)
Data .. .

E18Me ts ~o

dot d ul ur

The description of each field in the header is as follows :
Source port number This field identifies the source port.

Destination port number This field identifies the destination port.
Length This field specifies the length in bytes of the entire datagram :
header and data.
Checksum This value is used to verify the integrity of the information in
the header to detect header corruption.
Data This is the upper-layer data.

Exploring Internet Layer Protocols
Two-thirds of the TCP/IP protocol suite operates on the Internet layer, so a
lot of activity occurs here. This is the layer where routing occurs and where
the resolution of IP addresses to MAC addresses occurs. There are also two
protocols on this layer that we haven't really discussed yet: ICMP and IGMP.
In this section, all of that is covered as well as the interactions of the protocols
on the TCP/IP Internet layer "team."

Describing IP
Internet Protocol (JP) is a connectionless protocol that depends on TCP when
connection -oriented operations are required. The IP header is attached to
the segment containing everything that was added at the Application and
Transport layers. This container is called an IP datagram or packet.It is
capable of being routed because it is labeled with IP address information.
When the Application data with the TCP or UDP header attached is handed
down to the Internet layer, IP will add its own header called the IP header.
It is much like the other headers you have seen in that it contains fields in
specific locations that contain values. In the TCP and UDP header, these

fields contained information such as source port, destination port, sequence
number, acknowledgment number, and window in TCP, and source and
destination port number in UDP.
After IP has determined the destination IP address, usually through the
DNS name resolution process, it places it along with the source IP address in
the IP header.
For more about DNS , see the section "Describing DNS"
earlier in this chapter.

The IP header, shown in Figure 4-8, includes exactly what you would
expect: IP addresses.

Figure 4-8: IP header
4·8it

8·~

16-8~

3Hil

\'Mion

l.ftwmtt Header
l.togth ~Hl)

l)"Pt of SeMce
(lOS)

Tot>l LAogtll (Tl)

16tMfiC~1iOR

~mt!Ollw(IIU

I

-

ftagtlVfll Ofkd

Fl.l9S

(Of1se0
Htader ~tlrJ

Source ~ress
~nAddrtss

Options

PO)dding

o.u

The description of each field in the header is as follows:
Version This identifies the version of IP. There are two current versions,
4 and 6. The version based on 32-bit IP addresses (the one we have been
discussing) is version 4. Version 6 is a new version that uses a completely
different numbering system. Version 6 is covered briefly in Chapter 8,
"Classless IP Addressing."

Internet Header Length (IHL) The Internet Header Length specifies the
length of this IP header, which will include the use of a field seen later in
the header called Options.
Type of Service (TOS) The Type of Service is a field that can be used to
mark the packet with a priority of sorts. It is not widely used because it

E18Me ts ~o

dot d ul ur

has been replaced by a different method of accomplishing the same goal
called Differentiated Services Code Point (DSCP) . This system uses the
same 8 bits that were used for TOS but uses them differently and allows
for more types of service and more-granular control of quality of service.
You can find more information on DSCP at http://en.wikipedia.org/wiki/
Differentiated services.
Total Length (TL) The Total Length is the length of the entire IP
datagram, not just the header, measured in bytes.
Identification This is used to identify pieces of a message that has been
broken up into smaller pieces called fragments. This helps keep fragments
from different messages organized at arrival.
Flags These fields are used to mark a datagram to not be fragmented, or
to indicate that it has been fragmented and there are more fragments to
follow.
Fragment Offset (Offset) This field is used to indicate where in the
overall message this fragment should go.
Time to Live (TTL) This is the Time to Live. This might be considered
the lifetime of the datagram, which does have a limit to prevent a datagram
that can find no destination from circling the networks forever. This is a
number and not a time value. It indicates the number of routers or hops
the datagram is allowed to go. When it has counted down to 0, the TTL is
exceeded and the datagram is discarded.
Protocol This indicates the protocol carried in the datagram (example :
TCP, UDP, ICMP, and so forth). The protocols are identified by
standardized numbers.
Header Checksum This value is used to verify the integrity of the
information in the header to detect header corruption.
Source Address This the source IP address.
Destination Address This is the destination IP address.
E18Me ts ~o

dot d ul ur

Options This field is used for special options beyond the scope of this
discussion.
You
can find
out
more
about
options
at
http:/lsimplestcodings.com/20 10/ 10/08/tcp-header-format/.
Padding This field is used to ensure that the length of the header is a
multiple of 32 bits.
Data This is everything that was added by the upper layer.

Describing ARP
Address Resolution Protocol (ARP) is responsible for resolving the IP address
to the MAC address of the destination. As you learned in Chapter 3, that is not
necessarily the MAC address of the ultimate destination. As a quick review,
if the source and destination are in the same local network or IP subnet,
the MAC address will be the MAC address of the destination device and no
routers become involved.
Subnets are discussed in Chapter 8.

However, if that is not the case, ARP will learn the MAC address of the
local router, a setting on the device called the default gateway. When the
router receives the packet, it will use the destination IP address, which will
still be the IP address of the ultimate destination, and route the packet to
the correct subnet. If the packet is routed through multiple routers, the MAC
address will continue to change, but the destination IP address will remain
that of the destination device and will not be resolved to the MAC address of
the ultimate destination until it has reached the local subnet where the device
resides.
As you also learned in Chapter 3, ARP uses an ARP broadcast to learn the
MAC, regardless of whether it is resolving the destination MAC address or
the router MAC address.

To review the ARP resolution process, see Chapter 3.

When this broadcast occurs, the Transport layer protocol that will be used
is UDP, because it is a broadcast.

Describing ICMP
Internet Control Message Protocol (ICMP) is used by devices to send
messages to one another to convey error conditions that may occur. It is
not used to transfer data. These errors are reported back to the original
source IP address. Earlier, in the section "Describing IP ,"you learned that IP
operating without TCP is connectionless. Because ICMP is transported in an
IP datagram with no Transport protocol involved, it is connectionless.
As a network technician, your use of these error messages will be through
the use of command-line utilities, such as pi ng and traceroute . By typing
these commands and the destination IP address, you can obtain valuable
troubleshooting information when connectivity problems exist between
devices.
ICMP packets contain error codes that will be displayed on the screen
when these commands are issued that relate information about the error
condition that exists. Let's examine both of these commands and discuss
some of the more common error codes and what they mean. When the ping
command is issued and is successful, meaning the destination is reachable,
the destination will respond with what is called a reply. The initiating ping
is called an echo request, and the response is called an echo reply. The
default number of times the destination will respond is four. In Figure 4-9, a
successful execution of the command is displayed.

Figure 4-9: Echo request and reply

M t

al co

dt

ttY: d

ora

• u-1rttor- c~ P~t
'R~""iiiiiii
,u;roTor~u~bva lU.rslon 6 .i .~ill7'1~~":
. __ _ ____;,;..;;;,.,o;;;;;==l
.

~

pyrlfht

<c> 288' ntcrosort

Cor.-~tton .

All

r l»~t•

rct~rvcd .

W• ora"toe"'ill•"' )pins 192 . 1". 21.3

....., 192 . "1.21.3 vitll 32 bytu of d.•u:
ply roft t 92.1,8 .tl.3 : hyto l•32 tl-.(lfto ltL•l28
X.ply froft 192.1,1.21.3: hytos•32 t~(lftJ TIL•l21

)te'Pl.y rrol'l 192.lU.:t-1.3 : bytot•32 tifte(tl'lt Tfl.•l28
~·ly

Iron l92.t,I.Zt .l: hytoo•32

lng

t~< t no

TTL•121

ror l t2.161.2l.l:

~t a tist tc t
P~u: ko t o l iont

• ot, Roc o iYoc.l • "'· l,o ot • 0 (8';lc
flpp.rolCll'l•te 1-ou•ul t l"lp tines Jl\ AUU- uc:onds:
"inb1un • tMs . "'-xb1u" • O.U. 114olei"Age • e.u

lo• • >.

: 'lhle"s"nc:"'Ul.- >

When the destination cannot be reached, an error code will be displayed.
The most common of these are as follows :

Destination Unreachable This indicates that the IP datagram could not be
forwarded. This also includes an error code (number) that indicates more
detail for example=- that there is no routing table entry =- or the destination
is reachable but did not respond to ARP.
Request Timed Out This indicates that the TTL of the datagram was
exceeded. This means you did not even get a response from a router. This
can occur if the router is configured to not respond to I CMP, which is not
uncommon. This is the situation in Figure 4-10.
Figure 4-10: Request timed out
IIi Aclminl~r•!Or. Command PI>Of!ll)t
:'U••~'t"e"'lllan)pil'ls

inti"• 112. 1,8.23&.,
tifte• out .
Reque•t tlne4 out.
~qu• • t tift•• ovt .
~que s t tift•• out .
~que e t

[ftJ

~
•

t t2.t,t.234. ,

Yic~

32

bye~

ef

~ •t•:

'i

• tatht iu for n2 . 168 . 2Ji . 6:
P• eqccs: fen ce • 4 . R.ee :A.,e4 • 0. L.• t • 4 (SIJO)( l es:s),

: '-U•en\.tcncni llan>_

Ping
In Chapter 7, you will learn how to use the p i ng command to determine
the exact nature of a problem.

M t

al co

dt

ltY: d

ora

Another useful command that uses ICMP is tracerou te or tr acert .
On a Cisco router or switch, the command is trace r o ute . On a Windows
computer, the command is t racert.
Whereas ping determines whether you can establish connectivity,
tracero ute helps you determine exactly where in the network that
connectivity broke down. It does this by utilizing the TTL field in the IP
datagram (see the section entitled "Describing IP"). It sends a series of ICMP
datagrams, and with each successive transmission, it adds one to the TTL.
This causes each router in the path to respond. When no response is received
from a router, the problem has been located.
In the follo\ving example, the output of the tracerout e command
executed from a router, the command succeeded, and it took four hops to get
there. There were responses from three routers and one from the destination
device. The output also indicates how long each response took.
router#traceroute 150 . 1 . 4 . 2Type escape sequ e nc e to abort . Trac ing th e
r o ute
t o 150 . 1 . 4 . 2 1 15 0 . 1 . 1 . 2 4 msec 0 msec 4 msec2 150 .1. 2 . 2 4 msec 4 msec 0 ms ec3 15

In Figure 4-11 , the Windows version, tra cert , has been executed to locate
the path to a website. You can see that in step 10, it timed out, indicating a
problem at that Internet router. It could be that the router is configured not to
respond to ICMP.

Figure 4-11: Tracert
c:~ser$~~-nlllen)tr&cert

w~w.nascer.co•

Una.. lo to recolvo t ·IU'{J"Ot ayste"

..... ...

!'!Me

vww. nasctlilt",con .

T.-a.cint l"'UU to \l!f . CO l. c~3 . tU~dns .!'ll Cr-osoft.coA
0"Cf" .. MX"bluA of 30 hoPS:
1

2

3

•s
'
7

J
I

•
'

31
18
11

1

,

" !l

"""

(1 ...

1 ••

(1 ~s
<1 ns
6 n8
6 M

(,S . SS . t?. 2SJ

18.81.2.6
288-4?-?-139. db.st.tt i c.q'l#tlct.net 1208.4? .? . 1381
frp-•4ge-84 . inet . q~a~ . nec
f.-p-cor•-'J2.1ne,.q~trc.nn

1205.168.14.213)
U05.171.:t2.49J

2:2
'
22 "
"I;

22 . .
22 . .

22 tu
22 ns

c h)(•edse -eJ . i.net.q~.~elOt: . not· U? . t 'l.38 . 11
63 -2H-18•H .dt..st•t tc.cr~<~est .net l63.2H.18.

23 . ,

.....

22

RS

xe -e-e-t -8.chl -16c -la.nt~k.•an.ne~

1287.46.43.82

94

n4

~o-1 -I-9-8.col-64c- l~.ntwk.Rtn.not

(20?.1& . 40.9G

77 . .

9?

~

x.-8-1-o-A.col-tGc-lb.ntwk.Atn.n•t 1287.4&.33.18

76 ••
77 ••

•

•

22 . .

•

•

HI

Roq11est tbcd n t •

Describing IGMP
M t

al co

dt

ltY: d

ora

The final Internet layer protocol in the TCPIIP suite is Internet Group
Management Protocol (IGMP). This protocol is used for multicasting. The
protocol operates between routers and hosts that belong to what are called
multicast groups. Multicast groups of devices maintain their unicast IP
addresses for normal transmissions, but they also share a common multicast
address as a group.
Multicast IP addresses are a special range of IP addresses that are
dedicated to this purpose and cannot be given to individual devices. When a
multicast group is assigned a multicast address, any multicast traffic for the
group will be sent to this IP address. The routers on the network will be aware
of the devices that are members of the group, as the devices register with the
routers. The routers will then send any traffic sent to the multicast address to
the individual group members.
Multicast addresses are discussed further in Chapters 7 and
8.

The benefit of multicasting is that it reduces traffic in the network. With
unicasting, the server sends a separate message to each separate device. This
results in a lot of messages being sent over the network. On the other hand,
with multicasting, the server sends one single transmission across the network
to the router. That reduces the load on the net\;vork. The router then sends
transmissions to the group members to fini sh the communication. The two
methods are illustrated in Figure 4-12.

Figure 4-12: Multicasting

M t

al co

dt

ttY: d

ora

Unic.a.sting

Multlcasllng

•

Exploring Network Access Layer
Protocols
Protocols of the Network Access layer can be categorized as either LAN
protocols or WAN protocols. These protocols use some sort of information
to identify the individual hosts in a LAN and to identify the endpoints in a
WAN. MAC addresses are an example of this, but not the only example. In
this section, both types of Network Access layer protocols are covered.
Because the Network Access layer of the TCPIIP model
includes the functionality of the Data-Link layer of the OSI
model, protocols at this layer are often referred to as DataLink layer protocols.

Defining Network Access Layer Protocols on the
LAN
A number of technologies have been used to connect computers on a LAN
through the years. At the Network Access layer, we generally refer to these
elements as technologies because there is both a protocol and a physical
implementation. For example, when Ethernet is used, specific types of cabling

8

and network cards must be used. These technologies operate at the Network
Access layer of the TCP/IP model. (From an OSI model perspective, these
technologies operate at the Data-Link and Physical layers.)
Back in 1980, many proprietary methods had been developed to enable
computers to communicate on a nehvork. The Institute of Electrical and
Electronics Engineers (IEEE), a nonprofit professional association created
in 1963, set out to create standards for the emerging field of networking.
Organizing into working groups, some of the more promising and popular
networking methods were standardized.
A set of standards was created over a period of some years in a process
that is still ongoing today. It included a numbering system for the standards
that was derived from the fact that it was February 1980, or the second
month of '80, leading to all of the standard numbers starting with 802. In
this section, some of the major standards including the most popular today,
Ethernet are discussed in terms of the IEEE standards. Each standard is
identified by a number following a period for example, Ethernet is 802.3.
802.1 and 802.2 These two standards formed the foundation for the rest.
802.1 described LAN operations such as bridging, which is the process
used at the Network Access layer to transfer information, and 802.2
created a new layer just above the MAC layer called the Logical Link
Control (LLC) layer. The LLC layer made multiplexing possible (running
multiple LAN protocols on the network) and added some additional
functions that may or may not be utilized by a particular networking
technology. Ethernet, for example, makes no use of 802.2.
802.3 802.3 described the operations of Ethernet. It included many
amendments or additions as time went by. Amendments specify a
particular implementation, option, or update to a standard and are
identified with letters added to the end of a standard number. For example,
802.3a is Ethernet operating at 10 Mbps over thin coaxial cable. Physical
connections for networks using Ethernet can be deployed using a wide
range of copper cabling and fiber-optic cabling. When Ethernet operates

over wireless connections, it must be encapsulated in a different Network
Access layer technology such as 802.11. Ethernet can operate in either a
bus or star topolo gy.
Network topologies are covered in Chapter 5, "Physical and
Logical Topologies."

802.5 This is an IBM protocol that is no longer in use but worth
mentioning because of the unique way that it operates. It uses a star
topolo gy physically but a ring topology logically. It also uses unique
methods to control access to the network by the devices. These methods
are called contention methods .
Contention methods are discussed in both Chapter 5 and
Chapter 11 , "LAN Operations. "

802.11 One the more recent standards, 802.11 standardizes wireless LAN
transmission using radio waves. When used in conjunction with Ethernet,
it encapsulates the Ethernet frame in its own special Network Access
layer frame type. It also uses a unique contention method because of the
characteristics of radio transmission.

Defining Network Access Layer Protocols on the
WAN
Wide area networks (WANs) usually connect locations or LANs. When we
use the term wide area network, we usually are not speaking of the Internet,
although certainly offices can be connected through Internet connections.
Connections using WAN protocols such as Frame Relay and PPP use
networks that are physically separate from the network that we use for the
Internet.

These network connections are private in the sense that corporations and
individuals pay a fee to a telecommunications company to use the network.
The telecommunications company builds, operates, and maintains the
network, turning a profit by charging for access to the network, somewhat like
a private toll road. These are called leased lines.
When the data from the LAN needs to traverse these leased lines, the
Network Access layer Ethernet header on the frame must be removed, and
a type of Network Access layer header specific to the WAN protocol in use
must be placed on the packet. When the frame arrives in the other location,
the Network Access layer WAN header is removed, and a Network Access
layer Ethernet header is placed on the packet so it can then be transported
on the local LAN to its final destination. The WAN protocol acts somewhat
like a ferry boat that carries cars across a river, only in this case it is carrying
Ethernet packets across the WAN link
Just as Ethernet uses MAC addresses at the Network Access layer, WAN
protocols have addresses as well. For example, Frame Relay connections are
identified by a Network Access layer identifier called a Data-Link Connection
Identifier (DLCI). This number is used to specify the location in the Frame
Relay network.
Another example is Point-to-Point Protocol (PPP). This is used on both
analog and digital phone lines between locations. On a digital line called an
Integrated Services Digital Network (ISDN), the identifier is called a Service
Profile Identifier (SPID). This number, issued to the location used to identify
it, usually incorporates the phone number of the line.
WAN technologies are beyond the scope of this book but are worth briefly
discussing as a point of comparison to the LAN concepts covered earlier and
to place LAN networking into context with WAN networking.

The Essentials and Beyond

Protocols are the communication languages of networking. Some
perform specific functions, while others are networking protocols.
Networking protocols can be categorized as either routed or routing.
A routed protocol is one that is designed in such a way that it
can be routed between remote networks, while a routing protocol is
responsible for performing the routing function.
Protocols operate at all four layers of the TCPIIP model. The
layer at which a protocol operates is determined by the information
it uses to do its job. At the Network Access layer, protocols can be
classified as either LAN protocols or WAN protocols. These two
types of protocols will create and attach different types of Network
Access layer headers on the packets they transport. WAN protocols
carry LAN packets across the WAN connection to be delivered to
remote LANs.

Additional Exercises
1. Using the following list, write the layer of the TCP/IP model at which
each protocol operates.

ICMP
ppp
DNS
TFTP
ARP
Ethernet
IP
SMTP
UDP
FTP
TCP

IGMP
Frame Relay
2. In this exercise, you will work with a partner using two computers
that are connected to the same network and can already communicate.
A. Click Start => All Programs => Accessories => Command Prompt.
When the command prompt box opens you will first determine the IP
address of the computer you are using. Type the following command:

lpconfig
The computer will display an IP address, subnet tnask and default
gate\vay. Write down your IP address.
B. At the command prompt type the following command and insert
your partner's IP address:

pingip

address

(for example ping 192.168.5.5)

Press Enter.
C. Make note of what you see and describe what the message is telling
you.

Review Questions
1. What determines the layer at which a protocol operates?
A. The specific information it uses in its processes
B. The amount of information it requires in its processes
C. The type of upper-layer data it processes
D. The underlying network technology
2. Which if the following is not a routed protocol?
A. IPX/SPX
B . NetBEUI

C.TCPIIP

D . AppleT alk
3. Which of the following is an Application layer protocol?

A . TCP
B. ICMP
C. DNS
D. IP
4. Which of the following is a connection-oriented protocol used
to transport files across the network?

A . SMTP
B . FTP
C. IP

D. TFTP
5. What port number does TFTP use to begin the connection?
A . TCP 23
B . UDP 21
C. UDP 69
D . TCP 80
6. Which protocol is used to transfer a router operating system
(called the Cisco lOS) from a server to a router?
A . FTP
B . SNMP
C. TFTP
D . SMTP

7. Which of the follovving is not a component of SNMP?
A. Agent

B . Network management system
C. Managed device

D. Queries
8. Which protocol is responsible for sequencing the packets?

A . IP
B . TCP
C. UDP

D . ARP
9. Which of the following is not a part of the TCP h andshake?

A. SYN

B. FIN
C. ACK

D . SYN-ACK
10. In which header type is the protocol number found?
A . TCP

B. UDP
C . IP

D . ICMP

Chapter 5
Physical and Logical Topologies
A network topology describes the physical connections and logical
communication pathways between objects in a network. The term is used to
describe a variety of networking concepts. Topologies are used to describe
connections between computers (or hosts) in a network, between routers in a
network, or even between wide area network connections.
Topologies come in two varieties, physical and logical. A physical
topology describes the way in which the devices are connected together. For
example, they could be connected end-to-end in a straight line or connected
in a circle (or ring). The logical topology describes how the devices
communicate or the shape of the communication path. In many cases, the
physical and logical topology are the same but not always, as you will see
in this chapter.
Specifically, this chapter covers the following topics:
• Designing the physical topology
• Designing the logical topology

Designing the Physical Topology
The physical topology defines the physical connections between the devices
and the shape that these connections form . In most cases, it is easy to see this

shape. In other cases, such as the way in which a star is usually implemented
in an enterprise, it is not quite as obvious.
This section covers all of the common physical topologies, giving special
attention to their respective advantages and disadvantages. Many of the
topologies, such as bus, ring, star, mesh, and hybrid, are most commonly
applied to LAN design. Point-to-point and point-to-multipoint topologies are
more commonly applied in WAN design. They describe the manner in which
routers that host WAN connections are designed.

Implementing a Bus Topology
The bus topology was one of the earliest physical topologies to be
implemented. In this topology , the devices are connected one to another in a
straight line, as shown in Figure 5-1 .

Figure 5-1: Bus topology

5JSJ2SJ
+-- ......;...... - -

Bad<bone Cable

A node is simply a device on the network, such as a
computer, printer, or server.

In this topology , each end of the bus (a term used to describe the cable
from end to end), or backbone cable, must have a special connector called
a terminator installed. The terminator prevents signals that reach the end of
the cable from being reflected or propagated back in the opposite direction. It
accomplishes this by absorbing the electrical energy of the signal.
When a computer transmits on a bus network, the transmission is sent
in both directions from where the computer is positioned on the bus. The
M t

al co

dt

""'

d

ora

transmission locates the destination computers by IP or MAC address. Each
device on the bus examines the signal, but all except the computer to which
the packet is addressed will ignore it.

Cabling in a Bus Topology
In a bus topology, coaxial cable is used and comes in two types that
exhibit different characteristics:
Thicknet is thicker, less flexible, and more expensive but can be up to
500 meters long without attenuation. (For more on attenuation, see the
special topic "Attenuation and Cable Length" later in this section.)
Thinnet is smaller gauge, more flexible, and less expensive but can be
up to only 185 meters long without attenuation.

Advantages of the Bus Topology
• Easy to implement
• Requires less cable than some of the other topologies
• Inexpensive
• Easy to design
Disadvantages of the Bus Topology
• If the cable is broken at any point, the entire network is down.
• Terminators are required at both ends.
• If the network shuts down, locating the break is difficult.
• There are limits on cable length and number of nodes.
• Performance degradation occurs under traffic load.
• Introducing or connecting new devices takes the network down.

Attenuation and Cable Length
Every type of cable (the common cable types are di scussed in
Chapter 9, "Cabling") has a tnaxitnutn cable length before the cable
suffers from attenuation, or weakening of the signal . When an
electrical signal travel s down a cable, it tneets resistance in the cable
that can be measured in ohms. This resistance weakens, or attenuates,
the signal . If the signal becotnes too weak, reading it correctly when
it arrives at the destination will be impossible. The result is usually
corrupted or garbled data. For this reason, cable length characteristics
must be taken into consideration.

Implementing a Ring Topology
A ring topology is just what you would expect from the sound of the name.
The devices are connected one to another as they are in a bus topology , except
that the cable loops around and forms a closed circle, as shown in Figure 5-2.
As you will see later in this chapter, an FDDI ring is an
exception to the rule about transmi ssions on a ring travelling
in one direction.

When a computer transmits on a ring network, the transmission is usually
sent in only one direction from where the computer is positioned on the bus.
The transmission locates the destination computer by IP or MAC address.
Each device on the ring examines the signal, but all except the computer to
which the packet is addressed will ignore it.

Figure 5-2: Ring topology

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Advantages of the Ring Topology
• Performs better than a bus under load
• Prevents collisions
• Can be larger than a bus because each device serves as a repeater for
the signal
As you will see in Chapter 10, "Network Devices," a repeater
simply regenerates the signal, reversing the attenuation that
may have occurred up to that point. A repeater can enable
the use of a longer cable.

Disadvantages of the Ring Topology
• If the cable is broken at any point, the entire network is down.
• If the network shuts down, locating the break is difficult.
• Introducing or connecting new devices takes the network down.

Implementing a Star Topology
Although you may not recognize it because of its implementation, the star
topology is the most common topology used in networks today. All of the
devices are connected to a central device and communicate through the

'

M ll'o<lBOf'

central device. This device may be either a hub or a switch. This arrangement
is shown in Figure 5-3 .
Hubs are covered in Chapter 10. Switches are introduced
in that chapter as well as Chapter 11 ~ "LAN Operations."
Configuring switches is covered in Chapter 14~ "Configuring
Switches."

Figure 5-3: Star topology

Switch

In the star topology ~ when a device transmits, the transmission goes to the
hub or switch. What occurs next depends on whether a hub or switch is being
used. If a hub is present~ the transmission will be sent to all devices ~ and all
but the destination device will ignore it. If a switch is present~ the switch will
send the transmission only to the connection where the destination device is
located.
Advantages of the Star Topology
• It has better performance than bus or ring, especially if a switch is used.
• If a cable goes bad, only the device connected to it is affected.
• It can support a larger number of computers than the bus.
• It's easy to troubleshoot.
Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

• No network disruption occurs when adding or removing devices.
Disadvantages of the Star Topology

• Single point of failure at the hub or S\iVitch
• Performance dependent on central device
• Size limited by physical connections on the hub or switch
The reason that most people don't recognize this topology in use is that
usually the central device is not sitting in the middle of the other devices, as
pictured in Figure 5-3. The central device is usually out of sight in another
room, and the cables go through the wall to connect to it, as shown in Figure
5-4. The computers connect to wall outlets ~ the cables run through the walls
and then connect to the switch in the switch closet.
Fi&ure 5-4: Star implementation
Wall outlet

Wall outlet

Switch Closet

Wall outlet

Wall outlet

Implementing a Mesh Topology
In a mesh topology, each computer has an individual connection to every
other computer, as shown in Figure 5-5 . This topology is difficult and
expensive to implement but offers the most fault tolerance of any of the
designs discussed thus far.
Fi&ure 5-5: Mesh topology

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

The mesh topology requires that each computer have the hardware to
support multiple network connections. In the example in Figure 5-5, that
would mean four network cards for each computer. This topology requires
cable to run between each computer as well. The advantage this provides is
that if any connection fails, only the two computers using that connection are
affected and they can still use one of the other pathvvays to communicate.
Advantages of the Mesh Topology
• Best fault tolerance
• Easy to troubleshoot
• No network disruption when adding or removing devices
Disadvantages of the Mesh Topology
• Expensive to implement
• High maintenance cost
• Limitation on number of devices in each mesh

Implementing a Hybrid Topology
A hybrid topology is one in which two or more of the aforementioned
topologies are used in combination. One of these combinations is shown in
Figure 5-6. In this example, a bus network backbone is connected to a ring
Copy llJ t

a ri

network and a star network. Usually the different topologies are connected to
a central computer that hosts a connection to each other topology .

Figure 5-6: Hybrid topology

Advantages of the Hybrid Topology
• Very flexible
• Reliable
Disadvantages of the Hybrid Topology
• Expensive to implement
• Can be difficult to add nodes

Implementing a Point-to-Point Topology
A point-to-point topology is one in which two devices are connected to one
another directly, with no other devices on the connection. This does not
mean that a device can host only a single point-to-point connection. It simply
means that each point-to-point connection the device hosts is dedicated to the
communication between itself and the one other device. An example is shown
in Figure 5-7.

Figure 5-7: Point-to-point using multiple interfaces

M t

al co

dt

ttY: d

ora

Rl

R4

R2
R3

In Figure 5-7, the router R1 is hosting three individual point-to-point
connections. Each one of the links carries traffic only between the two devices
on either end of the connection. On these point-to-point links, there will never
be any traffic other than what is sent between the two routers on either end.
Router R 1 in Figure 5-7 is using three physical interfaces (SO, S 1, and S2) for
this point-to-point topology.

Router Interface Numbering
Router interfaces are simply network connections such as network
adaptor cards on a computer. Routers have multiple interfaces, and
these interfaces can be of several types. Some examples are Ethernet,
serial, and fiber. When a router has multiple interfaces of a certain
type for example, three Ethernet interfaces they will be numbered
starting at 0. The three interfaces of router Rl in Figure 5-7 are serial,
so the numbering would be SO, S 1, and S2.

Instead of the three physical interfaces that the router is using in Figure
5-7, it could be using a single interface. To understand how this can work,
you need to understand a few concepts of WAN technology. First, this type of
WAN topology is implemented when using a telecommunications network,
as discussed in Chapter 4, "Protocols." Therefore, physically speaking, after

M t

al co

dt

ttY: d

ora

the frames (this is the Network Access layer, so remember, they are called
frames) enter the telecommunications network, they can be routed to each
multiple destination by its identifier (either SPID for ISDN or DLCI for
Frame Relay).
In Figure 5-8, Router R1 is using only a single physical interface Serial
1 (S 1), but it has been logically subdivided into S 1.1 , S 1.2, and S 1. 3. Then
different DLCis were assigned for routing in the telecommunications
network. The routers R2, R3 , and R4 also have been assigned DLCis. The
DLCis are the Network Access layer addresses.

Figure 5-8: Point-to-point using one interface
Rl
_..,.
"'- 51.3
51.1
OLCi lO

OLCI 30

51.2
OLCI20

_..,.

,_
--

OLCI 40

SubnelA

"'R2

DLCI60

DLCISO
~
_ _.,.

"' -

Subnel C

R4

5ubnel B

R3

Even though at first glance this may appear to be like the point-tomultipoint topology that is covered in the next section, it is actually different
because each link is its own subnet.
Subnets and subnetting are covered in Chapter 8, "Classless
IP Addressing."

Implementing a Point-to-Multipoint Topology
A point-to-multipoint topology is one in which a single physical connection
on one router is connected to more than one device on the other end, as shown
in Figure 5-9. This requires that the physical interface be divided logically
into multiple subinterfaces on the router, just as is done in a point-to-point
M l

al co

dt

""'

d

ora

topology that connects to multiple endpoints. This may appear on the surface
to be the same as the topology illustrated in Figure 5-8, but there is a big
difference. In Figure 5-9, the same setup is used as in Figure 5-8, but all three
connections are in the same subnet. That means that all three connections are
part of the same network or subnet.
Figure 5-9: Point-to-multipoint
Rl
51.1

51.3
DLCI 30

DLCilO

51.2
DLCI 20

OLCI40

.,.

OLCI 60

...

~,

R4

R2
R3
All connections in the same subnet

WAN Technology
A detailed discussion of WAN technology is beyond the scope of
this book. To learn more on this topic, see the Cisco Internetworking
Technology
Handbook
at
http ://docwiki.cisco.cotn/wiki/

Intemetworking Technology Handbook.

Designing the Logical Topology
The logical topology defines the communication process between the devices
and the shape that these communication flows form. This section covers some
noteworthy logical topologies. With the exception of the star topology , you
M t

al co

dt

ltY: d

ora

will rarely, if ever, encounter these in the real world. As a point of comparison
to the star and from a historical perspective, they are still worth exploring.
Included in this section is a special topology that is physically one topology
and logically another!

More Topologies
The most common logical topologies are covered in this section. For
more information on both logical and physical topologies, see

http://en.wikipedia.org/wiki/Network topology .

Understanding the Token Ring Topology
Token Ring was a networking technology created by IBM in 1985. It operates
at the Network Access layer of the TCP/IP model. It is physically a star
topology, with the devices all connected to a central device called a Media
Access Unit (MAU). It also used special IBM connectors and cables.
Logically , however, the network was a ring topology. When signals
entered the MAU, they followed a pathway that led out to each device and
then in again to the MAU and back out to the next device. Also the contention
mechanism used was quite different from that of Ethernet. It was called token
passing. A special packet called a token was passed around the ring, and a
device could transmit only if the token came around and was not being used.
This prevented collisions.
Token Ring was never widely accepted for several reasons. Although it
operated at 16 MB at a time when 10 MB was considered good, it was
soon surpassed by Ethernet in speed. Moreover, it required using all IBM
connectors, cables, and MAUs. For this reason, Token Ring networks are no
longer in use.

In Figure 5-10, the physical and logical topology of Token Ring is
illustrated. As you can see, although the devices are connected to a central
device, the communication pathway forms a ring.

Figure 5-10: Token Ring

Understanding the FDDI Ring Topology
A Fiber Distributed Data Interface (FDDI) ring operated as both a physical
and logical ring. It used token passing but not the token passing used in Token
Ring (802.5). It used a different type (802.4) in which use of the token is timebased. The FDDI topology could use either copper or fiber-optic cabling.
Cabling is covered in detail in Chapter 9.

It also used a double ring for fault tolerance. The rings operated in opposite
directions, as shown in Figure 5-11 . This network was often used as a
backbone in an enterprise to which other networks connected.

FDDI is also considered a legacy technology as it has been replaced
with more-economical and saleable alternatives. It also suffers from distance
limitations and is expensive to implement. In most applications where FDDI
was once used, either Gigabit Ethernet or Fiber Channel is now in use.

Figure 5-11: FDDI ring

Copy llJ t

a ri

Primary Ring
Secondary
Ring

~
0

Understanding the Star Topology
The star topology is the same physically and logically, but it is so prevalent in
today's LANs that it is worth spending some additional time discussing how
it works. As you learned in the section "Implementing a Star Topology," all
devices are connected to a central device that is implemented as either a hub
or a switch. You also learned that the operations of the central device are quite
different depending on whether a hub or a switch is present.
If a hub is in use, every transmission that comes into the device is sent
out every port except the port on which it arrived. You will learn more about
hardware in Chapter 10, but for now the important thing to keep in mind is
that hubs have no "intelligence." They are simply junction boxes. So these
devices simply forward the frames everywhere.
As you will learn in Chapter 10, switches do have intelligence. After they
have learned the MAC addresses of the devices connected to each port, they
will forward frames only to the destination devices and not to all ports.
This is significant because of the contention method used in Ethernet
networks. A contention method defines the way in which access to the wire
is arbitrated. A good analogy is the various ways in which access to a road
can be managed. A traffic light is one approach to maintaining order at the

intersection of two roads. Another approach is four-way stop signs. Even a
roundabout could be used. They all do the same thing in different ways.
Earlier in this section, you learned about a contention method called token
passing. In this method, a packet called a token passes around the network,
and a device can send only if the token arrives empty. This eliminates
collisions. Collisions occur when two devices send an electrical signal at the
same time and the signals collide on the wire. This destroys both signals,
requiring both devices to retransmit. When this occurs frequently , the data
transfer rate of the network plummets.
In an Ethernet star topology, collisions are not eliminated~ they are
managed. One factor that greatly affects the frequency of collisions is the
device in the middle of the star. If it is a hub, there will be many more
collisions than if it is a switch. Because a switch sends frames only to
the port where the destination device is connected, this greatly reduces the
mathematical possibility that collisions will occur.
The contention method used in Ethernet is called Carrier Sense Multiple
Access/Collision Detection (CSMAICD). It has mechanisms that help
minimize but not eliminate collisions. Its operation is as follows:
1. When a device needs to transmit, it checks the wire. If a transmission

is already underway, the device can tell. This is called carrier sense.
2. If the wire is clear, the device will transmit. Even as it is transmitting,
it is performing carrier sense.

3. If another host is sending simultaneously, there will be a collision.
The collision is detected by both devices through carrier sense.
4. Both devices will issue a jam signal to all the other devices, which
indicates to them to not transmit.
5. Then both devices will increment a retransmission counter. This is a
cumulative total of the number of times this frame has been transmitted
and a collision has occurred. There is a maximum number at which the
device aborts the transmission of the frame.

6. Both devices will calculate a random amount of time and will wait
that amount of time before transmitting again. This calculation is called
a random back-off
7. In most cases, because both devices choose random amounts of time
to wait, another collision will not occur.

Star Topologies
Ethernet is certainly the most famous star topology, but it is not the
only one. Any networking technology that uses a hub and spoke design
with a central connection point or hub is a star. That means that an
802.11 wireless network that uses an access point is also a star. In
WAN topologies, the topology that is usually called a hub and spoke is
also a star.

The Essentials and Beyond
A network topology describes the physical connections and logical
communication pathways between objects in a network. Topologies
come in two varieties, physical and logical. A physical topology
describes the way in which the devices are connected together. The
logical topology describes how they communicate or the shape of the
communication path.
A local area network can be laid in a bus, ring, star, mesh, or hybrid
topology . In many cases the physical and logical topology are the same,
but in some cases they are not. A token ring topology is a physical star
but is logically a ring topology. This topology is also unique in that it
uses a token-passing contention method .
Wide area networks are typically implemented in either a point-topoint topology or point-to-multipoint topology. When these networks

are implemented, they are usually connecting routers in remote
locations that are usi ng a leased telecommunications network.
The most common topology found in LANs is the star topology using
Ethernet as the Network Access layer protocol. This protocol uses a
contention mechanism called Carrier Sense Multiple Access/Collision
Detection (CSMA/CD).

Additional Exercises
You work for a network design firm that offers consulting services
to small and mid-size businesses. For each of the following clients,
choose the topology that comes closest to meeting the requirements set
forth by each client.
1. Ajax Cleaning Service requirements:
• Use of as little cable as possible
• Inexpensive
• Easy to implement
2. Acme Employment Agency requirements:
• Support for large number of computers
• Easy to troubleshoot
• No network disruption when adding or removing devices
3. Smith and Smith Law Firm requirements:
• Maximum fault tolerance
• Money is no object
• Easy to troubleshoot

Review Questions
1. Which of the following is not a LAN topology?
A. Star
B. Bus

C. Point-to-multipoint
D . Mesh
2. True or False: The physical and logical topology is always the
same.
3. Each end of the topology must have a special connector called
a terminator installed.

A . Star

B . Bus
C. Hybrid

D . Mesh
4. Which of the following is not a disadvantage of the ring
topology?
A . If the cable is broken at any point, the entire network is
dO\iVn.

B . If the network shuts down, locating the break is difficult.
C. Introducing or connecting new devices takes the network
down.
D . Terminators are required at either end.
5. Which topology uses either switches or hubs?
A. Star
B . Bus
C. Hybrid
D . Mesh

6. Which topology provides the best fault tolerance?
A . Star
B . Bus
C. Hybrid
D . Mesh
7 . What type of type of topology requires the use of subinterfaces
on the router?
A . Point-to-point
B . Bus
C. Point-to-multipoint
D . Mesh
8. What is the central device in a Token Ring network called?
A . Switch
B . Hub
C. MAU
D . Router
9. Which topology has built-in fault tolerance?
A . Token Ring
B . Bus
C. FDDI ring
D . Mesh
10. Which topology uses the CSMA/CD contention method?

A . Star

B. Bus
C. Hybrid

D. Mesh

Chapter 6
Numbering Systems
You don't have to be a mathematics major to have success networking with
Cisco routers and switches, but you do need to understand two numbering
systems that are very important when working with computers and
networking. These numbering systems are no more complicated than the
decimal numbering system. However, unlike the decimal system that we all
learned in the second or third grade and is second nature to us, most people
are unfamiliar \iVith these alternate systems.
In this chapter, you will learn how these numbering systems (which are
sometimes also referred to as notation) work and, perhaps more important,
why they matter when working with computers. Specifically, this chapter
covers the following topics:
• Exploring binary numbering
• Exploring hexadecimal numbering
• Applying conversions

Exploring Binary Numbering
The binary numbering system is capable of every function that the decimal
system is. There are some who say that the only reason we use the decimal
system, which is based on the number 10, is because we have 10 fingers and

toes. Regardless, it is true that the only difference between the binary and
decimal system is the number on which each is based.
The decimal system is based on the number 10, and the binary system
is based on the number 2. This means that there are 10 and 2 values,
respectively, in each system. Those values for the decimal system are 0- 9
(with the digit 0 counting as one of the numbers), and for the binary system
the values are 0-1 . This section explains the binary numbering system. You
will see the many properties it shares with the decimal system and how it
differs from decimal system.

Understanding the Base-2 Numbering System
The binary numbering system is called a base-2 numbering system because it
has two possible values: 0 and 1. This means that because there are only two
characters, or values, available in this system, the largest possible single value
is 1, not 9 as in the decimal system. To illustrate the effect this has, let's first
review what we learned at a young age about the decimal system so you can
see that binary works the same way but with a different base number.
In the decimal system, we have learned to accept that 9 + 1 = 10. But 10 is
not really one of the possible values of the decimal numbering system. Those
values are 0, 1, 2, 3, 4, 5, 6, 7, 8, and 9. When you count incrementally, you
progress from 0 to 9 as a single digit in one space. To indicate the value that
comes after 9, you add an extra digit to the left of the existing space. The new
value in the left space begins as 1, the value in the right space returns to 0, and
you begin incrementing values upward in the right space again. Imagine the
way a car odometer works. When the numbers in the tenths-of-a-mile column
go to 8 and then 9, \Vhat happens next? The 9 goes back to 0, and the mile
column to the left goes up by one. That is because each value in the mile
column is worth 10 times what the tenth-of-a-mile column is worth.
For an example of the relationship of each position in a number using the
decimal numbering system, consider the number 37,452. The 2 is in the 10°

1

2

position, the 5 is in the 10 position, the 4 is in the 10 position, the 7 is in the
3

4

10 position, and the 3 is in the 10 position. So the base-l 0 values increment
from right to left in the following order:
4

2

3

1

10 10 10 10 10°
Just to review some math basics, any number to the zero power is 1, and
any number to the power of 1 is itself. So in the base-l 0 numbering system,
any digits in the far-right position are worth themselves (6 is worth 6, for
1

example). Similarly, any digits in the next position to the left are worth 10 ,
or themselves times 10 (6 is worth 60). As you move from right to left, the
values of digits in those positions continue to go up by powers of 10 as shown
here:
10° = 1
1

10 = 10
2

X

1 = 10

=

10

X

10

=

100

=

10

X

10

X

10 = 1 000

10 = 10

X

10

X

10

X

10 = 10 000

10

X

10

X

10

X

10

X

10 = 100 000

10 = 10

X

10

X

10

X

10

X

10

X

10 = 1 000 000

10

X

10

X

10

X

10

X

10

X

10

X

10 = 10

X

10

X

10

X

10

X

10

X

10

X

10

10

3

4

10

5

=

6

10

7

8

=

'

'

'

'

'

10

=

10

X

10 000 000
'

'

10 = 100 000 000
'
'
Now, the base-l 0 numbering system is probably not new to you, but it's
worth reviewing before we dive into binary because you will be surprised
how similarly they work. In binary, because 1 is the largest value (like 9 in
decimal), 1 + 1 = 10. Yes, that is right; because 1 is the largest value in the
system, after we count from 0 to 1, for the next number we must increment
the next position to the left. This next position to the left is worth twice as
much (not 10 times remember, this is the base-2 system).

For an example of the relationship of each position in a number using the
binary numbering system, consider the number 11 ,001. The 1 on the right end
1
is in the 2° position, the 0 to its left is in the 2 position, the next 0 further left
2
3
is in the 2 position, the next 1 is in the 2 position, and the leftmost 1 is in the
4
2 position. So the base-2 values increment from right to left in the following
order:
24 23 22 21 20
Just as in decimal, any number to the zero power is 1, and any number to
the power of 1 is itself. So in the base-2 numbering system, any digits in the
far-right position are worth themselves (1 is worth 1). Similarly, any digits in
1
the next position to the left are worth 2 , or themselves times 2 (1 is worth 2).
As you move from right to left, the values of digits in those positions continue
to go up by powers of 2, as shown here:
2° = 1
1

2 =2 x l=2
2

2 =2 x2=4
3

2 =2 x 2 x 2=8
4
2 = 2 X 2 X 2 X 2 = 16
5

2 =2
6

2 =2
7

2 =2
8

2 =2

X

2

X

2

X

2

X

2 = 32

X

2

X

2

X

2

X

2

X

2 = 64

X

2

X

2

X

2

X

2

X

2

X

2 = 128

X

2

X

2

X

2

X

2

X

2

X

2

X

2 = 256

If this is confusing, here is another quick comparison of the two systems.
When you count in the decimal numbering system, you start with 1 and count
upward like this: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 , 12, 13, 14, 15, 16, and so on.
When you count in the binary numbering system, you also start with 1, but
when y ou count upward, the numbers look like this: 1~ 10 ~ 11 ~ 100 ~ 101 ~ 11 0 ~
Ill ~ 1,000; 1,001 ; 1 ,010 ~ 1,011 ; 1,100; 1,101 ; 1,110; 1,111 ; 10,000; and so

on. If you compare the numbers, you can see that the value of 2 in the decimal
system equals 10 in the binary system, and the value of 3 equals 11, the value
of 4 equals 100, and so on, with the number 16 in the decimal system equaling
10,000 in the binary system. The two systems of counting work essentially
the same way, just using different numbers.
So as you can see, the mechanics of how binary works is the same as with
decimal, but the base is different. You need to be comfortable with converting
binary numbers to decimal and vice versa. Later in this chapter, you'll learn
how to make those two conversions.

Understanding the Relationship between Binary
and Computers
At this point, you may be asking yourself why the binary numbering system
is important and what it has to do with computers and net\ivorking. The fact
is, it has everything to do with both! Almost everything that computers and
network equipment do is done in binary . The very nature of digital electronics
is binary .
The chips that reside on computers and other networking gear are packed
with very tiny transistors and capacitors, which are the workhorses of
computing. These transistors are switches. At least at this point in time, the
switches that are used can hold only two states reliably. This means that
information can be represented by using two possible states: off and on, or 0
and 1. This makes binary perfect for the job. It also works well because it can
be used to represent information electrically in a cable by using the presence
and absence of an electrical signal.

How Does RAM Store Data?

Dynamic random-access memory (DRAM) stores each bit of data in
a separate capacitor in an integrated circuit. The transistor is used to
place a charge in the capacitor. The transistor is a switch that when on
flows power to the capacitor, which is then charged. These two states,
charged and uncharged, are the basis for data storage.

Now you may be wondering how information that includes letters,
punctuation, and other special characters can be represented in binary . This
is done by using specific 8-bit patterns for each character. A bit is a single
value, or position, in a binary number. Eight of these bits make a byte. Special
patterns of bytes are used to represent characters. Fallowing are a couple
of 8-bit binary numbers. If an agreement could be made for this particular
pattern to be the letter A and another to be B and so on, we could use these
patterns to store data.
A= 01000001
B = 01000010
That's exactly what has been done. There have been several sets of these
pattern systems created. Because of the restrictions of using only 8 bits, which
yield only 256 possibilities, the Unicode system was developed and has been
widely adopted. It uses 2 bytes, or 16 bits, which means there are 65,536
possible patterns that can be assigned to letters, punctuation, and other special
characters in multiple languages. It now has been expanded to 32 bits, and
although certain parts of its number space (called planes) are unassigned or
reserved, at this writing it consists of 109,000 characters.
Joe Becker from Xerox and Lee Collins and Mark Davis
fr01n Apple started working on the predecessor of Unicode
in 1987. In 1993, the ISO standardized it.

Most of your time spent working with binary will be working with IP
addressing. When we express IP addresses human to human or we enter
IP address information on devices, we typically use what is called dotted
decimal notation. An example of an IP address in dotted decimal notation is
192.168.6. 1.
IP addressing is covered in Chapter 7, "Classful IP
Addressing," and Chapter 8, "Classless IP Addressing."

The computers and routers don't think in decimal terms. They
communicate and represent these numbers in binary (as they do everything).
We discuss binary -to-decimal conversion later in this chapter and the
conversion of IP addresses to binary in the next chapter, but this particular IP
address would be stored by a computer or router as the following:
11 000000. 10 101000.0000011 0.0000000 1

In this example, each of the 8-bit patterns separated by a dot represents the
decimal numbers in the dotted decimal format. Thankfully, we don't enter IP
addresses in this format and we don't use this format to communicate about
IP addresses with other people, but you do need to understand how to convert
back and forth to understand the process of subnetting. We'll return to the
conversion process at the end of the chapter and discuss IP addressing in
Chapter 7 and subnetting in Chapter 8.

Exploring Hexadecimal Numbering
Another numbering system that is used extensively in computers and
networking is the hexadecimal system (or hex, for short). It is used to identify
network cards (MAC addresses), and it is also used when very large numbers
need to be represented by using fewer positions or columns than if we used
decimal.

A good example of this is memory addresses.A memory address is a
specific location in memory. It is used when something that has been placed
into memory needs to be located, sort of like a street address. Individual
memory addresses are very small, so there are a lot of them. Using hex instead
of decimal allows these large numbers to be expressed with less space. In
the next section, you will learn how the hex numbering system is capable of
expressing such large numbers by using so few places.
Another area where hex is used is in the new version of Internet Protocol
(IP), IPv6. As you will learn in Chapters 7 and 8, the current version, IPv4,
yields a finite number of IP addresses (as does IPv6 ~ it's just such a larger
finite number that it's hard to grasp). The explosion of the Internet and the use
of IP addresses for all sorts of devices never imagined before have caused the
number yielded from IPv4 to become depleted.
IPv6 was developed to address that problem. It uses a different numbering
system than IPv4 and incorporates hex into the scheme. IPv6 is beyond the
scope of this book, but one of the reasons hex was used was for its ability to
represent such large numbers easily.
An 1Pv4 address is 32 bits and can accommodate
4,294,967,296 IP addresses. An 1Pv6 address uses
hexadecimal, is 128 bits long, and has a possible 340
undecillion IP addresses.

Understanding the Base-16 Numbering System
The hexadecimal system uses a base of 16. As you have already learned, the
base number indicates how many possible values there are in the system. In
this system, there are 16 and that causes a problem, because the decimal
system, which we use to represent characters in binary and hexadecimal as
well, goes up to only 9. To solve that problem, the numbers 10, 11 , 12, 13, 14,

and 15 use the letters a, b, c, d, e, and f. This means that the 16 values in the
hexadecimal system are 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, a, b, c, d, e, and f.
The following is the hex equivalent of 0-1 6 in decimal :
Decimal Hex

0

0

1

1

2

2

3

3

4

4

5

5

6

6

7

7

8

8

9

9

10

a

11

b

12

c

13

d

14

e

15

f

16

10

One of the advantages of the hexadecimal system is its ability to represent
very large numbers by using significantly fewer positions or columns than
in decimal. To understand why that is so, let's mentally go through the same

process we did with decimal and binary. This will also show you that with the
exception of the base number, hex works the same as those two systems.
In hex, because an f (which is worth 15) is the largest value (like a 9 in
decimal), f + 1 = 10. Yes, that is right. Because f is the largest value in the
system, after \iVe count from 0 to f, for the next number we must increment
the next position to the left. This next position to the left is worth 16 times as
much (not 10 times ~ remember, this is the base-16 system).
For an example of the relationship of each position in a number using the
hexadecimal numbering system, consider the number 3d97 a. The a on the
1

right end is in the 16° position, the 7 to its left is in the 16 position, the 9 is
2

3

4

in the 16 position, the dis in the 16 position, and the 3 is in the 16 position.
So the base 16 values increment from right to left in the following order:
4

3

2

1

16 16 16 16 16°
Just as in decimal, any number to the zero power is 1, and any number to
the power of 1 is itself. So in the base-16 numbering system, any digits in
the far-right position are worth themselves (4 is worth 4, e is worth 14, and
1
16 ,

so on). Similarly, any digits in the next position to the left are worth
or
themselves ti1nes 16 (1 is worth 16, 2 is worth 32, and so on). As you move
from right to left, the values of digits in those positions continue to go up by
powers of 16, as shown in the following list. (Of course, the numbers 16 ~ 256 ~
4, 096 ~ and so on are all given in our familiar base-l 0 system. The main point
here is simply that by using the hex system, you can fit more values into the
same number of columns than you could with the decimal or binary systems.)
16° = 1
1

16 = 16

X

1 = 16

X

16 = 256

= 16

X

16

X

16 = 4 096

16 = 16

X

16

X

16

X

X

16

X

16

X

2

16 = 16
3

16

4

5

16 = 16

'

16 = 65 536
'
16 X 16 = 1 048 576
'

'

16

6

= 16

X

16

X

7

16 = 16x 16
16

8

=

16

X

16

X
X

16
16
16

X
X
X

16
16

16

X
X

16

16

X

16

X
X
X

16 = 16 777 216
'

16
16

X
X

'

16 = 268 435 456
'

16

X

'

16 = 4 294 967 296
'

'

'

So as you can see, the mechanics of how hex works is the same as with
decimal, but the base is different. As an example of the type of large numbers
that can be represented with few positions, or columns, the hex number
ffffffff (using only eight places) is equal to 4,294,967,296 in decimal. (This
is because each f is the 16th number. By placing fin all eight places, you are
essentially demonstrating 16

8

.)

You need to be comfortable with converting hexadecimal numbers to
decimal and to binary. Later in this chapter, you'll learn how to make those
.
conversions.

Identifying MAC Addresses
You already learned that Media Access Control (MAC) addresses, also called
physical addresses, which reside on the Network Access layer of the TCP/
IP model, are applied to network interface adaptors of various types. These
permanent addresses, sometimes called burned-in addresses (BIAs), are
assigned to the adaptors by the manufacturer.
MAC addresses use the hexadecimal numbering system and follow
standard formats that identify both the manufacturer and the individual
device. There are two formats set forth by the IEEE, the most common of
which is the MAC-48 format. A newer format, the EUI -64 format, is used
with 1Pv6.
Some examples of items that have MAC addresses using the MAC-48
identifier are as follows:
• Wired Ethernet adaptors
• Wireless network adaptors
• Router interfaces

• Bluetooth devices
• Token Ring network adaptors
• FDDI network adaptors
The standard format for these addresses is six groups of two hex digits
separated by a hyphen or a colon. It also is sometimes displayed in the three
groups of four hex digits separated by a period. It's important to note that
although we view and discuss these MAC addresses in their hexadecimal
format, they are transmitted over the medium (cabling or wireless) in binary .
Figure 6-1 shows an example of a MAC address as displayed by executing
the i pco nfig/ a ll command on a computer at the command prompt. This
command will display information about the network interfaces of the
computer, including the MAC address.

Fi2ure 6-1: MAC address output
:~ • •~• 'tRC•ill~n)lpconfls~•ll

thoPne t &cl.,ptel" Local ANA. ConAe ct ion:
Conneetion-s ~clti.e

DNS £uff{w • : alpha.kaplaninc.eDft
DoscP1ption • • • • • • • . • • • : 8.-.oadcon MctXu:•no S?n Cf.sA.blt

Cor~trolle

Pl•y• i u l Addroeu •• • • • . • • • t{O&--tA-18- E1- 9S- AD )

DIICP lu:bletl. . . . . . • . . . . ! YU
En• .hled . . • • : Yes
Llnk- loca 1Pv6 A•dre## . . . . . : fc8B::ad•3:8b?l : a6, e:'bc~lt<P?ctel"red)

A~ato e•nti.fr.toti.o"

IP\04 RddMtu . . • • . • . . . . • : 10.88.2.17?(Pr-wfer"d)

Sllbnu "-uk . . . . . . . . . . . : 2S5.2SS.2S4 .8
~·••

Obtai ned . . . . . • . . . • : FridAy. Rpl"il 08- 2811 ?:95:81 Pft

t..au bpi - • . . . . . . . . . . : Friday. ""'.)' &G .. 28U ? : 88 : 43 AK
Oofadt C&to~y . . . . . . . . . : 18. 88. 2 . 6
DHCP S.rucr • • • • • • • • • • • : 18.88. 18.55

Each part of this address communicates information. The address is
divided into two sections, as shovvn in Figure 6-2. The left half of the address
is called the Organizationally Unique Identifier (0 UJ). The right half is called
the Universally Administered Address (UAA). Together they make a globally
unique MAC address.

Figure 6-2: OUI and UAA
OUI

UM

00 -50-56 C0-00-08

Depending on the manufacturer of the device, this MAC address may be
represented in the following formats:
• 00-50-56-C0-00-08

M t

al co

dt

ttY: d

ora

• 00 :50 :56 :C0:00:08
• 0050.56C0.0008

Applying Conversions
There are several types of numbering conversions that you need to be able to
perform. It's not that you'll be doing this on a day-to-day basis, but you need
to understand the concepts, especially as the decimal-to-binary conversions
apply to IP subnetting.
Specifically, the conversions you are going to learn are as follows:
• Decimal-to-binary conversion
• Hex-to-decimal conversion
• Binary-to-hex conversion

Decimal-to-Binary Conversion
Converting a decimal number to binary, and vice versa, is an important
concept for IP addressing. As you will learn in Chapter 8, subnetting that
departs from classful subnetting is done on the binary level and requires an
understanding of decimal-to-binary conversion. We are going to approach the
conversion from that perspective. We'll start with the one most people seem to
think is the easier of the two, binary to decimal, and then move on to decimal
to binary .
We also are going to work with 8-bit binary numbers because IP addresses
consist of four 8-bit sections, as you vvill see in the next chapter. An 8-bit
binary number means we are using eight places, or bits. Consider the 8-bit
binary number 10 11 0111 .
Earlier you learned that each position from right to left is worth an
increasing power of two, as shown here:

I 21l

26

zs l 241 231 22 1 21

2ol

When you perform the calculations, a single bit in each position is worth
the following values:

I 128 1 64 1

32 1 16

81 41 2

1l

So if we line up the binary number with these bit positions, find their
values, and total them, we will arrive at the decimal equivalent of the binary
number. First line them up.
128

64

1

0

32 1- 161 8
1
1
0

-

4

2

1

1

1

1

In every place where there is a 1, we add the value of that bit position, and
everywhere there is a 0, we add 0. After totaling these values, \iVe have the
decimal equivalent:
128 + 0 + 32 + 16 + 0 + 4 + 2 + 1 = 183
So 10110 Ill is the equivalent of 183 in decimal.
To invert decimal to binary, a slightly different approach is required.
Consider the decimal number 206. To convert this, we need to look at the bit
position values, as shown here:

I 128 1 64 1

32 1 16

81 41 2

1l

Working left to right, consider the value of each position. If that value does
not exceed the value you are converting, place a 1 there and move on to the
next position. If you cannot place a 1 there without exceeding the number you
are converting, place a 0 there and move on to the next position.
So in this example, the first position is worth 128 and does not exceed the
number we are trying to convert (206), so we would place a 1 there and move
on to the next position. (So far we have 1.)
At the next position, if you can add the value of that position to the value
you already have without exceeding the number you are converting, add a 1
and move on to the next position. If you cannot, put a 0 there and move on. In
this example, if we add the value of the second position (64) to the first value

(128), we would not exceed the number \¥e are converting (128 + 64 = 192,
which is less than 206). (Now we have 11.)
We continue this process and move to the next position. In this example, if
we add the value of the third position (32) to the cumulative value we have so
far (192), we would exceed the number we are converting (192 + 32 = 224,
which is more than 206), so we place a 0 in the third position. (Now we have
11 0.)
In position 4, if we add the value of the fourth position (16) to the
cumulative value we have so far (192), we would exceed the number we are
converting (192 + 16 = 208, which is more than 206), so we place a 0 in the
third position. (Now we have 1100.)
At position 5, if we add the value of the fifth position (8) to the cumulative
value we have so far (192), we would not exceed the number we are
converting (192 + 8 = 200, which is less than 206), so we place a 1 in the fifth
position. (Now we have 11001.)
At position 6, if we add the value of the sixth position (4) to the cumulative
value we have so far (200), we would not exceed the number we are
converting (200 + 4 = 204, which is less than 206), so we place a 1 in the sixth
position. (Now we have 110011.)
At position 7, if we add the value of the seventh position (2) to the
cumulative value we have so far (204), we would not exceed the number we
are converting (204 + 2 = 206, which not more than 206) so we place a 1
in the sixth position. (Now we have 1100111). Because we have arrived at
the number we are converting, we can put Os in all remaining positions to
the right (in this case, only one position). We now have the binary equivalent
(11001110).
If you feel unsure about the result, you can always check by adding the
values of each bit position to double-check:
128 + 64 + 0 + 0 + 8 + 4 + 2 + 0 = 206
This is correct!

There's Got to Be an Easier Way!
Yes, there is an easier way to perform all the conversions in thi s
section by using the calculator that comes on your computer! You
still must understand how to perform them manually (there will be
no calculator available to you on any certification exams you may
take). To use the calculator, choose Start=> Accessories=> Calculator.
When the calculator appears on your screen, it will be in the default
view. Click the View menu and select Programmer from the dropdown menu, and you will see the Programmer view shown in the
following image. By setting the radio buttons that are circled to a
specific numbering system, you can enter a number in that system and
then change the radio button to a different system, and the calculator
will make the conversion for you.

.

~ Calculator

~-

-

-- -'

-

I=

&I j

Viow Edit Help
I

0]
0900
63
9900
31

F

oooo oooo oooo
0000

Htx' L

<> Dt<

Od

b..v Bon ./
o Qword

_ Dv1ord
._) WOrd

Byte

0000

0000

IMoel l A

~~ ) ~

B

~ ~ RoR I c
~~

Xor I

D

~·, Rsn ~

E

~ l And i F

0099
47
0009
15

oooo

0009

0000

0000

oooo

32
0000

~~ [Ms _l ~

e

M-

'

9 0GJC ,.
[D[TIGJCJ
GJITJGJGJ
v

1/x

[2]000 .
[

0

J l+

If you want to practice your conversion skills, you can try
the Cisco Binary Game at http://forums.cisco.com/

CertCom/game/binary_game_page.htm .

Hex-to-Decimal Conversion
M t

al co

dt

ttY: d

ora

To convert hexadecimal to decimal, the process is quite similar to the method
used for the binary -to-decimal conversion. When you are a network
technician, converting hex to decimal is not something you will do on a
regular basis, but it is something you should understand. In some advanced
routing protocols, hex is used in network addresses, and in IPv6 the hex
numbering system is used. The only difference is the values of the bit
positions. Consider the hexadecimal number 23ca5.
Earlier you learned that each position from right to left is worth an
increasing power of 16, as shown here:
When you perform the calculations, a single bit in each position is vvorth
the following values:
Now we place the hex number with its bit position as shown here:
65,536

4,096

256

16

1

2

3

c

a

5

We also have to keep in mind what the letters are worth in hex and convert
them. In review:
a= 10
b

11

=

c = 12
d = 13
e

14

=

f= 15
Now we multiply each number by its bit position and then total the values
as shown here:
(2

X

65,536) + (3

X

4,096) + (12

X

256) + (10

X

16) + (5

X

1)

This equals the following:
131 ,072 + 12,288 + 3,072 + 160 + 5 = 146,597
So the hex number 23ca5 is equivalent to 146,597 in decimal.

Converting from decimal to hex takes a slightly different approach.
Consider the decimal number 7 ,544. First we line up our hex values for each
position and use the same method used for decimal to binary :
65,536 4,096 256 16 1
We also work from left to right, but in this case, we have to check each
position for two conditions:
• Does the single position value exceed the number we are
converting? If it does, place a 0 there and skip to the next position.
• If it doesn't, we need to insert a multiple of the hex value for
that position. What is the largest value we can put there without
exceeding the number we are converting?
So using the number 7 ,554, we look at the first position, which is worth
65,536, and we skip it because it exceeds the number we are converting.
(There is no need to place a 0 there unless we have already generated at least
one nonzero number.)
Moving to the next position, the number 4,096 is not larger than 7 ,554, so
we can place a value there, but what value? If we place 1 there, we will be up
to 4,096. If we place 2 there, we will exceed the number we are converting (2
x 4,096 = 8, 192, which is greater than 7 ,554), so we place a 1 there and move
on (we are up to 1).
The next position is worth 256. If we add 256 to 4,096 we do not exceed
7,554 (4,096 + 256 = 4,3 52), so we can place a value here, but what value?
Let's consider how many times 256 would go into the difference between the
number we are converting and the cumulative total that we have so far. 7 554
- 4,096 = 3,458. Then, 3,458 divided by 256 = 13. That means if we place a
13 there (13 is d in hex), we will hit the number we are converting exactly .
We put zeros in all positions to the right, and that is the hex value.
1d00 is the hex equivalent of 7 ,554. To check this, we perform the hex-todecimal conversion you learned earlier:
(1 X 4,096) + (13 X 256) + 0 + 0
4,096 + 3,458 = 7,554

This is correct!

Binary-to-Hex Conversion
This last conversion operation is one that you w ill rarely have to perform but
is still handy to know . It can be used to verify your work when you have
performed a hex-to-binary conversion. It takes a slightly different approach
than the other operation s. Consider the following 8-bit binary number:
11011011
Before we jump into this conversion, let's talk about bit values. You h ave
already learned that 8 bits makes up a byte. If you divide a byte in h alf (4 bits),
it's called a nibble. To convert binary into hex, we are going to divide the 8
bits into 2 nibbles and perform the conversion on each nibble and then put the
two single values that result together to form the hexadecimal equivalent. If
\Ve do this to the preceding number, we will get the following :
11011 011
We have 2 nibbles to convert, and we perform this conversion briefly to
decimal and then to hex. For purposes of determining binary place values, we
will consider them separately. In the first nibble on the left, convert 1101 to
decimal:
8+4+0+1 = 13
Then we convert that to hex:
13

=

d

That's the first value in the hex conversion. Now convert the second nibble :
8+0+2+1=11
11

=

b

Put those two values together and y ou have the hex equivalent of
11 0 11 0 11 :
db

To check this, we convert both values to decimal and compare them. First
convert the binary, considering all 8 bits together for purposes of place value :
11011011 = 128 + 64 + 0 + 16 + 8 + 0 + 2 + 1 = 219
Then convert the hex value to decimal.
db=(13 X 16) + (11 X 1)= 208+11 = 21 9
Compare the two values.
219 = 219
The answer is correct!

The Essentials and Beyond
Understanding the binary and hexadecimal numbering systems is
important for understanding computers and networking . Both systems
are used in the operations of computers and networking gear and in the
communication systems they employ. The binary numbering system,
which has only two values (0 and 1), underlies the operation of digital
electronics. It is also important to understand binary when working
with IP addressing and subnetting . Hexadecimal, a numbering system
using a base of 16, is used in situations where large numbers need to
be represented easily. Hexadecimal is used for memory locations, for
Media Access Control (MAC) addresses, and in the representation of
IPv6 IP addresses. MAC addresses are assigned to network adaptors
and are used in network communications that occur at the Network
Access layer. There are two parts to a MAC address: the
Organizationally Unique Identifier (OUI) and the Universally
Administered Address (UAA). Converting numbers from one system
to another is a necessary skill, especially from binary to decimal and
vice versa. This skill is utilized extensively when working with IP
addressing.

Additional Exercises

1. In this exercise, you will work with a partner. Each of you needs a
computer. Both c01nputers need to be connected to the same local area
netvvork.
A. Open the command prompt by clicking Start=> Programs (or All
Programs) =>Accessories => Command Prompt.
B . Type the command ipconfig/all. Locate the IP address and the
physical or MAC address of yo ur computer and write them down. An
exatnple is shown in Figure 6-3 .
Fi~:ure
; 'uec ra

6-3: MAC and IP address

't• •IIi 111111 >1Pcen rig/., 11

therftet 644pteP Loc•l APe& Coftnectioft;

MAC Address/

\

IP Address

C. Type the command ping followed by your partner's IP address.
You should receive four replies.
D . Your computer just used an ARP broadcast to determine your
partner's MAC address. It stored it in what is called the ARP cache,
where it will reside for just a few minutes. The next command will
allow you to see the contents of the ARP cache, ·which should include
your partner' s MAC address. Ty pe the command arp -a . There may
be multiple entries in the cache, but yo u should see you partner' s IP
address and MAC address listed .
E . Now type the command arp -a followed by yo ur partner's IP
address. You will see only your partner's entry and none ofthe others.
F. Compare yo ur MAC address with that of your partner's and see
if you can tell whether the network card came from the same
manufacturer. Look at the Oill of the cards and see if they match. If
they do, they are from the satne company.
2 . Convert the following decimal numbers to binary :

8

A . 206
B. 24

C. 58
D . 196
E . 67
3. Convert the following binary numbers to decimal:
A. 11000011
B . 10101110
C. 11111011
D . 10101010
E. 10111111
4 . Convert the following hex numbers to decimal.

A . a26
B. 2b8
C. 166
D . cab
E . 22a

Review Questions
1. Which of the following is not an area where binary is used in
networking technology?
A . IP addressing
B. Representation of data in transmission
C. Data storage
D. MAC addresses
2. What is the value of 2°?

A. 0
B. 1
C. 2

D. There is no such thing as a zero power.
3. How does the Unicode system represent multiple language
characters?
A . 4-bit patterns
B. 8-bit patterns
C. 2-byte patterns
D . 4-byte patterns
4. In which area is hexadecimal used?
A. IP addresses
B. Representation of data in transmission
C. Data storage
D. Memory addressing
5. What numbering system is used in 1Pv6?
A . Binary
B . Decimal
C. Hex
D. Octal
6. What is the best numbering system to use to represent very large
numbers concisely?
A . Binary

B . Decimal
C. Hex
D . Octal
7. Which of the following is the abbreviation for another term for
MAC address?
A . our
B . BrA
C. PAA
D . EUr

8. Which part of a MAC address identifies the manufacturer?
A. our
B . EUr
C. BrA
D . UAA

9. Which part of a MAC address identifies the individual network
card and not the manufacturer?
A. our
B . EUr
C. BrA
D . UAA

10. Which of the following is not an accepted representation of a
MAC address?
A. 00-50-56-C0-00-08

B. 00/50/56/C0/00/08
C. 00:50:56:C0:00:08
D. 0050.56C0.0008

Chapter 7
Classful IP Addressing
Internet Protocol (IP) addresses are used to differentiate the computers on a
LAN. They also include information that allows routers to route packets from
a computer in one LAN to a computer in a different LAN. As you learned in
Chapter 3, "TCPIIP," these activities occur on the Internet layer of the TCPIIP
model.
For a Cisco network technician, an understanding of IP addressing and its
configuration is essential. In this chapter, the basics of IP addressing, both
for 1Pv4 and 1Pv6, are covered, laying the groundwork for more-advanced
IP topics in Chapter 8, "Classless IP Addressing." Specifically, this chapter
covers the following topics :
• Describing the function of IP addresses
• Identifying IP address types
• Utilizing diagnostic tools
• Understanding DHCP
• Introducing 1Pv6

Describing the Function of IP Addresses
The original version of TCP/IP was written in September 1981. In 1983,
the DoD mandated that all of their computer systems would use the TCP/
IP protocol suite for long-haul communications. This network eventually

evolved into the Internet as we know it today, and TCPIIP is the protocol of
the Internet. TCP/IP has become the networking protocol for LANs as well.
The Internet Protocol (IP) part of the TCP liP suite handles the routing and
addressing function at the Internet layer of the TCPIIP model. As you will
learn later in this chapter, IP addresses, unlike MAC addresses, are logical
and are managed by network technicians. Because IP addressing is designed
and implemented by network technicians, it is important to understand its
functions and factor these considerations into the design phase.
The two main functions of IP addressing are identification and
segmentation. IP addresses serve to uniquely identify network devices, and
the IP addressing system serves as a method of partitioning the network for
purposes of security and/or performance. This section covers the two main
functions of IP addressing.

Identification
IP addresses are used to differentiate one computer from another and act as a
value that is used when attempting to locate a computer. Much as your home
or office address is used for mailing purposes, these addresses are used as a
destination value in the IP header of the packet sent to a computer.
As you learned in Chapter 3, MAC addresses can change many times en
route from one computer to another, but the IP addresses in the IP header do
not.
Media Access Control (MAC) addresses are Network
Access layer addresses in hex that are permanently assigned
to network cards and network device interfaces.

Both the source and destination IP addresses will remain the same. In
Figure 7-1 , you can see the Network Access layer header (labeled Etherne t II)
and the Internet layer header (labeled Internet Protocol) of the packet.
M t

al co

dt

ttY: d

ora

Figure 7-1: Ethernet and Internet Protocol headers
No. .
11me
4lSSS 7 . 0542$1
41556 7. 0~4310
415S77.&S4l'91
41558 7 054475
41559 7 0545$6
4 156&7.054658
41S61 7 . 054737
415627. 0548U
41563 7 .054395

Sourc.•
153 . 43 .130. 114

=:::::;:

14.176.162.98

D~stlmt ion

2$8.124 .3$ . 105

Protoc:ol
TCP

3.176.238.116
TCP
145.6.199.21 ____.
?.206 !2' Gl

91,235 199 .U
27.59.59. 119

118.193. 108.117

TCP

12&. 18e.188. 126

94.48.153.7)

T(P

176.39.4 3.68
255.195.169.106

S4. 192 .50. 1U
172.33.71.72

TCP
TCP

tle.adel" hngth : 20 bytes

The information displayed in Figure 7-1 is a part of a packet capture
from the network with a protocol analyzer, or sniffer. These devices capture
copies of packets travelling on the network and use software to display the
packets and their contents. This part of the capture is focused only on the
Network Access and Internet headers, but the entire packet was captured.
You can see the source and destination MAC addresses in hex, and in the
IP section you can see the source and destination IP addresses. Each time
the packet goes through a router, the Network Access portion will be taken
off and reconstructed using new destination and source MAC addresses. A
new Network Access trailer will also be added. None of the other parts of the
packet, including the IP header, will change.

Segmentation
Another function of IP addressing is to segment, or organize, computers into
separate LANs. In the upcoming section "Identifying IP Address Types," you
will learn how a portion of the IP address is used to do this. When computers
are located in different LANs, they cannot communicate with one another
without the assistance of a router. Even if they are physically connected to the
same switch or even connected directly to each other, communication cannot
occur if their IP addresses are in different networks.
Segmenting computers in LANs is done for the following reasons:

Better Performance When a network segment becomes overloaded with
computers, performance begins to suffer. You learned in Chapter 2, "The
OSI Model," that devices use unicast transmissions to communicate oneM t

al co

dt

ltY: d

ora

to-one and broadcast transmissions to communicate to all other computers.
Computers broadcast in any situation in which the destination IP address is
unknown. When a computer broadcasts, every computer in its LAN must
receive and process the packet. The set of computers defined by these
broadcast recipients is called a broadcast domain. The larger the broadcast
domain, the more broadcast traffic is created. This traffic competes with
other traffic and congests the LAN.
As you will learn more about in Chapter 10, ''Network Devices," routers
do not forward broadcast traffic from one LAN to another. This keeps the
broadcast traffic confined to each LAN. The result is smaller broadcast
domains, resulting in better performance.

Security When computers are in different LANs, access from one LAN to
another can be controlled at the only path that exists between them that
is, at the router. This access is accomplished via access lists. These lists
define what traffic is allowed between LANs and what traffic is not
allowed. It can be broadly defined (as in no traffic is allowed), or it can be
granular. For example, it may block traffic from one particular computer
in LAN A from using HTTP with one particular computer in LAN B.
Network Expansion Because the gro\vth of any individual LAN will
at some point result in declining performance, network growth will
necessitate the creation of more LANs. The ability to create more LANs
connected together with routers allows a net\vork to scale, growing to any
size without suffering performance degradation.

Scaling
Scaling means to increase size or capacity. For example, scaling a
network means increasing the number of computers in the network.
Scaling a server, on the other hand, means to increase its capacity,
either by adding memory or more processors, which is called scaling

up, or by adding servers in a cluster (a group of servers working
together as one), which is called scaling out.

Problem Isolation With smaller LANs segmented by routers, network
problems are easier to isolate. Because much traffic is confined to the local
LAN, the problems are likewise confined. Hardware problems with routers
and switches also affect a smaller portion of the net\vork when they occur.
In summary, network segmentation yields many benefits. In the next
section, you will learn the parts of the IP address and the role that these parts
play in accomplishing this segmentation.

Identifying IP Address Types
As you learned in Chapter 6, "Numbering Systems," IP addresses are 32 bits
in length when expressed in binary . When humans work with IP addresses,
however, it is usually done in what is called dotted decimal format. An IP
address in this format looks like the following:
192.168.5.3
This format is called dotted decimal because the sections, or fields, are
divided by dots, and the values are expressed in decimal instead of binary.
Each of the four fields is called an octet because each section can be expressed
in binary format by using 8 bits. So to convert 192.168.5.3 to its binary
format, each decimal number would be converted to its equivalent in binary.
Because each section is 8 bits in length, the result would be a string of 32 Os
or 1s. The conversion of 192. 168.5.3 is as follows :
11000000.10101000.00000101.00000011
There is more to understand about an IP address than its two formats,
however. To understand how IP addresses are used to accomplish
segmentation (or subnetting) , you must understand the two parts of the IP

address and their relationship to a second value that any device with an IP
address will possess (which is the sub net mask). This section presents those
concepts and introduces a set of IP addresses that have been specifically
reserved for use on LAN s.

Defining IP Address Classes
When IPv4 addressing was first designed, the IP addresses were organized
into what are called classes . Five classes of addresses were defined, and the
value of the first octet (the octet to the far left) determines the class in which
an IP address resides. The standard defines this in binary terms. Three of the
classes are intended for application to individual devices, one class is reserved
for multicasting, and the fifth is labeled experimental.
When expressed in decimal format, the ranges of possible values for the
first octet of the five classes are as follows:
Class A 1 to 126

Class B 128 to 191
Class C 192 to 223
Class D 224 to 239
Class E 240 to 255
The entire 127.0.0.0/8 network is missing from this list
(reserved) because these addresses are used for diagnostics.
This is discussed further later in this section.

The standard defines these classes in terms of the first octet in binary. It
defines the bits at the far-left side of the first octet, which are called the most
significant or the high-order bits. All IP addresses in the same class will share
the values of these defined bits. For example, every IP address in Class C will
have the most significant bits in the first octet set to 11.

High-Order Bits
High-order bits, also referred to as the most significant bits, are the farleft bits in a bit pattern. They are termed most significant or high order
because they are \VOt1h the most because of their position. For example,
in the 8-bit pattern 11000000, the two leftmost bits are worth 128 and
64, respectively, which is higher than the value of any other bits in the
pattern.

When expressed in this form, the five classes are as follows:
Class A 0000

Class B-1 000
Class C 1100
Class D 1110
Class E 1111
Because the first three classes (A, B, and C) are used for individual
devices, that is where our focus will be. These three classes, from the first
address to the last address in the class, are as follows :
Class A 1.0.0. 1-126.255.255.255
Class B 128.0.0.1- 192.255.255 .255
Class C 193.0.0. 1-223 .255 .255.255
You may have noticed that some numbers are missing. The entire networks
from 0.0.0.0- 0.255.255.255 and 127.0.0.0-127.255.255.255 are not used.
The first is called the zero network and is arbitrarily not used, and the second
(127.0.0.0- 127.255.255 .255) is reserved for network diagnostics. Any of the
IP addresses in the 127.0.0.0 network can be used to test a computer. If the
address can be pinged successfully, the computer has the TCPIIP protocol
installed and the network adaptor card is functioning.
The most famous of the IP addresses in the 127.0.0.0 network (127.0.0. 1)
is called the local host. It is also known as the loopback address, as it

loops the signal back through the network card for an answer if you ping
it. Although any of the IP addresses in the 127.0. 0. 0 networks will do this,
127.0.0.1 gets all the glory .
You will learn how to use the loopback address to
troubleshoot in the section "Utilizing Diagnostic Tools" later
in this chapter.

Identifying Network and Host Addresses
Each IP address has two parts, the network part and the host part. These two
portions function in a manner similar to your street address and your house
number. The network portion determines the LAN in which the computer
is located, and the host portion identifies the computer in that LAN. The
network portion begins at the far-left side of the IP address and continues
uninterrupted until it meets the host portion. The host portion then continues
to the far-right side of the IP address.
The point in the address at which the net\lvork portion ends and the host
portion begins is determined by the class of the IP address. The computer
uses a second value called the subnet mask to determine which portion is
network and which portion is host. When the computer reads the subnet mask,
each octet that is 255 is considered to be network, and each octet that is 0 is
considered to be host. It then uses the octets that are set to the value of 255
to mask the network portion (which means it uses the 1nask to determine the
network part). A computer cannot have an IP address without also having a
subnet mask . The addressing is incomplete if both values are not present.
Classful IP addressing is the IP addressing system used
from 198 1 until 1993. It creates only three classes of
networks for unicast communication. Chapter 8 discusses
the limitations this imposes.

In classful IP addressing, the dividing line between the two is always done
between octets. An example of an IP address from each class with the network
part shaded red and host part shaded green is shown in Figure 7-2. Figure 7-2
also shows the subnet mask for each class. As you can see, the parts of the
subnet mask that are 255s match the network portion of the address.

Figure 7-2: Subnet masks for each class

In the next chapter, it will be important for you to be comfortable \Vorking
with subnet masks in binary form, so let's take a look at what the three default
subnet masks look like:
Class A (255.0.0.0)
11111111 .00000000.00000000.00000000
Class B (255.255.0.0)
11111111 . 11111111 .00000000.00000000
Class C (255.255 .255.0)
11111111 .11111111 .11111111 .00000000

Default Subnet Masks
A default subnet mask is one that conforms to the rules of classful
subnetting. In Chapter 8, you will learn that other subnet mask
possibilities exist and are used to create networks of the size desired .
As you will learn, this removes the restriction of only having three sizes
of networks to choose from in design.

As you already know, the computer evaluates everything in binary, so
when the computer reads the subnet mask, 1s indicate the network portion and
Os indicate the host portion. It is also important to know that the string of 1s

M t

al co

dt

ttY: d

ora

indicating the network portion is never interrupted by Os, which means there
will never be a subnet mask like this:
111 000 11.00000000.00000000.00000000

In each network or LAN, there are two IP addresses that can never be
assigned to devices. These addresses are reserved for special roles in each
network. The first is called the network ID and second is called the broadcast
address. These two addresses can be identified in the LAN by the bits in the
host portion of the IP address. If all of the bits in the host portion are Os, then
the address is the network ID. If all of the bits in the host portion are 1s (or
255s in decimal), the address is called the broadcast address. An example of a
Class A network ID and broadcast address in both binary and dotted decimal
form is shown here :
IP Address Dotted Decimal Format Binary Format

Network ID 1.0.0.0
Broadcast

1.255.255.255

1

ooooooo 1.oooooooo. oooooooo. oooooooo
00000001.11111111.11111111 .11111111

The network ID is used to identify the network as a group. It is an
important value that routers use in the routing tables. If this value were not
available to identify the entire LAN, a router would have to have an entry for
every host, which would make the routing tables huge and would slow the
routing process to a craw1. By using this value, the router can route packets to
any computer in a LAN, and then the router that physically connects to that
LAN will locate the specific host at the Network Access layer by using the
ARP broadcast method you learned about in Chapter 3.
The broadcast address is used any time a computer needs to send a packet
to every host in its LAN. An example of a broadcast is an ARP broadcast.
Hosts broadcast in other instances as well. Later in this chapter, you will learn
about the operation of Dynamic Host Configuration protocol (DHCP). When
DHCP is used, the computers broadcast to locate the DHCP server.
The number of possible networks per class is a function of the possible
combinations of the number of bits dedicated to the network portion for the

class. For example, if 2 bits were used for the network (which is not possible
in classful IP addressing, because 8 bits is the minimum, but consider this
example just for illustration purposes) the possible combinations using 2 bits
would be as follows:
00
01
10

11

Those are the only combinations using 2 bits. Because there are four
possible combinations using 2 bits, it would mean you could have four
networks, each identified by the values in the first 2 bits. To determine
the number of possible networks given the number of bits dedicated to the
network portion of the address, the following formula can be used:
2n = number of possible networkswhere n = the number of bits in the
network portion
To prove this formula manually, we can use the previous 2-bit example.
2

Because 2 = 4, the formula works. That means that for a Class A network
in \Vhich 8 bits (the entire first octet) are used for the network portion, the
8
2,

which is 256. Using this formula
number of networks possible would be
and applying it to each of the three classes of networks, the number of
possible networks for each is shown here:
Network Class Number of Possible Networks

Class A
Class B
Class C

2

8

2

16

2

256

=

24

=

65 536
'

=

16,777,216

Just as the number of bits dedicated to the network portion of the address
determines the number of possible Class A, B, and C nenvorks, the number
of host bits determines the possible number of computers in a Class A, B,

and C network. The number of computers possible in each class network is a
function of the number of possible combinations of numbers using the number
of host bits. The formula for the number of possible computers in a network
.
IS

2n - 2 = possible number of computerswhere n is the number of host bits in
the address
Using a Class C address as an example (which has 8 host bits, which is the
entire last octet), the possible number of computers would be as follo\vs:
8

2 - 2 = 254
Can you guess why we are subtracting 2 from the possible number of
computers in each network? Remember the two IP addresses that are reserved
in each network (network ID and broadcast). We must subtract those out
to get the number of available IP addresses in each network. Using this
formula and applying it to each of the three classes of networks, the number
of possible computers for each is shown here:
Network Class Number of Possible Computers

Class A
Class B
Class C

2
2

24

16

- 2 = 16,777,214
-

2 = 65 534
'

8

2 -2 = 254

Because there are only three classes in classful IP addressing, there are
only three sizes of networks. In the next chapter, you will learn the limitations
that restriction introduces and how classless IP addressing solves those
problems.

Describing Private IP Addresses and NAT
When IPv4 was created, it was thought that the number of possible IP
addresses would be sufficient to serve the Internet. However, after a few

years of incredible growth, it became apparent that this \¥as not the case.
The eventual solution was IPv6, which you will learn about later in this
chapter. While the IPv6 system was still in development, two temporary
solutions were implemented to delay the eventual exhaustion of the address
space. These two solutions were classless IP addressing (which you will learn
about in the next chapter) and private IP addressing used in conjunction with
Network Address Translation (NAT) services.
Up until the time that private IP addressing and NAT services were
introduced, all computers that were to connect to the Internet had to have a
unique IP address issued from the entities managing the Internet. Therefore, a
company with 500 computers that required Internet access would be issued a
block of 500 unique addresses from their Internet service provider. Then the
NAT server was introduced, which allowed a single server to be the gateway
to the Internet for the entire company, to represent all 500 computers on the
Internet with a single IP address.
When Network Address Translation is in use, the computers in the network
have IP addresses that need not be unique on the Internet. When one of these
computers needs to go to the Internet, their packet will go to the NAT server.
The NAT server will remove the IP address of the computer and replace it
with the IP address of the NAT server. Therefore, when the packet is sent to
the web server on the Internet, the source IP address will be that of the NAT
server. When the page is returned from the web server to the NAT server, the
NAT server will forward the page back to the computer, using the IP address
of the computer as the destination.
If you understand how Network Address Translation works, it really
doesn't matter what IP addresses you use in your LAN as long as they are
unique within the LAN. Because these IP addresses are never seen on the
Internet (because they get translated to a public address that is unique on the
Internet), you could use any addresses you like.
Having said that, three special ranges of IP addresses have been reserved
for use inside LANs. The IP addresses in these ranges are called private

IP addresses . These ranges were specified in Request for Comments (RFC)
1918.
Before a standard is adopted and published, it is presented
to the standards body in a document called a Request for
Comments (RFC).

There is a range in each address class. These addresses are not given out
for use on the Internet. There is no requirement to use them in a LAN, but it
has become a common practice to do so.
These ranges are as follows:

Class A
Class B
Class C

10.0.0.0 to 10.255.255.255
172.16.0.0 to 172.31 .255.255
192.168.0.0 to 192.168.255.255

Utilizing Diagnostic Tools
In the process of implementing and maintaining a network, there will be times
when computers cannot communicate with one another and the problem must
be isolated. There are a number of command-line tools that can be utilized to
accomplish this. The purpose of these tools is to eliminate possibilities one by
one until the smallest sets of possible causes exist, helping to determine and
ultimately correct the problem.
Understanding the TCP liP model can be a great aid when troubleshooting
network problems. There are four possible layers where the problem can exist.
As a review, the four layers and the types of problems that exist at those layers
are as follows:

Application Layer Specific applications and services operate at this layer
(DNS, SMTP, and so forth) . If this layer functions , all other layers must be
functioning, because this layer depends on all other layers for a connection.

An example of a problem at this layer is the inability of computers to locate
one another by name. This is a name resolution problem caused by the
malfunction of DNS, an Application layer protocol.
Transport Layer Port numbers are at this layer. If this layer functions,
the Internet and Network Access layers must be functioning, because the
Transport layer depends on them to function. Problems at this layer will
prevent connection at both the Application and Transport layers, because
the Application layer depends on this layer to function.
Internet Layer IP addresses are at this layer. If this layer functions, the
Network Access layer must be functioning, because the Internet layer
depends on it to function. Problems at this layer will prevent connection
at the Internet, Transport, and Application layers, because those layers
depend on this layer to function.
Network Access Layer MAC addresses, Frame Relay DLCis, and PPP
SPIDs are at this level. If this layer functions, the physical LAN or WAN
connection is operational and devices are seeing each other at the Network
Access layer. Problems at this layer will prevent connection at all layers,
because all layers depend on this layer to function.
The command-line tools discussed in the remainder of this section can help
determine on which of these layers the problem exists. Specifically, these
tools and the layers they can troubleshoot are as follows :
ipconfig Used to obtain information for troubleshooting every layer
ping Can troubleshoot Internet and Transport layers
arp Can troubleshoot Nehvork Access layer
traceroute Used to troubleshoot the Internet layer
Parameters, also called switches, allow you to alter the
execution of a command. Some commands will function
with no switches, and some will not.

Executing the ipconfig Command
The ipconfig command can be used to view the current IP configuration of
a computer. It can show the IP address, subnet mask, and default gateway. An
example of the output is shown in Figure 7-3 .
Figure 7-J: ipco nfig
~:~$e~$,tnc n illan>ipconfig

~indo~ IP Configu~tion
~thernet adapter Local Area Connection :
Connection-.spe-cific DNS S uffb .
Link-local 1Pu6 Addre:: . . . . .
JPui Address • • • . • . • • . . •
Suhnet ftu k . . . . . . . . . . .
Deftwlt Cuew&y . . . . . . . . .

: alpha.JlcaplAnine . con
: h80::ad~3:8b?3:a.66e:6bc8Y.11
: 10 .88.2.177
: 255 . 255 . 254 . 8
: 10.88.2 .6

When you are unfamiliar with the configuration of a computer (which in
most cases, you will be), this command gives you a quick look at the settings
currently in place.
The ipconfig command will di splay the IP address, subnet
mask, and default gateway if executed with no parameters,
but if you add 1all to the command, you wi ll get much more
information.

Executing the ping Command
You learned about the ping command in Chapter 4, "Protocols. " You learned
it can be used to test connectivity at the Internet layer when you ping an
IP address. It can test other operations at this layer as well. The following
are some uses of the p i ng command listed in the recommended order of
execution:
Ping 127.0.0.1 When you ping the loopback address and receive a
response, you can rule out a problem with the TCP/IP protocol and with
the network adaptor card. This is useful because network cards can become
loose, their device drivers can become corrupted, and they can simply stop
functioning. The TCP/IP protocol is typically installed by default with the
Copy llJ t

a ri

operating system but it can be uninstalled, and if it is, a ping to 127.0.0.1
will also fail. Testing the loopback address is useful because if it fails, none
of the other tests discussed in this section will succeed and will be a waste
of time.
Although the most common address used is 127.0.0.1 , any
IP address in the 127.0.0.0 network is mapped to the
loopback and will work. Try it!

Ping the Local IP Address If you can successfully ping the local IP
address, you know that TCPIIP is installed, the network adaptor is
functioning, and the IP address and subnet mask you are expecting has
been assigned. This is not always a given because users have been known
to change their IP addresses for all sorts of odd reasons. Another way to
check the IP address is to execute the ipco n f i g command.
Ping Another Computer on the Local LAN If this succeeds, you know
that TCP /IP is installed, the network adaptor is functioning, and the IP
address and subnet mask of the two local computers are in the same
subnet. Considering how unlikely it is that two users changed their IP
addresses and managed to get in the same subnet, it probably means that
both cotnputers are configured correctly .
Subnets are created with the subnet mask. If two computers
use the same sub net mask, and the network portion of their
address matches, they are in the same subnet.

Ping the Default Gateway As Chapter 11 , "LAN Operations," explores
further, the default gateway is the IP address of the router connected to the
local LAN. To connect to anything outside of the local LAN, such as other
LANs or the Internet, you must be able to ping the default gateway. If you
can, you know that TCP/IP is installed~ the network adaptor is functioning,

and the IP address and subnet mask of the local computer is in the same
subnet with the router.
In Chapter 8, you vvill learn how to create subnets of a
certain size by manipulating the sub net mask.

Ping a Computer in Another LAN If this ping fails and the ping to the
default gateway succeeds, there is a routing problem. If this ping succeeds,
routing is working properly (at least to that LAN). In that case, you know
that TCP/IP is installed, the network adaptor is functioning, the IP address
and subnet mask of the local computer is in the same subnet with the
router, and the router is able to route to the remote network.
Ping can also be used to test the Transport layer. When you can ping a
computer by its IP address but you can't connect to a service running on the
computer, you can ping the port number of that service to see whether the port
is blocked or the service is not functioning. For example, if you can ping the
email server but you cannot connect to your email box, ping the port number
for SMTP (25). This is done by pinging the IP address with the port number
added to the same line after a colon. If the IP address of the email server were
192. 168.6.6, the command would be as follows :
ping 19 2 . 168 . 6 . 6 : 25

The combination of the IP address and the port number is
called a socket.

If this fails, either the service is not functioning or the port has been
blocked by an access list. Access lists are discussed in Chapter 13,
"Configuring Routers."

Executing the arp Command

As you learned in Chapter 3, Address Resolution Protocol (ARP) is
responsible for learning the MAC address that goes with an IP address.
It does this by broadcasting in the local LAN. All computers will get the
broadcast, but only the computer with the IP address will answer. There is
also a command-line program called arp . exe that can be used to examine the
local arp cache.
When a computer resolves a MAC address to an IP address, it stores that
mapping in memory for a short period of time. This area of memory is called
the arp cache. In some instances, when a network problem arising from an
incorrect IP address has been corrected, other local computers in the LAN
may still be caching an incorrect IP address. You can determine whether
that is the case and if necessary delete the entry in the cache with the a r p
command.
The arp command requires that you also include a parameter (also called
a switch) with the command. The following are the most useful parameters:
The arp command requires a switch to function. If you
execute it alone, it will simply display the Help menu for the
arp command.

arp -s <MAC address> Adds a static entry to the ARP cache
arp -N <Interface IP address> Lists all ARP entries for the interface
specified
arp -a or arp -g Displays all the current ARP entries for all interfaces
The use of angle brackets indicates a variable. You replace
the brackets and their contents ·with the appropriate
information that is called for inside the bracket description.

Executing the traceroute Command

The t r acerou t e command can be used on a Cisco router to determine the
path to another network and can be used to determine where along that path
the connection is broken. To execute this command on a Windows computer,
you must execute t r acert, rather than traceroute . It will display each
hop (a hop is a router traversed and the time taken to cross the router).
When connectivity does not exist between router A and router B, and you
know there are a number of routers between them, this command will help
determine where the communication stops. As explained in Chapter 4, the last
router to report its hop will be the last router before the problem router.

Understanding DHCP
Dynamic Host Configuration Protocol (DHCP) is a service that can run on
either a router or a server. Its function is to automate the process of assigning
IP addresses, subnet masks, default gateways, and other settings to computers.
It also helps prevent IP address conflicts by keeping track of which IP
addresses have been issued and which have not. This section discusses the
operation of DHCP in any form and then looks at how DHCP is implemented
on a Cisco router.

Operations
Before a DHCP server or router can function, the service must be enabled and
an IP address range or scope must be created. A scope is a set of IP addresses
that the DHCP server or router will use to issue IP addresses. The DHCP
server will issue these addresses on a first -come, first -served basis and will
mark an address when it is assigned to prevent duplicates.
Computers must be set to participate in the DHCP process to obtain an
address. This is done by selecting the check box to obtain an IP address

automatically in the Properties of TCPliP on the computers, as shown in
Figure 7-4.
Fi2ure 7-4: DHCP settings
l il

Internet Protocol Ver.ion 4 (TCP/1Pv4) Properties

~

J

General I Alternate Configuration I
You can get lP settings assigled autumaticaly if }'<lt.l" netv.oork supports
tns capabiity. Otherwise, you need to ask your net'l\-ork adn>nistrator
for lhe app-opriate lP settings.

( @ OblaO"I an lP adaess autxlmatblly )

0

Use the following!P address:

IP address:
Subnet mask:

Delau~ oatewav:

•

0

0

0

0

0

0

0

0

@ OblaO"I ONS server address au!XImatblly
() Use lhe folowng ONS server oddresses:

Preferred DNS server:
Alternate DNS server:

0

.

.

0

0

Valdate settings ~n e»t

0

0

[
[

OK

Advana!d .••

l[

Caned

l
I

You may have noticed that the computer is not configured with the IP
address of the DHCP server or router. When a computer is set to use a DHCP
server, it will broadcast to locate the DHCP server. The server will answer
and offer an IP address if it has one, and the computer will accept the address
and begin to use it. There are four packets that will go back and forth between
the DHCP server or router and the DHCP client, as shown in Figure 7-5 .
Figure 7-5: DHCP process

<D~~~
IP Address Offer

=l <D
"::;

OHCPRequ~

DHCP Client

®I==
IP Address Sele<tion

•

DHCP Server

Many settings can be issued using DHCP . The most common are as
follows :
• IP address
Copy llJ I

a ri

• Subnet mask
• Default gateway
• DNS server

Cisco DHCP
A Cisco router also has the ability to act as a DHCP server for the computers
on the local LAN. As you learned earlier, routers connect LANs via physical
Ethernet interfaces. The computers do not usually connect directly to this
interface ~ instead, a switch is connected to the interface and computers are
then connected to the switch, as shown in Figure 7-6.
Figure 7-6: Router and switch layout

DHCP is configured on the router and will function on the interface
that is the same LAN as the scope. For example, if the scope range is
from 196. 168.2.2-192.168.2.50 and the E 1 interface has an IP address of
192. 168.2.1 , computers on the LAN connected to the switch connected to
E1 will receive an answer to their DHCP request. Computers connected to
the switch connected to E2, which has an IP address of 10.1.1.1 , will not
receive an answer unless a scope is configured for that network, such as
10.1.1.2-10.1.1.50. In Chapter 13, you will learn the commands to enable
DHCP for an interface.

Introducing 1Pv6
1Pv6 is an IP addressing scheme designed to provide a virtually unlimited
number of IP addresses. It uses 128 bits rather than 32 as in 1Pv4, and it
is represented in hexadecimal rather than dotted decimal format. Moreover,
any implementation of IPv6 requires support built-in for Internet Protocol
Security (IPsec ), which is optional in IPv4. IPsec is used to protect the
integrity and confidentiality of the data contained in a packet. This section
covers the format and allowed expressions of an IPv6 address. This section
also points out some special 1Pv6 addresses that are reserved for particular
purposes.

1Pv6 Address Format
An 1Pv6 address looks different from an 1Pv4 address. When viewed in
nonbinary format (it can be represented in binary and is processed by the
computer in binary), it is organized into eight sections, or fields, instead of
four as in 1Pv4. The sections are separated by colons rather than periods as in
1Pv4. Finally, each of the eight sections has four characters rather than one to
three as in the dotted decimal format of 1Pv4. An 1Pv4 and IPv6 address are
presented here for comparison:

IPv4

19 2. 16 8.5.6

1Pv6

2001 :Odb8:85a3 :0000:0000:8a2e:0370:7334

The 1Pv6 address has two logical parts, a 64-bit network prefix and a 64-bit
host address. The host address is automatically generated from the MAC
address of the device. The host address in the preceding example consists
of the rightmost four sections, or 0000:8a2e:0370:7334. The leftmost four
sections are the network portion. This portion can be further subdivided. The
first section to the left of the host portion can be used by organizations to
identify a site within the organization. The other three far-left sections are

assigned by the ISP or in som e cases are generated automatically based on the
address type (as you will see shortly).
There are some allowed methods of shortening the representation of the
IPv6 address :
1. Leading zeros in each section can be omitted, but each section must
be represented by at least one character unless you are making use of
rule 2 . By applying this rule, the previous example IPv6 address could
be written as follows :

2001 :Odb8:85a3 :0:0: 8a2e:0370 :7334
Leading zeros are any zeros that appear on the left side
of a group. If any nonzero characters appear to the left of
zeros within a group, those are not leading zeros.

2. One or more consecutive sections with only a 0 can be represented
with a single empty section (double colons), as shown here applied to
the same address.
2001 :Odb8:85a3: : 8a2e:0370:7334

3. The second rule can be applied only once w ithin an address. For
example, the following IPv6 address, which contains two sets of
consecutive sections with all zeros, could have rule 2 applied only once.
2001 :0000:0000:85a3: 8a2e:0000:0000:7334
It could not be represented as follows:
2001 : :85a3: 8a2e: :7334
The single set of double colons for rule 2 applies even if
you replace three or four sections with double colons. You
wouldn't use three or four sets of colons.

1Pv6 Address Types
There are three types of IP addresses in IPv6. One of the benefits of IPv6 is
that there are no broadcasts in IPv6.
Unicast Addresses A packet is delivered to one interrace. This is the same
concept as in IPv4.
Multicast Addresses A packet is delivered to multiple interfaces. This is
the same concept as in IPv4.
Anycast Addresses A packet is delivered to the nearest of multiple
interfaces (in tenns of routing distance). This is unique to IPv6 and allows
an IPv6 address to be applied to multiple interfaces, with the packet going
to the interface that is closest.

A unicast address can be one of three types, and its type determines the
scope of its uniqueness:
Global Addresses These are publicly routable addresses. That means the
prefixes were assigned by an ISP and the address is unique globally.
Global addresses start with 2000 :. The host portion is composed of the
MAC address.
Addresses that are unique globally are unique on the
Internet.

Link-Local Addresses Both the network and host portions of these
addresses are automatically generated and are unique only on the LAN or
subnet on which they are generated. They always start with FE80:.
Unique Local Addresses These addresses have a manually configured
network portion (by an administrator), and the host portion is composed
of the MAC address. The network portion can either be set computer by
computer or it can be issued by a DHCPv6 server. These addresses operate
much like private addresses in IPv4 in that they allow an organization to

create LANs and route between the LANs. However, these addresses are
unique only within the organization. The prefix for site-local addresses
is FECO:. The organization would use the section between FECO and the
MAC address to identify different LANs in the organization.

Special 1Pv6 Addresses
Just as in IPv4, there are some IPv6 addresses that are reserved to represent
specific things. These special addresses are listed here:
0:0:0:0:0:0:0:0 (also written as ::) This is the source address of a host
when it is trying to locate a DHCPv6 server.
0:0:0:0:0:0:0:1 (also written as :: 1)
( 12 7.0. 0. 1 in IPv4).
FFOO:

This the IPv6 loopback address

Addresses that start with FFOO are in the multicast range.

Most operating systems today run IPv6 at the same time IPv4 is running.
In the output of ipconf i g in Figure 7-7 , you can see the IPv6 address along
with the IPv4 addresses. In this case, the IPv6 address was generated as a linklocal unicast address. You can tell this by the FE80 at the beginning.
Fi&ure 7-7: i p c o nfi g IPv6
Ethernet adapter

U~re

Network Adapt.er Uttnet8:

Conneeti.on-cpeeifie DHS:: Suf'Fb<

• : ===~~

Link- local 1Pu6 Add rcs• . . . . .
1Pv4 Address • • • • • • • • • • •
Subnet nask • • • • • • • • • • •
c____Default CatevAy • • • • • • • • •

•( fc88oo31?ooe61co6511•efrc•18) 1
: 1Y2 . 1GB. 2i . J
: 255.255.255. 8
:

Essentials and Beyond
Internet Protocol (IP) addresses are used to differentiate and segment
the computers on a LAN. The three classes of IP addresses (A, B,
and C) determine the size of the network and the number of possible
networks. An IP address has a host portion that identifies the computer
and a network portion that determines the LAN in which the computer
is located. Private addresses, which are used only within a LAN, and

Copy llJ t

a ri

NAT, which translates private addresses to public addresses, are used
to preserve the IP address space. Address space is quickly being deleted
with IPv4 . IPv6 will solve the depletion of the address space
completely. IPv6 is an IP addressing scheme designed to provide a
virtually unlimited number of IP addresses. Among the commandline tools utilized when troubleshooting network problems are p i n g ,
i pconfi g, traceroute, and arp . DHCP is used to automate the
process of assigning IP configurations to computers.

Additional Exercises
1. Identify whether each of the following IP addresses can be assigned
to a computer.
A. 192.168.5.6
B. 10.1 .0.1
C. 172.20.0.0
D . 192 .168.200.255
E. 1.1 .1.1
F. 10.0.0.0
G . 172.10.255.255
H . 172.61.9 .8

I. 16. 16.55.9

J. 127.6.1.3
2 . Execute the i pconf i g command on your computer and make note of
your IPv6 address. Look at the first section and determine what type of
unicast address that it is.
3. Execute the following command and identify what you just pinged .
ping :: 1

Review Questions

1. Which of the following is not a benefit of network
segmentation?
A. Better performance
B. Security
C. Requires less hardware
D. Network expansion
2. True or False: With larger LANs unsegmented by routers,
network problems are easier to isolate.
3. Which of the following is a Class B address?
A. 192.168.5.5
B. 15.6.5.1
C. 126.65.5.6
D . 172.69. 5.1
4. What are the most significant 3 bits of a Class C address?
A. 000
B . 001
C.010
D . 110
5. Which of these are loopback addresses?
A. 127 .1.1.1
D. :: 1

B. 127.0.0.0

E . 0.0.0.0
C. 127.0.0. 1
6. What is the network portion of 192. 168.5.6?
A. 192
B. 192.168
C. 192.168.5
D . 192.168. 5.6
7 . Which of the following is not a private IP address range?
A . 10.0.0.0-10.255.255.255
B. 168. 19 2. 0-1 7 2. 3 1. 0. 0
C. 192.168.0.0-192.168.255.255
D . 172.16.0.0-172.3 1.255.255
8. If you ping the server but can't make an FTP connection, at what
lay er is the problem most likely to be found?
A . Internet
B . Network Access
C. Transport
D . Application
9. Which command displays the arp cache?

A. a r p

-d

B . arp - s
C. arp - a

D . arp

-b

10. Which of the following packets is the second packet sent in the
DHCP process?
A. DHCPAck
B. DHCPDiscover
C. DHCPOffer
D. DHCPRequest

ChapterS
Classless IP Addressing
Chapter 7, "Classful IP Addressing," introduced IP addressing. One important
aspect of IP addressing is that for two devices to communicate with one
another, the devices must be in the same network. There are two parts of an
IP address: the network part and the host part. The network portion of the
IP address must match on the two devices for communication to be possible,
even if they reside on the same physical segment.
Much of what was discussed in Chapter 7 is characteristicof classful
networking. Thiswas the original design of IPv4 networking. In classful
networking, there are three classes of IP addresses that may be assigned to
individual devices. The size of the network in which a computer resides is a
function of the address class used for the network. Computers determine the
network class from a second configuration value called the subnet mask.
In this chapter, you'll review the limitations of the classful networking
design and discuss the benefits of departing from the restrictions of using the
three default classes. Specifically, this chapter covers the following topics:
• Understanding the limitations of classful networking
• Understanding the benefits of subnetting
• Describing the components of CIDR

Understanding the Limitations of
Classful Networking
When IPv4 addressing was designed in the 1970s, it was based on
assumptions about the use of the network for which it was designed. These
assumptions grossly underestimated the nutnber of organizations to be
connected, the number of end systems per organization, and the total number
of end systems on the network. None of the designers could have foreseen the
eventual growth of the Internet to its size in the 1980s, not to mention what it
is today!
The design flaws resulted in three main issues:
• Exhaustion of the Class B network address space
• Unmanageable routing tables
• Exhaustion of the 32-bit IPv4 address space
Two of these flaws were addressed by the introduction of Classless InterDomain Routing (CIDR). The third was partially addressed but was not fully
addressed until the development of IPv6, which was discussed in Chapter 7.

Exhaustion of the Class B Network Address Space
In the early days of the Internet, blocks of IP addresses were assigned by the
Network Information Center (NIC). Only three sizes of network blocks were
available (A, B, and C), and none of these was an appropriate size for a midsized organization. Class C, with a maximum of 254 host addresses, was too
stnall. Class B, which allows up to 65,534 host addresses, was too large for
most organizations but was the best fit available.
This not only resulted in the overuse of the Class B space, but also resulted
in many wasted IP addresses in most cases. As an illustration, consider a
company that requires 56,000 IP addresses. If the company was issued a Class

B set, such as 175.60.0.0, it would be issued 65,534 host addresses, resulting
in almost 10,000 wasted IP addresses!
CIDR, developed to address this problem, envisioned a system in which
a network block such as 175.60.0.0 could be further subdivided and smaller
pieces could be issued to stop the waste. Later in this chapter, you will learn
how to manipulate the subnet m ask to accomplish this network division,
which is called subnetting.

Unmanageable Routing Tables
When a router reads a routing table, it will read the entire table, looking for
the closest match to the network of which the destination address is a member.
The larger the routing table, the longer it takes the router to read it, and the
slower the routing process.
Parsing a table or file means the router reads the table from
top to bottom until the router finds a match.

Any design change that can make the routing tables smaller is beneficial,
and another design feature of CIDR was the introduction of route aggregation,
or summarization. Route summarization may be seen as the opposite of
subnetting. Its details will not be clear until after the coverage of subnetting,
but perhaps an analogy may give you a broad understanding of both concepts.
Consider a mother who has a pie that has been sliced into three slices: one
that is very large, another that is about medium in size, and one that is very
small. She has five children to feed, and they are ages 3, 7, 14, 16, and 18.
Not only does she not have enough slices, but she has slices that are too large
and too small. If she had the ability to slice the pie at her discretion, she could
give each child the correct size slice and do so with no waste. This is what
classless subne tting allows.

Now consider the same mother and the same pie. She has sliced the pie
into 10 pieces of varying sizes but has not yet distributed them. Her husband,
who is going to the store, inquires, "How much pie do we have right now?"
After some work with paper and pencil, she hands him a list of each slice and
its exact size. He looks at it and says, "Why didn't you just tell me we have
one pie?" This is what route summarization allows.

Exhaustion of the 32-Bit 1Pv4 Address Space
As you learned in Chapter 7, the ultimate solution to the exhaustion of
the 32-bit IPv4 address space is IPv6, but CIDR also introduced private
IP addresses. When organizations started using these addresses within the
organizational LANs and began to use Network Address Translation (NAT)
servers, it helped to delay the exhaustion. When an organization with 5,000
computers requiring Internet access can be represented by a single public IP
address, it surely helps save public IP addresses!
Public IP addresses have been issued by the Internet
authorities and are unique on the Internet. Private IP
addresses cannot be routed to the Internet and are not
.
umque.

NAT introduces some problems in that certain applications and services
will not operate through a NAT server. IPsec for a time \vould not function
through NAT (although that problem has been addressed). The ultimate
solution for address exhaustion is a global switch to IPv6.
IP Security (IPsec) is a network security protocol designed
to protect the integrity and confidentiality of data while it is
en route across an untrusted network.

Understanding the Benefits of
Sub netting
Although certainly benefits have been derived on the Internet from CIDR
and subnetting, there are solid reasons to deploy subnetting and CIDR in the
design of LANs as well. When it is included in network design, subnetting
can improve both performance and security. This section covers the problems
presented by network congestion and the benefits possible with subnetting.
The ways that network segmentation at the Internet layer can enhance security
are also discussed.

Identifying Sources of Network Congestion
Network congestion occurs when the amount of traffic in the network exceeds
the abilities of the physical infrastructure. In the same way that too many
cars on a highway slow traffic to a crawl, too much traffic in the network
dramatically decreases the data throughput. This occurs for two main
reasons::
Collisions Ethernet networks use Carrier Sense Multiple Access/Collision
Detection (CSMA/CD) to arbitrate access to the network. By each host
checking the wire for activity prior to transmission, the overwhelming
majority of collisions are avoided. However, many are not, and thus the
inclusion of the collision detection and retransmission mechanism. As you
learned in Chapter 5, "Physical and Logical Topologies," collisions cause
all hosts to stop transmitting while both hosts involved in the collision
retransmit their packets. When this occurs frequently , the throughput of the
network falls. When the number of computers in the network increases, the
chance of collisions occurring increases as well.

Broadcast Traffic Broadcast traffic is inevitable. It occurs when
computers are attempting to locate a DHCP server and when IP addresses

are being resolved to MAC addresses. When this traffic occurs, all hosts
must process it, and it competes with unicast traffic for network time on the
wire. As the number of computers increases, the amount and the frequency
of broadcast traffic also increases. This increased broadcast traffic also
decreases the effective throughput of the network.
When net\vork congestion occurs, two options exist to address it. One
is to upgrade the network infrastructure. This means upgrading all of the
network cards and changing out all of the network cable so that both items
support higher speeds. For example, you could install 10 GB network cards
and change all the cabling to support 10 GB. However, this is an expensive
option that will yield only a small improvement.
A better option is to break the larger network into a number of smaller
subnets. This helps in the follov1ing ways:
• Reduces the number of computers per subnet, thereby lowering the
chances of collisions
• Reduces the amount of broadcast traffic produced
This approach has the added benefit of isolating network problems to a
smaller area, which aids troubleshooting.

Deploying Subnetting as a Segmentation Tool
Network segmentation implemented at the Internet layer (subnetting) can
also be used to organize computers for security reasons. You already know
that when computers are in different subnets, by definition they cannot
communicate with one another. So simply placing two of four computers in
a network in one subnet and the other two computers in a different subnet,
without using routers, would effectively keep them from communicating, as
shown in Figure 8-1.
But by organizing these two sets of computers by subnet and linking the
subnets with a router, you not only can enable them to communicate, but can
now deny the communication as well, as shown in Figure 8-2.
Copy llJ t

a ri

Figure 8-1: Subnets with no router

192.168.8.2/24
Subnet A

192.168.9.1/24
Subnet B

<:3

<:3
192.168.8.1/24

192.168.9.2/24
Subnet B

Subnet A

Figure 8-2: Subnet with router

<::::>

192.168.8.2124
Subnet A

<::::>

192.168.8.1124
SubnetA

ACl:
Allow 192.168.8.2
to access Subnet A
but do not allow
192.168.8.1 to
access Subnet A

192.168.9.1/24
Subnet B

<::::>

192.168.9.2/24
Subnet B

Moreover, you can be selective about this process and allow some of
the computers to communicate with the remote subnet while denying others.
In this respect, segmentation at the Internet layer in combination with the
use of routers and access control lists (ACLs) adds a whole new level of
sophistication to the process of securing the network.
ACLs are used to control traffic that goes through a router.
You will learn more about how they work in Chapter 13,
"Configuring Routers ."

Describing the Components of CIDR
Copy llJ t

a ri

In Chapter 7, you learned that the number of bits in the network portion of the
subnet mask determines the number of possible networks, and that the number
of host bits determines the number of hosts on those subnets. You also learned
the formula to calculate these values given the numbers of bits. However, in
classful subnetting, with only the three default subnet masks available, you
can calculate those values as many times as you like and you always get the
following answers:
Network Class Number of Networks Nwn her of Hosts
Class A

256

16,777,214

Class B

65 ,536

65 ,534

Class C

16,777,21 6

254

In this section, you will learn how to create subnet masks that will yield
the number of networks you need or the number of hosts you need on
each network. You'll also be introduced to Variable-Length Subnet Masking
(VLSM) and the additional benefits that can be derived by including this
concept in the network design.

Introducing Classless Subnetting
The network or subnet that a computer resides in is a function of the
interaction of two values: the IP address and the subnet mask. In Chapter 7,
you learned that the three default subnet masks in dotted decimal notation are
as follows:
Class A 255 .0.0.0
Class B 255.255.0.0

Class C 255.255.255.0
These classes are shown in dotted decimal format. However, when we start
manipulating subnet masks within octets or bytes, we must view and work
with them at the bit level, which are shown as four binary octets.

Octets and Bytes
In classful subnetting, the subnet boundaries occur between bytes, or
on the byte boundaries. Subnetting within an octet means that the
dividing line between the subnet portion and the host portion no longer
occurs on a byte boundary. Instead, the dividing line is between bits
within a byte, such as 11100000.

When viewed at the bit level, the three masks are as follows:
Class A 11111111.00000000.00000000.00000000
Class B 11111111 .11111111 .00000000.00000000
Class C 11111111 . 11111111 . 11111111 .00000000
The network portion is where the bits are turned on (1 s), and the host
portion is where the bits are turned off (0). When a default network is
subnetted, the routers and the devices must have some way to differentiate
or identify each subnet. This is accomplished by creating a third part of the
subnet mask called the subnet portion. After this is done, conceptually the
subnet mask and the IP address that goes with it will now have three parts, as
shown here:
Network portion Subnet portion Host portion
As an example, let's assume for moment that we subnetted a network into
eight subnets. The network portion identifies the classful network from which
the subnet was derived, the subnet portion identifies the specific subnet out
of the eight possible subnets, and the host portion identifies the possible host
addresses within that subnet.
A subnet mask has 3 2 bits, and we can neither add nor subtract from that
number. This means that any bits we use for subnet identification purposes
must come from existing bits. They cannot come from the network portion,
because that portion identities the class network. Therefore, they will come

from the host portion. We refer to this process as borrowing bits (which is an
odd term to use, because we never give them back!) .

Steps to designing and implementing C/DR
To apply the principles of CIDR and subnetting to correctly size each network
and maximize the use of the IP address space, follow these steps:

Calculating the Mask for a Required Number of Subnets The number
of bits that are borrowed depends on the number of subnets required.
As you may remember from Chapter 7, the number of networks that are
possible for Class A, B, and C networks are a function of the number of
bits in the network portion (1 s) of the mask. You'll also remember that the
number of hosts possible in each network is a function of the number of
bits in the host portion of the mask (the Os). Then you probably won't be
surprised to learn that the number of subnets is a function of the number of
bits in the sub net portion (additional 1s added to the network portion).
Consider this example: We have a Class C network that we would like to
subnet for better performance. The network ID is 192.168.5.0 (with the
network portion comprising the first three octets), and the subnet mask is
255.255.255.0 (with each octet holding a value of 255, indicating a part of
the address that is the net\iVork portion), as shown here:
192.168.5.0
255 .255.255.0
First, let's look at the subnet mask in binary because we already know we
need to work with it on the bit level:
11111111 . 11111111 . 11111111 .00000000
We have 24 bits in the network portion and 8 bits in the host portion. So
how many bits should we borrow if\iVe want 16 subnets? The same formula
to calculate the number of networks (2n = number of networks) can also be

used to calculate the number of bits to borro\v to get a required number of
subnets.

What Do I Plug In "Again?
If you are calculating the mask for a required number of subnets, you
put in the number of bits you are borrowing or the subnet bits. If you
are calculating the mask for a required number of hosts, you put in the
number of host bits that will remain at the end of the mask.

When used for this purpose, the formula becomes 2n = number of subnets,
with n being the number of bits borrowed. So if we plug the number of
subnets that we need (1 6) into the formula, we get 2n = 16. By counting up
in powers of 2 until we get to 16 (2, 4, 8, 16), we discover that 2

4

=

16.

Counting in Powers of 2: It's OK to Use
Your Fingers!
Counting up in powers of 2 is a skill you should work to become
comfortable doing. Many even count on their fingers, starting with 2
as the first finger, then 4 for the second, and so on. Just keep doubling
the number as you add a finger . When you arrive at the number of
networks or the number of hosts you are trying to supply, the number
of fingers will tell you the number of bits to add to the mask (in the
case of networks) or the number of bits to leave as zeros at the end of
the mask (in the case of hosts).

So borrowing 4 bits will yield the desired number of subnets. Once we
know the number of bits required, these bits are added to the 24 bits that

are already there to identify the Class C network we started with. After we
do that, the mask looks like this in binary :
11111111 . 11111111 . 11111111 . 1111 0000
If we convert this to dotted decimal, the new mask that divides the
192.168.5.0 network into 16 subnets is as follows :
255 .255.255.240
The 240 in the last octet is simply the value of that octet in binary
(1111 0000), converted to decimal. If we also wanted to know the number
of computers that could be on each one of those 16 subnets, we could
determine that in the same fashion we did in Chapter 7. That is, plug the
number of host bits left in the mask (four Os) into the formula for hosts (2n
4

- 2 =number of hosts) and we would find that 2 - 2 = 14. So each network
would have 14 hosts. There are actually 16 IP addresses in each subnet, but
remember that two of these addresses (network ID and broadcast address)
cannot be assigned to any hosts.

CIDR Notation: It's Nothing New!
One of the vexing issues that have faced network designers and
engineers is fitting all the IP address and subnet masks onto a network
diagram. CIDR also introduced a new way of notating the IP address
and subnet mask. Instead of writing out both values like this

192.168.5.5
255.255 .255 .0
CIDR notation allows you to write the IP address and then a forward slash
followed by a number that represents the number of bits in the subnet mask. In
the case of the preceding IP address, because there are 24 bits in the sub net mask
of255.255.255 .0, we could write this address as 192.168.5.5/24.

Calculating the Mask for a Required Number of Hosts In some cases,
the design requirement is in terms of subnet size rather than number of
subnets. In this example, we have a Class B network that \ iVe would like
to subnet in such a way that each subnet has at least 35 IP addresses In
the example network, the / 16 indicates that there are 16 bits in the subnet
mask:
172.18.0.0/16

The mask as it now stands is as follows :
11111111 . 11111111 .00000000.00000000

If we need each subnet to have at least 35 IP addresses, we will have to
leave enough Os, or host bits, on the end of the mask to yield at least 35
when plugged into the formula 2n - 2
the required number, \ iVe get this:

=

number of hosts. So if we plug in

2n - 2 = at least 35

If we count up in powers of 2 until we reach a number that is greater than
35 after subtracting 2, that will be the number of host bits to leave at the
end of the mask. Once we know that, we can simply tum on all other bits
(1 s) and we have our mask. By counting up in powers of 2 (2, 4, 8, 16, 32,
6

64), we find that 2 - 2
the end of the mask :

=

62. That means there needs to be 6 host bits on

11111111 . 11111111 . 11111111 . 11 000000

When we convert that to dotted decimal format, the subnet mask used with
a class B address such as 172.18.0.0 to yield at least 35 IP addresses per
subnet would be 255.255 .255 .192 (11000000 = 192).

Determining the Boundaries of Each Subnet When it comes time for
actually placing the IP addresses on the devices either manually or by
creating a scope in DHCP, you must know where each subnet begins and
ends and which IP addresses cannot be used (that is, which addresses in
each subnet are the network ID and the broadcast address).

Creating a scope in DHCP is discussed in Chapter 7.

To illustrate this procedure, let's work with an example that yields a small
number of subnets. (The concepts are the same when you need to yield
thousands of subnets.) In this example, let's suppose that your boss has
already determined the subnet mask. He has given you the following Class
C network and subnet mask :
192.168.6.0255.255.255.128
First, can you determine how many subnets this will give you? You can
use the same formulas to determine that. You have a Class C network,
which tells you that the default mask was 255.255 .255.0, and you can see
that all that has been added is 128 in the last octet. So ho\v many bits were
"borrowed" to make this 128 in decimal? Well, think about the value of
each bit in the 8-bit pattern for 128 as shown here:
128

64

32

16

8

4

2

1

l

0

0

0

0

0

0

0

As you can see, it took only one "borrowed" bit to make 128. If we
plug that into our formula for the number of networks (2n

=

number of

1

networks), we get 2 = number of networks. Because any number to the
first power is itself, that means we will get two subnets if we use the
255 .255 .255.128 mask with a Class C network such as 192.168.6.0. So
where do these two networks begin and end, and which addresses are off
limits?
Each subnet begins \Vith its network ID and ends with its broadcast
address, and all IP addresses in between the two are in the same subnet and
are legitimate to assign to hosts. Therefore, if you find your network IDs
and your broadcast addresses, the IP addresses between the two are in the
same subnet. The following sections will show how this is done.

Finding Your Network IDs The first network ID will always be the
classful network you are subnetting. In this case, the first network ID is
192.168.6.0. To determine the next network ID, you must identify a value
that is sometimes called a block size (Cisco terminology) and sometimes
called an interval (Microsoft terminology). This value is always the value
of the last bit in the mask. In this case, that value is 128.

Warning: Don't Add Bit Values Together
to Determine the Interval!
When you are determining the value of the interval (or block size), it
will be equal to the value of the single far-rig ht bit.
You do not add together the entire bit values in the octet. For example,
consider this mask in binary:
11111111 .11111111 . 111 00000 00000000
0

The far-right bit in the example 111 00000 is the third bit from the left
and is worth 32 :
128

64

32

16

8

4

2

1

I

I

I

0

0

0

0

0

You do not add together all of the bit values in the octet (1 92 + 64 + 32
= 224).

Increment the number in the octet where you stopped borrowing bits, and
that will give you the next network ID. In this case, that means you are
incrementing from 192. 168.6.0 upward by the value of 128, so the other
network ID is 192.168.6.128. We now have our two network IDs:
192.168.6.0
192. 168.6. 128

Make Sure You Increment Your Interval
in the Correct Octet!
The octet in which you increment the interval is not always the first
octet where you borrowed bits. Consider the following network:

172.16.0.0/27
With a 27-bit mask, it means the mask in binary is as follows :
11111111 .11111111 .11111111 .11100000000
Therefore, the octet where you stopped borrowing was not the third octet but the
fourth octet. So you increment the interval in that octet to determine the network
IDs. In this case, the interval is 32, so the first three network IDS are as follows :
172.16.0.0/27172.16.0.32/27172.16.0.64/27
They are not these:
172.16.0.0/27172.16.32.0/27172.16.64.0/27

Finding Your Broadcast Addresses Each broadcast address is one
number less than the next network ID or the next classful network,
whichever comes first. In this case, for the 192. 168.6.0 network, the
broadcast address (one less than the next network ID or the next classful
network, whichever comes first) will be 192.168.6.127 (192.168.6.1281 = 192.168.6.127). For the 192. 168.6. 128 network, the broadcast address
(one less than the next network ID or the next classful network, whichever
comes first) will be 192.168.6.255 (192.168.7 .0 -1 = 192.168.6.255).

Where Did That 255 Come From?
It is important that you understand that 1 less than 1.0 is 0.255. Make
note of the following consecutive IP addresses:

192.168.6.2531 92 .168.6.254192.168.6.255192.168.7 .0
Notice that when you add 1 to 255, it is 256, but in dotted decimal
notation there is no 256. That means you increment the next left-hand
position by 1 and go back to 0 in the current position, just as you would
if you were adding 1 to 19 to get 20.
Therefore, when your next network ID is x.x .x.O, the broadcast address
will be x.x.x - 1.255 . For example, if the next network ID is
192.168.55.0, the broadcast address for the previous network will be
192.168.54.255 .

Identifying the IP addresses in the subnet Now that we know the two
network IDs and broadcast addresses, we have the following ranges of IP
addresses:
Network 192.168.6.0 is from 192.168.6. 1 to 192.168.6. 126.
Network 192.168.6.128 is from 192.168.6. 129 to 192.168.6. 254.
IP Addresses between the two are in the same subnet.

So Why Is This All So Important?
One of the skills you need is the ability to recognize when two IP
addresses are not in the same subnet. Sometimes it' s obvious, as with
these two addresses:
10.6. 5.4/8 and 192.158.6.3/24
But sometimes the only way you can tell is by performing the
operations we just discussed. Take a look at these two addresses:
192.168.6. 126/25 and 192.168.6. 129/25
These IP addresses are only three addresses apart. Wouldn't you be
tempted to say they are in the same network? Well, these two addresses

come from the network we just finished subnetting into two networks.
The two ranges that we got were as follows:
Network 192.168.6.0 is frotn 192.168.6.1 to 192.168.6.126.
Network 192.168.6. 128 is from 192.168.6.129 to 192.168.6.254.
Notice that one address is in the first subnet, and the other is in
the second. So, yes, this is all very important if you were trying to
determine why these two computers could not ping one another!

Understanding VLSM
Variable-Length Subnet Masking (VLSM) is the use of subnet masks of
vary ing lengths in the network design. It is this concept that really allows you
to leverage the power of "right sizing" each subnet with as little waste of IP
addresses as possible. In its simplest form , as shown in Figure 8-3 , VLSM
allows each interface on the router to host a network with a different mask
length. In this example, a Class A, Class B, and Class C network are located
on interfaces EO, E2, and E 1, respectively.
Figure 8-3: Simple VLSM
E2
172.16.0.0/16

E1

~..,

192.168.2.0/24 ___, - -

Router

EO
10.0.0.0/8

However, to really save addresses, you must use subnet masks that are
designed to meet the size needs of each interface without wasting addresses.
Consider the following design requirements presented to you by your boss in
Figure 8-4. Your job is to determine the network IDs and subnet masks for
M t

al co

dt

""'

d

ora

each interface that would waste the fewest addresses. Moreover, you must use
networks derived from the 172.16.0.0/16 network.

Figure 8-4: Network design
111&-

-~

R2
Switch

E2
Connection to R2
(2 IP addresses)

R1

--

EO
435 computers

111&-

El

E3
1912 Computers

238 computers

Switch

Switch

First, determine the mask for each interface that when used with the
172.16.0. 0 network ID provides the smallest subnet possible to meet the
requirement of each connection:

EO 435 Computers You need 2n- 2 = at least 435, so count up in powers
of2 until you meet or exceed 435 (2, 4, 8, 16, 32, 64, 128, 256, 512). That's
9 bits. Leave nine Os on the end of the mask, tum all other bits on, and you
have 255.255 .254.0 (or /23).
El 238 Computers You need 2n- 2 = at least 238, so count up in powers
of 2 until you meet or exceed 23 8 (2, 4, 8, 16, 32, 64, 128, 256). That's 8
bits. Leave eight Os on the end of the mask, tum all other bits on, and you
have 255.255 .255.0 (or /24).
E2 Connection to R2 (Two IP Addresses) First, realize that on a pointto-point connection to another router, you have a network where you need
only two IP addresses. You need 2n- 2 = at least 2, so count up in powers
of 2 until you meet or exceed 2 (2, 4). That's 2 bits. Leave two Os on the
end of the mask, tum all other bits on, and you have 255.255.255.252 (or
/30).

M t

al co

dt

""'

d

ora

Why Didn't We Stop at 1 Bit?
We need two addresses for the connection to R2. The reason we did not
1

stop at 1 bit even though we have two addresses is that 2 - 2 = 0. The
network would have two addresses, but they would be the network ID
and the broadcast address, and there \vould be no addresses left for the
interfaces on the routers!

E3 1,912 Computers You need 2n- 2 = at least 1,912, so count up in
powers of 2 until you meet or exceed 1,912 (2, 4, 8, 16, 32, 64, 128, 256,
512, 1024, 2048). That's 11 bits. Leave 11 Os on the end of the mask, turn
all other bits on, and you have 255.255.248.0 (or /2 1).
Now we know the masks required for each interface. For each of those
networks, we could pick from a number of different IP address ranges,
because when you apply those masks, multiple networks of that size will be
possible. The number of choices possible for each of the masks we calculated
to meet the requirements are as follows :
Network !0
ond Mask

Number of
Networks

Bits
Calcuhning Bits
Borrowed Borrowed

C.lculatiog Number of
Networks

172.16.0.0123

128 networks

7

23- 16 = 7

27 = 128

172.16.0.0124

256 oetwork.s

8

24 -1 6=8

28 = 256

172. 16.0.0130

32.768
networks

15

30- 16=15

z15 = 32.768

I 72.16.0.0121

32 networks

5

21- 16 = 5

25 = 32

So we need four slices of the 172.16.0.0/16 pie. It's best to start with
the largest slice and then move to the next largest and so on. The /21 mask
provides the fewest number of networks, but they are the largest networks (or
slices of the pie). So first let's look at some of the possible /2 1 network IDs.
The /21 network IDs are the largest slices because each slice
(or network) is capable of 2

11

-2 or 2,047 IP addresses. The

other networks, or slices, are smaller (/24 = 2

8

-

2, or 254 IP

addresses ~

9

2

/23 = 2 - 2, or 511 IP addresses, and /30 = 2 2, or 2 IP addresses).

Let's review this. With a /21 m ask against a /1 6 classful network, we
borrowed 5 bits (21 - 16). That means we borrowed into the third octet. Our
interval is 8 ~ the value of the far-right bit is shown here in binary:
11111111 .11111111 .11111000.00000000.
So the first network ID is our starting classful network ID (192. 168.0.0),
and then we increment by 8 in the third octet, as shown here:
172.16.0.0 172.16.8.0 172.16.16.0
This continues on until the last one, which is as follows :
172.16. 248.0
Let's use the first one for the E3 network: 172.16.0.0/2 1.
Now we need a /23 slice. We will start at 172.16.8.0 because we have
already used all the addresses up to that point for E3. Because we are using
a /23 instead of a /21 , our interval will not be 8. It will be 2, the value of the
far-right bit, as shown here:
11111111 .11111111 .1111111 0. 00000000.
We still have borrowed into the third octet, however, so that will be where
we increment.
If we look at some of the /23 network IDs starting from 172.16.8.0 on, we
get this:
172.16.8.0 172.16. 10.0
And so on, until the last one, which is this:
172.16.254.0
Let's use the first one for the EO network: 172.16.8.0/23.
Now we need a /24 slice. We will start at 172.16. 10.0 because we have
already used all the addressees up to that point for E3 and EO. Because we are

using a /24 instead of a /23 , our interval will not be 2. It will be 1, the value
of the far-right bit, as shown here:
11111111 .11111111. 11111111.00000000.

We still have borrowed into the third octet, however, so that will be where
we increment.
If we look at some of the /24 network IDs starting from 17 2.16 .10. 0 on, we
get these:
172.16.10.0 172.16.11 .0
And so on, until the last one, which is this:
172.16.255.0
Let's use the first one for the El network: 172.16.10.0/24.
Finally, we need a /30 slice. We will start at 172.16.11 .0 because we have
already used all the addresses up to that point for E3 , EO, and El. Because
we are using a /30 instead of a /24, our interval will not be 1. It ,;vill be 4, the
value of the far-right bit, as shown here:
11111111 .11111111 .11111111 . 111111 00.

We still have now borrowed into the fourth octet, so that will be where we
increment.
If we look at some of the /30 network IDs starting from 172.16.11 .0 on, we
get these:
172.16.11 .0.0 172.16.11.0.4
And so on, until the last one, which is this:
172.16.255.252
Let's use the first one for the E2 network: 172.16.11 .0/30.
By choosing the slices in the order of largest to smallest and keeping them
as numerically close as possible, we left the largest possible pieces of the
172.16. 0. 0116 network for future expansion. As a matter of fact, we used only
the 172.16.0.0/2 1 network and a part of the 172.16.8.0/21 network! Now we
can label the diagram with the address ranges as shown in Figure 8-5 .

M t

al co

dt

ttY: d

ora

Figure 8-5: Network solution

--

- - R2

E2
172.16.11.1/30-172.16.11.2/30

EO
172.16.8.1/23-172.16.9.254/23

--

El
172.16.10.1/24-172.16.10.254/24

R1

E3
172.16.0.1/21-172.16.7.254121

Summarization
Now we can talk about summarization. Look at Figure 8-5 . When router
Rl advertises (informs) R2 about the routes in its routing table, the route
advertisement could include all of the networks we just created. If that were
the case, R2's routing table would include these networks :
172.16.0.0/21172.16. 8.0/23 172.16. 10.0/24172.16. 11 .0/30
These networks end in 0 because they started at the
beginning of a parent subnet. If we select the second /30
network in the parent 172.16 .11.0 subnet, the networkiD for
the network between R1 and R2 would be 172.16. 11.4/30.

As you learned earlier in the "Unmanageable Routing Tables" section,
anything we can do to reduce the number of routes in a routing table will
enable the router to read the routing table faster and make faster routing
decisions. We can use network summarization to do this. Because we
subnetted the 172.16.0.0/16 network to begin with, we could configure Rl to
advertise the 172.16.0.0/16 network to R1 , and then any packets destined for
any subnet of 172.1 6.0.0/16 would be sent to Rl. Then Rl could make the
routing decision based on its more specific knowledge of the subnets.

The Essentials and Beyond
Classless Inter-Domain Routing (CIDR) addresses the exhaustion of
the 32-bit IPv4 address space by introducing flexibility to network
sizing and by reducing the number of public IP addresses required by
organizations. CIDR also reduces the size of unmanageable routing
tables by using summarization. When subnetting is included in a
network' s design, it can improve both performance and security . CIDR
is implemented by manipulating the subnet mask. Variable-Length
Sub net Masking (VLSM ) is the use of sub net masks of varying lengths
in the network design . Summarization is the aggregation of subnets
to the classful network of which they were commonly derived and is
used in router adverti sements to reduce the number of networks in the
routing table, thereby improving router performance.

Additional Exercises
1. Using Figure 8-6 and the network ID of 158.59.0.0/16, determine
the mask and network ID for each interface that provides the smallest
subnet possible to tneet the requirement of each connection. Then list
the range of addresses for each network.

Fi&ure 8-6: VLSM exercise

.... _
-~

R2

E2
Connection to R2
(2 IPAddresses)

EO

-Rl

El

60 Computers
E3
427 Computers

183 Computers

2. For each of the following IP addresses, identify the network ID of the
network in w hich it lies.

A. 10.99.57.15/24
B. 192.168.6.9/30
C. 17 .69.48.3/15
D . 56.57.58.60/22
E. 172.156.30.14/27

Review Questions
1. Which of the following is not an issue resulting from the design
flaws of classful IP addressing?
A . Inefficient use of the of the Class C network address space
B. Exhaustion of the 32-bit IPv4 address space
C. Unmanageable routing tables
D. Exhaustion of the Class B network address space
2. Which of the following issues resulting from the design flaws
of classful IP addressing was only partially addressed by CIDR?
A . Inefficient use of the of the Class C network address space
B. Exhaustion of the 32-bit IPv4 address space
C. Unmanageable routing tables
D. Exhaustion of the Class B network address space
3. In which IP address class was the wasted address problem most
severe in classful IP addressing?
A. Class A
B. Class B
C. Class C
D. Class D

4. Which design feature of CIDR helps to make routing tables
more manageable?
A. Classless subnetting
B. NAT
C. Network summarization
D. Network pruning
5. Which of the following issues resulting from the design flaws
of classful IP addressing are addressed by NAT?
A. Inefficient use of the Class C network address space
B. Exhaustion of the 32-bit IPv4 address space
C. Unmanageable routing tables
D. Exhaustion of the Class B network address space
6. How does breaking a larger network into a number of smaller
subnets increase performance?
A . Reduces the number of computers per subnet, thereby
lowering the chances of collisions
B . Increases the number of computers per subnet, thereby
reducing the chances of collisions
C. Increases the amount of broadcast traffic produced
D. Increases the number of computers per subnet, thereby
reducing the broadcast traffic
7. Which of the following subnet masks is equivalent to /20?
A. 255.255.224.0
B. 255 .192.0.0

C. 255 .255 .240.0
D . 255.255.255.128

8. Which mask would yield at least 39 subnets?
A. 172.16.0.0/17
B. 172.1 6.0. 0/18
C. 172.1 6.0.0/19

D . 172.16.0.0/22

9. Which mask would create subnets large enough for 78 hosts
without wasting IP addresses?
A. 192.168.5.0/25
B. 192.1 68.5.0/27
C. 192. 168.5.0/28

D. 192. 168.5.0/29

10. What is the range of IP addresses for the network 172.16.8.0/
23?
A. 172. 16.8.1/23-172.16.8.254/23
B. 172.16.8. 1/23-1 72.168.9.254/23
C. 172.168.8. 1/23-1 72.168.11.254/23
D . 172.168.0. 1/23-172.168.3 1.254/23

Chapter 9
Media
One of the first things done when setting up a network of routers, switches,
and host devices is the creation of connections between the devices. This
connection is done via media. The media can be either bounded (cables) or
unbounded (\vireless).
When data is transmitted across media, operations are occurring at the
Network Interface layer. This layer includes both the physical implementation
(cable type, wireless frequency, connectors, and so on) and the
communication method employed by the media (Ethernet, 802.11 , Frame
Relay , PPP).
This chapter covers all aspects of media with a particular emphasis on
cabling, as bounded media is usually used to connect infrastructure devices
such as switches and routers. Moreover, the management of infrastructure
devices is typically done via wire, and not wirelessly in accordance with
security best practices.
Specifically, this chapter covers the following topics:
• Selecting the proper media type
• Understanding cabling
• Describing wireless standards

Selecting the Proper Media Type

When choosing a media type, the main characteristics to consider are as
follows:
• Bandwidth
• Security
• Convenience
• Cost
In the past, a trade-off existed between convenience/cost and bandwidth/
security . If you wanted low cost and convenience, you could deploy wireless
and give up security and bandwidth. If you needed security and bandwidth,
you sacrificed convenience and cost. That largely remains true, but wireless
has made huge strides in both security and bandwidth. It may never be fast
enough or secure enough for a network backbone, but it could serve a larger
role at the distribution layer at some point.
Cisco defines three layers (access, distribution, and core) of
devices in the enterprise network. This model is discussed in
more detail at the end of Chapter 10, "Network Devices."

In this section, the media types are compared and contrasted with regard to
these characteristics. Each media type can have a useful role in the enterprise.
By taking advantage of the unique strengths of each in the network design,
the characteristics can be delivered in the appropriate mix for every scenario.

Bandwidth
Wired media delivers much more bandwidth at this time than any type of
wireless. Wireless rates have gone from 54 Mbps to 150 Mbps using 802. lln,
which is certainly an impressive gain.

You will learn more about 802.11 n in the section
"Understanding 802.11 Amendments" later in this chapter.

But wired media, which can be commonly found running at 100 Mbps and
1 Gbps in the enterprise, will probably be operating in data centers at between
40 and 100 Gbps in the next five years. The IEEE 802.3ba Task Force is
developing this gear and cabling as we speak.
The demand for this amount of bandwidth is coming from the types of
applications that run in the enterprise and the need to continue the migration
of LANs from 100 Mbps to 1 Gbps to the desktop. These megaspeeds will
be occurring in the data centers and on the backbone, not to the desktops.
Nevertheless, 1 Gbps to the desktop is almost 10 times \Vhat wireless can
currently deliver at its best to the desktop.

Security
Wired media is considered more secure than wireless because the media is
bounded. If you control the physical access to the cabling, you can control
access to the transmission, which cannot be done with wireless. With
\Vireless, transmissions can be captured by anyone with a transceiver. With
wireless transmission, it must be assumed that privacy does not exist and that
any data that is sensitive must be encrypted.
In the early years of 802.11 , wireless was avoided because it was thought
that it could not be secured.
The IEEE standard for wireless LANs is called 802.11. You
\¥ill learn more about it and its amendments in the section
"Understanding 802.11 Amendments ."

But over time, administrators realized that not only did users demand
this service, but a "no wireless policy" became more difficult to enforce as
rogue access points began to show up in the network, not placed there by
sophisticated hackers but by the users themselves !
Rogue access points are access points not under your control
or management. You will learn more about them later in this
section.

Today wireless systems under your control can be secured and monitored
with the same level of confidence as wired networks. However, there are still
wireless security threats that are unique to its operation. These threats are
detailed throughout the rest of this section.

Ease of Data Collection
When data is transmitted wirelessly, there is very little you can do to control
vvho can receive it. You can use semidirectional antennas to shape the
direction of the transmission, and you can control the range of transmission.
However, someone who has a high-powered antenna connected to a device
may still be able to receive your transmission. Moreover, in many cases
wireless networks need to be available in all directions from the access point.
Access points are devices that can transmit and receive data
in radio form and can connect to the wired network through
a cabled network interface.

Some wireless gear makers have given many the false impression that
"hiding" the Service Set Identifier (SSID), or network name, from the signal
that is used to announce the presence of the network (called a beacon frame)
can stop hackers from connecting to the network because when this is done,

the hacker must have a wireless profile created specifying the SSID. But the
hacker doesn't need to be connected to the network to capture and view the
packets.

Wireless Packet Captures
You may remember in Chapter 7, uClassful IP Addressing," that you
looked at a network capture to identify IP addresses and MAC
addresses. That capture was done with a wired capture tool , but
wireless tools also exist that capture wireless packets. By viewing
these raw data captures, the SSID can be seen in all frame types other
than the beacon frame , and MAC addresses of stations that are on the
allowed list can be viewed on any frame that these stations transmit.

Moreover, if a hacker is even casually interested in connecting to the
network, it is simple to locate the SSID in the transmissions going between
the access point and legitimate users. After determining the SSID, the hacker
can create a wireless profile to connect to the hidden network.
Even some administrators think that creating a list of allowed MAC
addresses and disallowing all other MAC addresses is an effective way to
control access. But the hacker can use the same method used to learn the
SSID to learn an allowed MAC address. By capturing some packets and then
recognizing a successful authentication sequence in the capture, a hacker can
learn an allowed MAC address. Then he can change his MAC address to the
allowed MAC address and connect.

Changing Your MAC Address
At one time, changing your MAC address required advanced
knowledge of the Registry on a Windows computer, which is

dangerous to edit if you don't know what you are doing . Now it is
quite simple to do this in the properties of your network card in Device
Manager. On the Advanced tab of the properties of the network card,
the desired MAC address can be entered. When you use either method
to change your MAC address, you are not actually changing the address
on the card, which is burned in~ you are simply changing what the
computer places in the frames that it sends out.

The bottom line is that even if you have an effective security solution that
prevents a hacker from connecting to your wireless network, he can capture
your packets. The only way you can make the transmission unavailable to
hackers is to also make it unavailable to your users.

Rogue Access Points
As noted earlier, rogue access points are those that you do not control
and manage. There are two types: those that are connected to your wired
infrastructure and those that are not. The ones that are connected to your
\¥ired network present a danger to your wired and wireless network. They
may be placed there by your own users without your knowledge or they may
purposefully be put there by a hacker to gain access to the wired network.
In either case, they allow access to your wired network. Wireless Intrusion
Prevention System (WIPS) devices are usually used to locate rogue access
points and to alert administrators of their presence.
A WIPS is a radio-equipped device that scans the wireless
area looking for other access points. It can notify you of
other APs in the area.

Rogue access points that are not connected to your wired infrastructure are
usually used as a part of a highjacking attack, which is discussed next.

Highjacking Attacks
A highjacking attack is one in which the hacker gets one or more of your
users' computers connected to his network for the purpose of a peer-to-peer
attack.
A peer-to-peer attack is one that occurs between two
computers that are on the same subnet. The hacker identifies
open ports and exploits weak passwords to gain control of
the c01nputer.

The attack begins \Vith the introduction of an access point that is under the
hacker's control. This access point will be set to use the same network name
or SSID as your network, and it will be set to require no authentication (which
is called an open network).
WLANs can employ either open or shared authentication.
Open authentication tneans yo u can connect to the network
without a password . With shared authentication, you need
a password .

Moreover, this access point will be set to use a different channel than the
access point under your control, as shown in Figure 9-1 .

Figure 9-1: Rogue access point 1

s

u,topA
Coonecled to Corpnec on Chanlld 6

RogutAP

SSIDCotpN<t
(l'lanoeiiO

&;

eo,.,,., AP
SSID <.o"'N"
(~Mtl6

l.ap1098

<onll«ted to ~ on Cbannel 6

LOOICO C

ConAt<ted •o (olpnet Oft Channtl 6

Copy Ill t

a ri

To understand how the attack works, you must understand how wireless
stations (laptops, PDAs, and so on) choose an access point with which to
connect. It is done by SSID and not by channel. The hacker will 'jam" the
channel on which your access point is transmitting. When a station gets
disconnected from an access point, it scans the area for another access point
with the same SSID. The stations will find the hacker's access point and will
connect to 1t.
Once the station is connected to the hacker's access point, it will receive an
IP address from a DHCP server running on the access point, and the user will
now be located on the same network as the hacker. At this point, the hacker is
free to commence a peer-to-peer attack. The entire process is shown in Figure
9-2.

Figure 9-2: Rogue access point 2

s

RogueAP
SSID CorpNet
Channel 10

laptop A
Conneaed to Corpnet
on Channel 10

Laptop B
<:onneaed to Corpnet
on Channei!O

(<~)

CompanyAP
SSID CorpNet
Jammed!

s

Laptop D
Conneaed to Corpnet
on Channel lO

laptop C
Connected to Corpnel
on Channel I 0

Wired networks also suffer from security problems, but not of the types
listed here, which are unique to the wireless domain. In summation, when
security is important, wired networks are more secure.

Convenience
When it comes to convenience, wireless media wins hands down. Users
love the ability to roam around and still use the network. Just as wireless
media will probably never equal wired media in bandwidth or security, wired
networks will never be as convenient for users as wireless networks.
Copy llJ t

a ri

In a time of reliance on mobile devices, plugging into a network will
increasingly feel restrictive to users. This may drive continued development
of wireless security and bandwidth to satisfy the needs of the mobile worker.

Cost
From a cost standpoint, deploying a wireless LAN is a less-expensive
alternative. Deploying wireless results in the follovving:
• Elimination of cabling costs
• Elimination of access s\vitch costs
• Reduction in installation costs
• Reduction in maintenance costs
In many cases, the hardware and installation costs of a wireless LAN
serving the same number of users can be as little as 20 percent of the cost of
a wired LAN. Add to that the ability to pick up the network and take it with
you lock, stock, and barrel at any time and wireless provides a lot of cost
savings!

Understanding Cabling
Cabling is inescapable in networking. It is critical to understand cabling to
correctly connect Cisco routers, switches, and the hosts they serve. Moreover,
you must understand the security, performance, and compatibility issues
surrounding the selection of cables.
This section provides the characteristics of various cable types, along
with a description of each type and the strengths and weaknesses of each.
Finally, the factors that determine the type of cable to use between devices are
explained.

Describing Cable Behavior and Characteristics
Cables come in a variety of thicknesses and materials and can operate using
either electrical or optical signals. Cables can differ in the following ways:
• Transmission technology
•
•
•
•
•

Maximum length
Susceptibility to radio frequency interference (RFI)
Susceptibility to electromagnetic interference (EMI)
Susceptibility to eavesdropping
Half-duplex or full-duplex (with twisted-pair cabling)

• Wiring pattern (with twisted-pair cabling)
• Cost
In the "Describing Physical Implementations" section, cable types are
described in terms of these characteristics, and you will learn the factors that
determine the type of cable to use between various device types. But first you
need to understand some important behaviors and characteristics of cabling:

Attenuation When an electrical signal travels down a wire or an optical
signal travels down a glass tube as it does in fiber-optic cabling, the
signal meets resistance and loses energy. This loss of energy translates to
a weakening of the signal. The resistance that a cable introduces to the
signal can be measured in ohms. When the signal becomes too weak, the
receiving device is unable to successfully tell the difference between an
on (1) signal and an off (0) signal. If the receiver misreads even 1 bit, the
packet will not pass the frame check sequence (FCS) and will be dropped.
Even if somehow it \Vas to pass FCS, the misread bit would result in an
entirely different bit pattern, resulting in garbled data.
The weakening of the signal as it travels down the cable is called
attenuation. All cable types have a maximum cable length. The maximum
length describes the longest length of cable that can be run without
suffering from attenuation. This is one of the considerations when
choosing a cable type. A device called a repeater can be introduced to

extend a cable run, but if you think about it, it really doesn't alter the limits,
it simply ties together two compliant lengths by amplifying the signals.

EMI Sources of electromagnetic interference are present in most
situations. These include electric power transmission lines, electric motors,
thermostats, and so forth. The devices we use create this EMI constantly .
Anywhere electrical power is being rapidly turned off and on is a potential
source. The question is whether it is enough to interfere with the electrical
communication in a cable.
If the EMI is very strong, it can corrupt the data in the cable. In these cases,
it is advisable to use shielded cable, which adds a layer of protection. You
will learn more about shielded cable in the section "Describing Physical
Implementations."

RFI Radio frequency interference (RFI) causes the same problems as EMI;
it just comes from a different source. These problems are caused by strong
radio signals. The solution is the same as for EMI, which is shielding. RFI
is usually more of a problem in a wireless network, as you will learn in the
last section of this chapter.

Eavesdropping Eavesdropping occurs when a hacker physically taps into
the cable and connects a device to the cable run. When possible, hiding
cabling in walls, under carpets, or in other enclosures reduces the
possibility of this happening.

Describing Physical Implementations
There are three main types of cabling used in networking: coaxial, twistedpair, and fiber-optic. Each type has strengths and \iVeaknesses. Each type
can be the appropriate type for a given situation. None is correct in every
situation.

Coaxial Cable

Coaxial cabling is familiar to anyone who has had cable TV. It has either
a solid copper wire or a stranded copper wire in the center and comes in
two forms. The two differ in rigidity , cable length, and cost. Both types are
impervious to RFI and EMI because of the braided shielding that is used in
them . They use Ethernet at the Network Interface layer, and their physical
implementations are referred to as 10Base2 and 10Base5. Both operate at 10
Mbps. Coaxial can be susceptible to eavesdropping, so physical security of
the cabling is a consideration. Coaxial cabling is less expensive than fiber
cabling, more expensive than unshielded twisted-pair (UTP), and equal to the
cost of shielded twisted-pair (STP).

IEEE Shorthand
When describing Ethernet cable types, a system called IEEE
shorthand is used to describe the speed, cable type, and cable size. The
first number indicates the speed in Mbps. Then the word Base refers
to the transmission type, which is baseband (as opposed to broadband).
The last number indicates the cable type or cable size. Some examples
ofthe final value are as follows:
2

The smaller of the two coaxial cables

5

The larger of the coaxial cables

T

Twisted-pair

F

Fiber

10Base2 (Thinnet) Thinnet coaxial is the more flexible of the two
implementations because of its use of stranded copper wire, but it will not
go as far without attenuation. It also costs less than thicknet. Thinnet can
go about 185 meters. The connectors that are used with 10Base2 are called
BNC connectors and usually connect to each station with aT -connector.

10Base5 (Thicknet) Thicknet coaxial is the less flexible of the two
implementations because of its use of a solid copper wire, but it will go
farther without attenuation. It also costs more than thinnet. It can go about
500 meters. 10Base5 transceivers are connected to cable segments with
either N-connectors or via a vampire tap. A vampire tap clamps onto the
cable, forcing a spike to pierce through the outer shielding to contact the
inner conductor while other spikes bite into the outer braided shield.

Both 10Base2 and 10Base5 operate in a bus topology. This means that
each end of the network must use a connector that is terminated. It is not
very likely that you \¥ill encounter any ne\;v network implementations using
coaxial, but you may find some existing ones.

Twisted-Pair Cable
Twisted-pair cabling is probably the type of cabling that you will encounter
most often. It uses four pairs of wires that are twisted or braided inside the
outer covering. The twisting mitigates a behavior called crosstalk that occurs
when the twisting is not in place. Crosstalk is interference of signals on one
wire with those on another wire.

There are several types of twisted-pair, and all come in either shielded
(STP) or unshielded (UTP) varieties. The shielded versions cost more and
should be used only when EMI or RFI is present, as nothing else is gained
by using it. Twisted-pair cabling uses an RJ-45 connector, which resembles a
telephone connector, only slightly larger. Twisted-pair can be susceptible to
eavesdropping, so physical security of the cabling is a consideration. UTP is
less expensive than coaxial, while STP is equal to the cost of coaxial. Both
types of twisted-pair are less expensive than fiber.
Twisted-pair uses Ethernet at the Network Interface layer and has a
maximum cable length of 100 meters. The following are some of the most
common types:
lOBaseT operates at 10 Mbps.

lOOBaseT operates at 100 Mbps and is the most common.
lOOOBaseT operates at 1 Gbps and will soon be the most common.
lOOOOBaseT operates at 10 Gbps and is already becoming common as a
connection between infrastructure devices.
Twisted-pair cabling also is capable of two types of transmission: halfduplex and full-duplex, as discussed next.
Half-Duplex Communication Cables are somewhat like roads. They can
operate two ways (in two directions), or they can operate one-way, in one
direction, part of the time and one-way, in the other direction, part of the
time. Half-duplex describes a cable that can send or receive, but cannot
do both at the same time. Half-duplex cables have two pairs of wires
but use only one of the pairs and in only one direction at a time. Some
characteristics of half-duplex are as follows:
• Uses CSMA/CD to detect collisions
• Uses one pair of wires and can send or receive at only one time, not
both at once
• Is the only type of connection that a hub is capable of using
Full-Duplex Communication Full-duplex transmission uses both pairs of
wire, one dedicated to sending and the other to receiving. It uses a pointto-point connection between the two devices. In this type of connection,
there is only one device (or network interface) on either end.
Point-to-point connections are not always between two
separate physical devices. They can be made between any
two interfaces that are capable of full-duplex .

Full-duplex transmission requires a network interface card (NIC) on either
end of the connection. Therefore, full-duplex is not available on hubs
because the hub interfaces don't have the functionality of a NIC.
These are some characteristics of full duplex:

• No collisions on the point-to-point link
• A dedicated switch port (not hub) required for each full-duplex host
• Both ends set to do full-duplex
• Better throughput because each end can send and receive at once
Full duplex can be used in any situation where the preceding requirements
can be met. This can include the following:
•
•
•
•
•

A host to a switch
A switch to a switch
A host to a host (using a crossover cable)
A router to a router
A switch to a router
Crossover cables are covered in the section "Choosing the
Correct Wiring Standard."

Fiber-Optic Cable
Fiber-optic cable has a glass tube rather than a wire at its center and uses
beams of light created by a laser to transmit bit patterns. Because it is not
electrical in nature, it is susceptible to neither EMI nor RFI. It does, however,
have a maximum cable length that is partly dependent on its mode (discussed
later in this section). From a cost standpoint, fiber-optic is the most costly
option of all. Not only is the cable more expensive, but working with fiber
cabling requires special skills that increase the cost of installation. It is nearly
impossible to eavesdrop on a fiber cable because tapping into the connection
requires cutting it, which interrupts the connection. The extra cost does buy
the following:
• No susceptibility to EMI or RFI
• No susceptibility to eavesdropping
• Longer cable runs

Fiber-optic cables come in versions that support 100 Mbps, 1 Gbps, and
10 Gbps, as twisted-pair cabling does. The exact length supported depends
on the mode used in the cable. Multimode fiber is much less expensive than
single mode and uses lower-cost light sources (LEDs and less-expensive
lasers), but it cannot be extended as far as single mode. Distances vary
depending on speed ~ 100 Mbps can be extended up to 2 kilometers, while 10
Gbps can be extended only 300 meters. Single mode costs more because of its
use of more-expensive lasers, but can go up to 80 km.
The most common fiber-optic cabling has two connector models : straight
tip (ST), and small form-factor pluggable (SFP). SFP (the most common) can
use either subscriber connectors (SC) or lucent connectors (LC). In Figure
9-3, the SC is on the left and the LC is on the right.

Choosing the Correct Wiring Standard
When making connections to and between network infrastructure devices, the
cabling standard must be considered. There are three cable types you will be
working with in this regard. They differ in how they are wired and in their
application. This section presents their differences and the situations in which
they can be used.

Utilizing Straight-Through Cables
Straight-through cables are the most common cables you will use. The wiring
pattern connects the send on one end of the cable to the send on the other
end. The exact pattern is illustrated in Figure 9-4. The eight horizontal bars
represent the eight wires in the cable. These wires are numbered 1-8. Each
wire is individually wrapped in a plastic covering that is a specific color
assigned to that wire number. Wires 4, 5, 7, and 8 are not used in 1OBaseT and
lOOBaseT. The other four wires (1 , 2, 3, and 6) are used, and they either send
(TX for transmit) or receive (RX). You \IVill notice that in this straight-through
cable, send goes to send and receive goes to receive. Terminal devices such as
M t

al co

dt

ttY: d

ora

computers need to have the signals crossed over so that send goes to receive
on the receiving devices. The hub or switch will perform that crossover
function internally.

Figure 9-4: Straight-through cable
TX+ l

TX+l

TX-2

TX- 2

RX+ 3

RX+ 3

4

4

5(1

)

5

RX-6

RX-6

7

7

8

8

Straight-through cables are used in the following situations:
• Computer to hub
• Computer to switch
• Switch to router

Utilizing Crossover Cables
Crossover cables switch wires 2 and 6, and wires 1 and 3. These cables are
used whenever the crossover function is missing, such as when a computer is
connected directly to another computer. It is also required when two devices

M

I

that are performing the crossover function are connected together because
they are canceling each other out. The wiring pattern is shown in Figure 9-5.
In the real world, many devices and interfaces can perform
automatic crossover, which eliminates the need for crossover
cables even between like devices.

Figure 9-5: Crossover cable
TX+ l

lTX+

TX-2

2TX-

RX+3

3 RX+

4

4

5

5

RX-6

6 RX-

7

7

8

8

Crossover cables are used in the following situations:
In 1OOOBaseT, all four pairs are wused bidirectionally.
Because those network adaptors perform automatic
crossover, the wiring pattern is not important.

•
•
•
•

Computer to computer
Hub to hub
Switch to switch
Router to router
When trying to sort out the crossover/straight cable issues,
remember this: to connect like devices, use a crossover
cable, and to connect unlike devices, use a straight cable.

Utilizing Rolled Cables
Rolled cables are cotnpletely different from the other two cables discussed in
this section and are used in only one situation: when connecting to a router
from a computer for the purpose of managing the router. When this cable is
used, it \¥ill not be connected to an Ethernet port on the router or switch. It
will be connected to the console port. The console port will be labeled as such
and will accept an RJ-45 connector but is wired differently than a twisted-pair
cable and will be a flat cable. A console port is shown in Figure 9-6.

You will learn more about how to use a rolled or console cable in
Chapter 13, "Configuring Routers." One end connects to the serial port on a
computer and the other to the console port on the router or switch. There are
t\;vo types ~ one has a serial connector on one end and an RJ-45 connector on
the other, as shown in Figure 9-7.

Figure 9-7: Console 1

The other type has RJ-45 connectors on both ends (which means you will
need a transformer to connect to the serial port on the computer). This type is
shown in Figure 9-8.

Figure 9-8: Console 2

There are eight wires in these cables, and although not all of them are used,
the ends switch the wiring completely (that is 1 to 8, 2 to 7, 3 to 6, 4 to 5, 5 to
4, 6 to 3, 7 to 2, and 1 to 8). Typically, these cables are purchased, but if you
were creating one, you would wire one end exactly the opposite of the other.

Describing Wireless Standards
Wireless networks operating according to the 802.11 standard are becoming
more and more common. You will need to understand not only how to
incorporate them into the larger network design but also the components
involved, the terminology used, and the operation of the contention
mechanism that is used. This section explains all of those topics.

Identifying Standards Bodies
Several organizations have an impact on the wireless world. Some of the
organizations create regulations that must be followed, while others simply

create standards that are voluntary. The follo\ving are the main bodies in the
United States:
Institute of Electrical and Electronics Engineers (IEEE) The IEEE is a
professional association dedicated to advancing technological innovation
and excellence. A part of what it does is to create standards for networking.
The IEEE created the standards you learned about in Chapter 5, "Physical
and Logical Topologies," for Ethernet (802.3) and Token Ring (802.5). It
created the original 802.11 standard and has since amended the standard
a number of times to account for technological advances. These standards
are entirely voluntary but are usually followed by the major manufacturers
to ensure interoperability with other equipment.

Federal Communications Commission (FCC) Whereas the standards
created by the IEEE are voluntary, the regulations created and enforced by
the FCC are not. This organization controls the use of the radio spectrum.
Some parts of this spectrum are licensed, and some parts are not. The range
of the spectrum that is used by 802.11 is unlicensed.
A licensed band of the radio spectrum is one that an entity
has exclusive access to, such as a radio station. Unlicensed
bands are free to use.

Wi-Fi Alliance The Wi-Fi Alliance is an industry group that encourages
cooperation and standardization among its members. One of its larger
contributions was the introduction of a security solution called Wi-Fi
Protected Access (WPA), which addressed security weaknesses that were
hampering the adoption of 802.11 in the enterprise. WPA served as a
temporary solution while the IEEE completed work on the 802.11 i security
standard. The Wi-Fi Alliance logo is used to indicate that a piece of
equipment is interoperable with other equipment bearing the same logo.

Understanding 802.11 Amendments
In 1997, the 802.11 standard was adopted by the IEEE. It describes a standard
that uses either of two technologies: direct-sequence spread spectrum (DSSS)
or frequency-hopping spread spectrum (FHSS). Starting with the 802.11a
amendment and going forward, FHSS is no longer a part of the standard.
DSSS operates on a fixed frequency , while FHSS changes frequencies in a
pattern known by the transmitter and receiver. It operates in the 2.4 GHz
frequency and is capable of 1 and 2 Mbps.

Frequencies
To communicate, two devices must be operating at the same frequency.
Just as you must tune your radio to the frequency of the radio station
you want to listen to, wireless stations and the AP must be using the
same frequency . When we speak of the 2.4 and 5.0 frequencies , we are
referring to a range of frequencies , with each specific frequency within
that range representing a channel. Two devices can be 2.4 GHz devices,
but if they are not operating on the same channel (exact frequency),
they cannot communicate.

As time went by and technical advancements occurred, many amendments
were made to the standard. These amendments are indicated by letters added
to the right of the 802.11 name. The major amendments and their main
characteristics are listed here:
802.11a The 802.11a amendment was not widely adopted when it was
initially released as it operated in a different frequency , necessitating a
hardware upgrade. Many thought that the extra performance gained by
upgrading would not be worth the extra expense. Operating in the 5.0
GHz frequency it was inoperable with the current 802.11 devices, which
operated in the 2.4 GHz frequency . Later, after the spread of 802.11 g, it

became more widely accepted. 802.11a operates in the 5.0 GHz frequency
and supports up to 56 Mbps.

802.llb The 802.11b amendment was pretty much an upgrade of the
802.11 standard in that it uses the same frequency , is backward compatible
with 802.11 , but supported up to 11 Mbps. Although not as fast as 802.11 a,
802.11 b was more widely embraced because it required no hardware
upgrades as did 802.11 a.
802.11g By departing from the use of DSSS as its modulation technique
and using orthogonal frequency-division multiplexing (OFDM), 802.11 g
is able to achieve 56 Mbps while still operating in the 2.4 GHz frequency
to maintain compatibility with both 802.11 and 802.11 b.
802.11n 802.11n uses multiple antennas, which is not new, but the way in
which it uses them is. Multiple antennas had been used before to prevent
a behavior called multipath, whereby the signal reflects off an object
and arrives slightly out of sequence with the main signal, corrupting the
main signal. By using two antennas and constantly sampling each for the
cleanest signal, this could be avoided. When multiple antennas are used in
this fashion, it is called antenna diversity.
802.11n uses the multiple antennas (as many as eight) working together
in a process called multiple-input multiple-output (MIMO) to transmit
multiple frames at once that are then sequenced after transmission. 802.11 n
also uses a 40 MHz channel, which is double that of the other 802.11
standards and thereby doubles the speed. Finally, changes to the CSMA/
CA contention method allow blocks of frames to be acknowledged (instead
of individual frame s, as the other 802.11 standards require). You will learn
more about CSMA/CA later in this section.

Understanding Wireless LAN Components and
Terminology

You must be able to identify the main components of \IVireless LANs
(WLANs), understand how they work together, and use correct terminology
when discussing WLANs. This section first identifies the components, then
covers some terminology , and finally explains the manner in which the parts
communicate.

Access points Wireless access points (APs) and wireless routers transmit
and receive signals and are a required piece in all network types except
ad hoc networks (covered later in the "Service Sets" list item). The access
point is the point of connection to all the wireless stations and usually
connects them to the \IVired LAN. When stations communicate with one
another, they do not do so directly . The transmission is relayed through the
AP.
This relationship is depicted in Figure 9-9. In the figure , laptop C is
transmitting to laptop B wirelessly through the AP, and laptop A is
transmitting wirelessly through the AP back to WS 1 on the wired network.
The transmissions of all the wireless stations are relayed through the AP.

Figure 9-9: WLAN

Laptop C
Laptop B

Laptop A transmitting toWS 1
Laptop Ctransmitting to Laptop B

The AP is also responsible for announcing the presence of the network,
if desired, in frames called beacon frames. In a secured network, the AP

Copy llJ t

a ri

controls access to the network by authenticating stations before allowing
them to connect.

Wireless Stations Wireless stations can be any devices capable of using
802.11 . This could include laptops, barcode scatm ers, PDAs, tablet
computers, and smartphones.
Service Sets The service set defines the wireless objects that are a part of
the same wireless network. The three types of service sets are as fo llows:
Basic Service Set (BSS) This includes a single AP and its associated
stations. This is the type of set illustrated in Figure 9-9; the set includes
the AP and laptops A, B, and C.
Independent Basic Service Set (IBSS) This is also called an ad
hoc or peer-to-peer network. It has no AP, and the wireless devices
communicate directly with one another. An IBSS requires the first
station to create the network and others to join. It is shown in Figure
9-1 0.
Figure 9-10: IBSS
IBSS

a
Laptop A

~

a

a

/ Laptop(
Laptop A transmitting to Laptop C
Laptop Ctransmitting to Laptop B

Laptop B

Extended Service Set (ESS) An extended service set is one that has a
single SSID but multiple APs. It m ay use the multiple APs in a small
space to provide more bandwidth, or they may be placed apart from
one another to extend the range of the wireless network. When a station
moves out the range of one of the APs, it will scan for APs with the

Uh

tt

~

httzt

\l

ri

same SSID in the area and "roam" to the next AP in the ESS. This is
shown in Figure 9-11 .

Figure 9-11: ESS
The Warehouse ESS

AP2

Laptop Ai$
connected to AP2

hi

SSIO:~f::-<=Y
API

SSID: Warehouse

~~g

/
~
~

<::;;:! _ ___. LaptopAroams.
loses lhe signal
Laptop Ais
connected to API

lrnm API and
roams to AP2

Describing CSMA/CA Operation
Because it is impossible for wireless stations to detect collisions, another
contention method is required to arbitrate access to the network. The method
is called Carrier Sense Multiple Access/Collision Avoidance (CSMAICA). It
requires a more involved process of checking for existing wireless traffic
before a frame can be transmitted wirelessly. The stations (including the AP)
must also acknowledge all frames . The steps in the process are as follows :
1. Laptop A has a frame to send to laptop B . Before sending, laptop A
must check for traffic in two ways. First, it performs carrier sense, which
means it listens to see whether any radio waves are being received on its
transmitter.
2. If the channel is not clear (traffic is being transmitted), laptop A will
decrement an internal countdown mechanism called the random backoff algorithm. This counter will have started counting down after the last
time this station was allowed to transmit. All stations will be counting
down their own individual timers. When a station's timer expires, it is
allowed to send.

U h

tt

~

ht tzt

\t

ri

3. If laptop A checks for carrier sense and there is no traffic and its timer
hits zero, it will send the frame.
4. The frame goes to the AP.
5. The AP sends an acknowledgment back to laptop A. Until that
acknowledgment is received by laptop A, all other stations must remain
silent. The AP will cache the frame, where it already may have other
cached frames that need to be relayed to other stations. Each frame that
AP needs to relay must wait its tum to send using the same mechanism
as the stations.
6. When the frame's tum comes up in the cache queue, the frame from
laptop A will be relayed to laptop B .
7. Laptop B sends an acknowledgment back to the AP. Until that
acknowledgment is received by the AP, all other stations must remain
silent.
When you consider that this process has to occur for every single frame
and that there are many other frame types used by the AP to manage other
functions of the network that also create competition for air time, it is no
wonder that actual throughput on a wireless LAN is at best about half the
advertised rate.
For example, if two wireless stations were the only wireless clients and
they were using 802 .11 g, which is capable of 56 Mbps, the very best
throughput experienced would be about 25-28 Mbps. Moreover, as soon as a
third station arrives, throughput will go do\vn again because the stations are
dividing the air time by 3 instead of 2. Add a fourth, and its gets even worse !
Such is the challenge of achieving throughput on a wireless LAN.

The Essentials and Beyond
Connections are created between devices with media. Media can be
either bounded (cables) or unbounded (wireless). Wireless provides

lower cost and more convenience, while cabled networks deliver
higher security and more bandwidth. Cables come in a variety of
thicknesses and materials and can operate using either electrical signals
or optical signals. When choosing cabling, factors such as maximum
length, cost, and susceptibility to RFI, EMI, and eavesdropping must
be balanced against the needs of the design. Straight-through cables
are used to connect unlike devices, and crossover cables connect like
devices. Rolled cables are used only to make a connection to the
console port on a router or switch. Wireless LANs may be deployed
using 802.11 , 80211a, 802.11b, 802.11g, or 802.11n, each having a
unique set of capabilities. Access points are used to create service
sets, which include the APs and the stations that are connected to the
APs. WLANs use CSMA/CA to arbitrate access to the network, which
creates challenges to achieving high throughput.

Additional Exercises
You work as a network consultant for a network design firm . For the
following two clients, choose which type of media (cabled or wireless)
should be used in each of the sections of the client network.
1. Client A

A. Warehouse network in which barcode scanners are used to check
merchandise in and out. Security and bandwidth needs are low
because only bar codes are being transmitted. Cost should be
minimized if possible.
B . Office network that has large and frequent data transfers. Highsecurity customer information is also transmitted .
C. Guest network in the reception area, where only Internet access is
provided.
2. Client B
A. Outdoor garden sales area, where sales are recorded and
transmitted back to the main office. Customer information such as
credit card information will be transmitted back to the office nehvork.

Bandwidth needs are low. Sales stations are some distance from the
main building.
B. Office network in which sales and customer information from the
inside and outside sales areas are consolidated and transmitted to the
main office. Bandwidth needs are high.
C. Guest network that allows customers Internet access so they can
access the web-based catalog for special orders. Convenience is
imp01iant. Financial information will not cross thi s network as
payments occur at pickup. Throughput needs are low.

Review Questions
1. Which of the following is not a security concern unique to
WLANs?
A . Rogue access points

B . Ease of access to data
C. Ease of connection to an unauthenticated network

D . Stolen login passwords

2. Which of the following represents the correct ratio of current
wired bandwidth to the desktop, to current wireless bandwidth to
the desktop?
A. 2 to 1
B. 3 to 1
C. 5 to 1

D. 10 to 1
3. Why is hiding the SSID not an effective access control method?
A. The SSID is displayed in the beacon frames.

D . Crosstalk
7. What is EMI?

A. Electromagnetic interference
B. Sources of strong radio signals

C. Tapping into the cable and connecting a device to the cable
run
D . When the signals on one wire interfere with those on another
.
\ iVtre

8. What cabling type comes with either a solid copper wire or a
stranded copper wire in the center?

A. Fiber-optic

B. Twisted pair
C. Coaxial

D. Full duplex
9. Which of the following connector types is used for coaxial?

A . SC

B . RJ-45
C. Vampire tap
D. SFP
10. What behavior is the twisting used in twisted-pair cabling
designed to prevent?

A. EMI
B . RFI

Chapter 10
Network Devices
Various hardware devices can be deployed to connect a network. Knowledge
of how they work and where to place them is critical to designing the network.
A poorly designed network will be difficult to optimize, regardless of the
quality of the equipment.
This chapter is dedicated to the understanding of the role played by each
device and the principles that drive the positioning of each. Specifically, this
chapter covers the following topics:
• Describing device functions
• Understanding device placement principles

Describing Device Functions
Infrastructure devices are those devices that connect sections of the network
together, like road systems that connect cities and towns. Some of the devices
create connections that operate like limited-access interstate highways
connecting cities, while others create connections that are more like
secondary highways that connect smaller towns and provide access to the
interstate highway at specified entrance ramps. Finally, using the same
analogy , some of the devices create connections that might be considered
local roads, connecting neighborhoods to the secondary roads.

If you've ever driven in an area \Vhere the road system developed over time
without a master plan and experienced the headaches that result from this,
you can understand why proper network design in the front end is critical.
Besides designing for the immediate performance of the network, you need
to consider the ability of the network to absorb growth over time without
sacrificing performance. Before you can properly design the network and
place the devices, you must have an understanding of the functions of the
devices, the concepts that guide their operation, and the interrelationships that
exist.
One of the best ways to frame the discussion of each device is to map
the device to the TCP/IP model. When we do this, it helps to make clear the
layers at which the devices operate, and this in tum helps us understand which
devices should create interstate highways and which should create secondary
roads and so forth from a design perspective.
This section covers the major devices with respect to the following:
• The T CP liP layers at which they operate
• The roles they can play in the Cisco three-layer model
• The position they occupy in the LAN hierarchy

Understanding Repeaters
Repeaters operate at the Network Access layer of the TCPIIP model, but to
say they operate at that layer is really to overstate the intelligence of these
devices. The Network Access layer includes both the Network Access layer
technology (which in the case of a LAN is Ethernet using MAC addresses)
and the physical implementation of that technology. A repeater operates on
only the physical part of this layer, so it is sometimes referred to as a physical
device .
A repeater simply takes the original signal and amplifies, or boosts, the
signal. As you may remember from the discussion about cable length and
attenuation in the preceding chapter, after the signal has traversed a certain

length of cable, the signal strength is gradually weakened by the resistance in
the cable (which is called attenuation). At some point (at the maximum cable
length), the signal becomes so degraded that it cannot be understood when
it arrives at the destination device. A repeater can be used to connect two
lengths of cable that together would exceed the maximum length. It simply
amplifies the signal and transmits it.
Repeaters really should be avoided in network design. You should plan
the location of the access switches in such a way that no runs of cable over
100 meters are required. You should view repeaters as a solution to a network
design problem that you inherited, not one you created. If a bad network
design causes a repeater to be included in the network, this device would be
considered to be operating on the Access layer of the Cisco three-layer model.
This model is discussed in more detail at the end of the chapter.

Understanding Hubs
Hubs operate at the same layer as repeaters and are sometimes referred to as
multipart repeaters. They have no intelligence. When a signal is received by
a hub on one of its ports, it simply repeats the signal to all other ports. This
is illustrated in Figure 10-1. A signal arriving in port 1 is simply sent out all
other ports.

Figure 10-1: Hub operation
Hub

(~666666
X

L

~

-

~

~

~

"
'\

7

~

~

7

'\ 7

'\

7

The problem with this operation is that all of the ports are on a shared
network. They all exist in one collision domain. You will learn more about
collision domains later in this chapter, but for now understand that when
M t

al co

dt

ttY: d

ora

signals are regenerated to every port as with a hub, the frequency of collisions
is greatly increased. As you learned, collisions lead to retransmissions, which
lead to reduced data throughput (that is, a slow network).
Hubs should never be a planned piece in a network design. Over and
above the performance problems they introduce, they also create security
concerns. If a protocol analyzer or sniffer is connected to a port on the hub
or is operating as software on a computer connected to the hub, traffic from
all computers connected to the hub can be captured. As explained in the
next section, switches segregate devices into separate collision domains (one
for each port) and in the process make capturing packets from all devices
impossible. If a sniffer is connected to a port on a switch or is running as
software on a computer connected to a port on a switch, only the traffic
between the sniffer or computer and the switch port can be captured. If a
hub is included in the network, it \Vould be considered to be operating on the
Access layer of the Cisco three-layer model.
The Cisco three-layer model is discussed at the end of this
chapter.

Understanding Bridges
Bridges operate on the Network Access layer of the TCP/IP model, but unlike
repeaters and hubs, they go beyond the physical half of the layer and use
Ethernet information (MAC addresses) to make forwarding decisions. When
a bridge is first started, it acts as a hub does. It sends a frame out every port
except for the one on which it arrived. However, in a very short period of
time, it learns the MAC address of every device connected to every port.
It stores these addresses in a table called the MAC address table . Then,
\vhen it receives a frame (these are frames, remember, because we are using
information at the Network Access layer), it sends that frame only out the port

switch as it comes straight out of the box, it will provide the same transparent
bridging provided by an Ethernet bridge.

Advantages of Using Switches
The main advantages of a switch over a bridge are as follows :
Software vs. Hardware Bridges perform the bridging function by using
software. Switches, on the other hand, are hardware based. The switching
is done using ASIC chips. When hardware is used for this function, the
forwarding process is much quicker.

ASICs
Application-specific integrated circuits (ASICs) are those that are
dedicated to a specific function, as opposed to a general-purpose
integrated circuit. An example is a chip designed solely for a cell
phone (you can use it for only that purpose). By using this customized
circuitry for the switching function, rather than using the CPU or other
more general-purpose circuitry in the switch, performance is greatly
enhanced . This is sometimes referred to as switching in the hardware
rather than switching in the software.

Port Density Because bridges are designed to connect network segments,
they tend to have fewer ports. Switches, on the other hand, normally come
in 16-, 24-, and even 52-port models.
Port density simply refers to the number of ports. A device
with 24 ports would exhibit more port density than one with
8 pm1s.

Spanning-Tree Instances Bridges are limited to a single instance of
Spanning Tree, while switches can have many . Spanning Tree Protocol
(S TP) is discussed in Chapter 14, "Configuring Switches." This protocol
is used to prevent switching loops that can occur when switching path
redundancy is present in the network.

Path Redundancy and Loops
If designing path redundancy creates switching loops, why would you
include them in the design, anyway? The reason for this is fault
tolerance. Just as multiple routing paths between two destinations
allows for a backup route if one of the routes becomes unavailable,
switching path redundancy provides the same benefit. It is such a
beneficial design characteristic that the Spanning Tree Protocol (SIP)
was designed to prevent loops when switching path redundancy exists.
Moreover, you don't even have to enable this ~ it operates
automatically!

So as you can see, there are many reasons that switches are used rather
than bridges even though they perform the same function.

Types of Switches
Switches come in two versions: those that operate at the Network Access
layer only and those that are called multilayer switches. Multilayer switches
operate at both the Network Access and the Internet layers, which means
(as you will learn in the next section) they do switching and routing. The
rest of this section presents the characteristics of both Network Access layer
switches and multilayer switches.
Network Access Layer Switches These switches make forwarding
decisions based only on MAC addresses and do not use Internet layer
information (IP addresses). They typically act as the connection point to

another using STP to close these loops. You will learn more about STP
and its operations in Chapter 14.

Switch Path Redundancy
So what does switch path redundancy look like? The following graphic
shows that because of the way switches A, B, and C are connected,
there is redundancy between A and C if the direct link between thetn
fails. They can still have a switching path by going through switch B.
By building in this fault tolerance, however, a potential switching loop
is introduced around switches A, B, and C. SIP is used to prevent these
loops from causing problems, as you will learn in Chapter 14.

Switch B

~~
...

Switch C
1--------1

..

~
~

Switch A

MLS Switches Multilayer switches perform routing and switching, but
what is most impressive is the way in which they combine these functions.
To appreciate the operation of these devices, consider that when one device
is sending data to another device, it is a not a transmission made up of
a single packet. It can be made up of hundreds and even thousands of
individual packets in the same transmission.

Rather than simply routing each packet (which is what you would expect if
this were simply a box containing both a router and a switch), it routes the
first packet (routing is a much slower process than switching) and then by
maintaining an awareness of that route, it switches all of the other packets
in the transmission. This concept has come to be known in the Cisco world
8

as route one and switch many. The result is an impressive increase in speed
of the delivery of the entire transmission. Multilayer switches can operate
on the Access layer of the Cisco three-layer model. However, in most
cases they operate on the Distribution layer, where most routers operate,
or on the Core layer of the model, where their speed is one of the main
requirements of devices at that layer.
The Cisco three-layer model is discussed at the end of this
chapter.

Understanding Routers
Routers operate at the Internet layer of the TCP/IP model and make routing
decisions based on IP address information. A router is shown in Figure 10-6.

Figure 10-6: Router
-~

··-·-- .,

........

-

•

--

'

~

'

.

-==-

r •,.,-,, ::><on_,,

-

The IP address information is stored in routing tables. Routing tables
contain routes, or pathways, to networks (called network routes, usually
maintained in the form of the network ID) and if configured as such, routes
to specific devices (called host routes). They also can contain a type of route
called a default route . The router uses the default route to send all traffic for
which it has no route in its table. A default route can be thought of as the
default gate\;vay for the router because it uses that route much like a host uses
its default gateway (that is, a host will send any traffic that is not in its local
network to the default gateway). If a router is configured with a default route
and you issue the command to show all routes ( sh ow ip r o ute) , this route is
referred to as the gateway of last resort.
Routing tables of the routers can be populated in two ways. When an
administrator connects to the router and manually uses commands to program
8

the routes into the routing table, the router will be using static routing. When
the router is configured to use a routing protocol, the router will be using
dynamic routing. Each of these methods has advantages and disadvantages,
which are discussed in the following sections.

Dynamic Routing
When a routing protocol is enabled on a router, it will exchange routing
information with other routers that have been enabled with the same routing
protocol. Before a router has learned any information from other routers, it
will have only routes in its table to networks to which it is directly connected.
In Figure 10-7, router R1 has routes in its table only to the 192. 168.5.0/24
and 192.168.6.0/24 networks. This is because it is directly connected to only
those networks. It does not, however, know about the 192. 168.7 .0/24 network
because it is not directly connected to that network.
Figure 10-7: Directly connected routes

rr===~

ws 10

192.168.7.0/24

,--------,

I know routes to:
192.168.7.0/24
192.168.6.0/24

Switch
I know routes to:

192.168.5.0124
192.168.6.0/24

192.168.5.0/24

Il----l

~::dl

<::3
ws

~~
~

Switch

1

Likewise, before any routing information is exchanged between R 1 and
R2, router R2 will know about only the 192.168.6.0/24 and 192.168.7.0/
24 networks, because those are the only networks to which it is directly
connected. After the two routers have exchanged their routing tables, both

Copy llJ t

a ri

routers will have all three routes in their tables, as shown in Figure 10-8, and
only then will a packet from WS 1 destined for WS 10 be routed successfully.
The advantages of dynamic routing are that the remote routes (the routes
that are not directly connected) will not have to be entered manually but will
be placed in the table automatically as the routers exchange information. The
disadvantage is that for this to occur, the routers create traffic on the network
called routing update traffic. In some cases, this traffic can be significant and
competes with normal data traffic on the network.
Another advantage of dynamic routing is that if multiple paths exist to the
same network, as shown in Figure 10-9, the router can use metrics to choose
the best route. A metric is a value that is used to determine the best route that
can be based on the number of routers on each path (called hops) or on moresophisticated combinations of information such as hop count and bandvvidth.
The routers in Figure 10-9 are using hop count (number of routers on the
path) as their metric, and so R1 will send any information from WS 1 toWS 10
through R4 because it's a shorter path in terms of hop count.

Figure 10-8: Routing tables updated

ws 10
I know routes to:

192.168.7.0/24
192.168.6.0/24
192.168.5.0/24

Switch
I know routes to:

192.168.5.0/24
192.168.6.0/24
192.168.7.0/24
192.168.6.0/24

192.168.5.0/24

<::3
WS1

Switch

Figure 10-9: Multiple routes

Copy llJ t

a ri

Switch

--

., .... R2

Since the best
route toWS 10 is
down, I'll use the
route through R3.

--

--

., .... R3

Rl ., ....

<:::3

Switch

WSl

Static Routing
The advantage of using static routing is that there is no routing update traffic
created. In some situations where the network is very small and the equipment
and connections are very reliable and stable, it may be the best choice. The
disadvantages of static routing are as follows:.
• The routes must be entered manually.
• Any changes that occur from a link outage, from a change in design,
or from the addition of devices must be made manually.
• The best route choice must be made by the administrator and
manually configured.

Understanding Wireless Access Points and Wireless
Routers

Copy llJ t

a ri

Wireless access points (APs) can be of two types. Some APs are simply
switches that provide logical wireless ports to multiple wireless devices, while
others are also routers. In an enterprise network, there is a role for both.
Depending on the role of the AP and where it is located in the network, it may
not be required for it to be a router, and wireless routers cost more than simple
APs. In this section both are discussed.

Wireless APs
An AP that is not a router is acting as a switch. It doesn't look like a switch
because it doesn't have physical switch ports that you can see and touch
(although some models may include one or two of those). The ports are
wireless and they are logical. When a device connects to an AP (which may
or may not require authentication), it is said to be associated with the AP.
The AP maintains this information in an association table that is much
like the MAC address table in a switch. If a wireless device needs to send
traffic that goes through the AP and then on to the wired part of the nen;vork,
the device will have to have an IP address that is on the same subnet as the
network to which the AP is connected. This is the same concept that would
apply if a wired device were connected to a switch. This process is shown in
Figure 10-11 . In this scenario, because AP 20 is operating as a switch and is
not a router, laptop 1 will not be able to connect to the router R3 because its
IP address is not in the same subnet as the interface on the connection from
router R3 to the AP (which is the 192. 168.5.0/24 network). The other laptops
will not have that problem because their IP addresses are in the same subnet
as the router.

Say That Again?

Copy llJ t

a ri

How do we know that router R3 and laptop 1 are not in the same
subnet, and what is that 192. 168.5.0/24 address all about? Laptops 2
and 3 and the router all have 24-bit subnet masks (255.255.255.0 or
/24). That means that if the first three octets of their IP addresses match,
they are in the same subnet. Because they all have 192.168.5 in the first
three octets, they are all in the same network, which is the 192.168.5.0/
24 network. Laptop 1 also has a 24-bit mask, but its first three octets
are 192.168.56, so it is not in the same network as laptops 2 and 3 and
the router.

When the AP is connected to a router that can provide routing, as shown in
Figure 10-11 , it is not necessary for the AP to be a router.

Figure 10-11: AP as a switch

s

192.168.5.~

192.168.5.10124

Laptop2

MAC bbb.bbb.bbt>.bbb

192.168.56.41' $
Laptop3

MAC aaa.aaa.aaa.aaa

Laptop!

MAC <«.<<<.((<.((<

Association Table

aaa.aaa.aaa.aaa
bbO.bbt>.bbb.bbb
(C(,((.(..(C(.(C(

R3

Wireless Routers
In some situations, it is beneficial or even required for the AP to also be a
router. The best example of this is a wireless AP that provides access to the
Internet in a home. In this situation, the wireless clients in the home will be
using private IP addresses. Because these addresses cannot be used to access
the Internet, those addresses must be converted to a public IP address using
Network Address Translation. This is a function performed by a router.

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

A collision domain is a set of devices whose packets could potentially collide
with one another. By definition, devices that are in the same collision domain
are also in the same broadcast domain. One of the purposes of a switch is to
place each device in its own collision domain so that collisions are reduced.
Because a hub cannot provide that, all devices connected to a hub are in the
same collision domain. This relationship is illustrated in Figure 10-14.
In this scenario, each s\vitch port provides a collision domain. However,
because a hub is connected into one switch port, and then three computers are
connected into the hub, those three devices are forced to share the collision
domain in contrast to the other devices that have their own collision
domains.

Figure 10-14: Collision domains
Coll~ion

Domain

(olllslon Domains
Collision

Domain

Collision
Domain

Colli$ion
Domain

When we put the routers, switches, and hubs together in one network
diagram, you can more easily grasp the relationship between collision and
broadcast domains (see Figure 10-15).

Figure 10-15: Collision and broadcast domains

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Broadust Domoln
Collision
Domain

Colision

Domain
Broadcast DomaJn

Gc>l!ision
Domain

Col ision
Domain
Colli!ion
Domain

Understanding the Cisco Three-Layer Model
The Cisco three-layer model is used to describe the way in which
infrastructure devices such as routers and switches should be organized to
maximize the performance and security of the network. Certain functions
should be performed on certain levels, and certain devices should be placed
on certain levels.
Access Layer The access layer is the connection point for workstations,
printers, wireless computers, and any other devices that operate on the
network with an IP address. These devices usually make this connection
via a switch, hub, and wireless AP or wireless router. This is also called
the network edge.
Distribution Layer This layer is where routers and multilayer switches
connect the access switches together. This layer is typically where security
is applied in the form of access control lists. It is also where the routing
function takes place.

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

A broadcast domain is a set of devices that will receive one another's
broadcast packet. A collision domain is a set of devices w hose packets
could potentially collide with one another. The Cisco three-layer model
is used to describe the way in which infrastructure devices such as
routers and switches should be organized to maximize the performance
and security of the network. The model consists of an Access,
Distribution, and Core layer.

Additional Exercises
1. Using Figure 10-17, determine the number of collision and broadcast

domains in the network.

Figure 10-17: Domain exercise 1

-

1 - - - - - - - l ... -

Router

Switch

2. Using Figure 10-18, label each of the seven domains as either
collision or broadcast.

Figure 10-18: Domain exercise 2

Mar

·p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Review Questions
1. Repeaters operate at which layer of the TCP/IP model?
A. Internet
B. Network Access
C. Application

D. Transport
2. What cable behavior are repeaters designed to mitigate?

A . EMI
B . RFI

C. Crosstalk
D . Attenuation
3. Which of the following devices operates on the Internet layer of
the TCPIIP model?

A . Repeater
B . Hub

C. Bridge

8

D . Router
4. With which of the following devices are all of the ports in the
same collision domain?
A . Hub
B. Bridge
C. Switch
D . Router
5. Which if the following is not an advantage of switches over
bridges?
A . MAC address learning
B . Hardware bridging
C. Port density
D . More Spanning Tree instances
6. Which of the following is not a function of Network Access
layer switches?
A . IP address filtering
B . MAC address learning
C. Forward/filter decisions
D. Loop avoidance
7. Which device operates on both the Network Access and the
Internet layer?
A . Switch
B . Router

Chapter 11

LAN Operations
Although an understanding of the cabling and other physical aspects is
important, designing and troubleshooting networks require an understanding
of what goes on at the upper part of the Network Access layer and the Internet
layer of the TCP/IP model. In this chapter, topics that have already been
covered to some extent are reviewed and in some cases taken to another level
of detail. But the real intent of this chapter is to put all of the pieces together so
you can get the big picture of how a LAN operates. Specifically, this chapter
covers the following topics:
• Understanding the routing process
• Describing the switching process
• Describing end-to-end communications

Understanding the Routing Process
Routers and multilayer switches tie subnets together and use IP addresses to
locate destinations on behalf of hosts that are in directly connected networks
and on behalf of hosts that may be located many routers, or hops, away . That's
because no single router performs the routing process for a host unless the
source and destination networks are directly connected, as shown in Figure
11-1.

E18Me ts ~o

dot d ul ur

Figure 11-1: Local routing
SW I

<::::>
WS 1

Rl

SW2

~
IVS 2

In Figure 11-1 , the router R 1 can perform the entire routing job because the
source and destination computers are connected to switches that are directly
connected to R 1. This is possible because routes to networks that are directly
connected to a router are automatically placed in the routing table. In this
section, the structure, methods of population, and the use of routing tables are
discussed.

Describing Routing Tables
Routers use routing tables to store information about remote networks, but
they don't store this information as you might expect. When you ask someone
for directions or you use a GPS to determine how to get somewhere, the
answer usually comes as a series of steps, such as turn left at Elm, go 5 miles,
turn left on Oak, and so forth.
Routers do not store information that \iVay. Routers keep track only of the
next step in the directions, or the next router in the path to the destination . So
if directions worked this way, you might ask how to get to a certain location,
and the person giving you the directions would simply say, "Go to Elm Street,
and when you get there, ask the guy standing on the corner, and he'll tell you
the next step. " In a network, that guy standing on the corner represents the
next router.
So when you examine a routing table, the information you will see for
each entry will consist of the following listed items per route. As the items
are explained and added, the entries will become increasingly complete.
One item, metrics, is not discussed here but rather in the "Understanding
Population Methods" section.
E18Me ts ~o

dot d ul ur

relates to this set of networks in the table, the table is complete, as shown
here:
10 . 0 . 0 . 0/2 4 is subnetted , 4 subnets
C 10 . 0 . 1 . 0 is d i rectly co nnected Serial 0
R 1 0 . 0 . 2 . 0 v i a 1 0 . 1 . 6 . 1 0 : 0 1 : 00 Ser i al 1
R 1 0 . 0 . 4 . 0 v i a 1 0 . 1 . 6 . 1 0 : 0 1 : 00 Ser i al 1
C 1 0 . 0 . 6 . 0 i s d i rect l y connecte d Ser i a l 1

In the preceding entry, the two routes learned from the router at 10.1 .6.1
(10.0.2.0 and 10.0.4.0) were last updated exactly one minute ago (the
elapsed time since the last update was 0 :01 :00).
Additional information can be found in the routing table, and that is
covered later, in the section "Understanding Population Methods." But
before moving on to that, Figure 11-2 illustrates the router that owns this
table (R1), with its physical interfaces labeled and the connection to the
router at 10.1.6.1 labeled. The physical interfaces of R2 and R3 are not
labeled, as they would not appear in or be relevant to the routing table in
R1. Study this figure and ensure before moving on that you can relate the
diagram to the table entries.

Figure 11-2: Routing table visualized
so
10.0.1.1124
f---------i - Sl
Rl 10.0.6.2/24

10.0.1.0124

SW I

SW2

.....____.... 10.0.4.1/24
RZ

SW 3

It is important that you can look at a routing table and create the diagram
that goes with the table. This helps you to see where problems are. Remember,
you may have a network diagram that shows the way things should be, but the
routing table tells you what the router's reality is!
There is some information that was added to the diagram for clarity that
you could not have discerned from the routing table. Specifically , with the
E18Me ts ~o

dot d ul ur

exception of the 10.0.6.1/24 interface of R2, the IP addresses of the router
interfaces could not be known specifically, but their networks could have
been identified.
The diagram also shows the R2 router with two additional interfaces other
than the interface that connects it to R 1. Whether or not that is the case cannot
be determined with the information you have been given. Both of those
networks could have been located off a single interface if R2 were connected
to a third router. Later, in the section "Understanding Population Methods,"
you will learn about information not present in the simplified routing table
you were given that could have helped to make this determination.
Here is a list of the information in the table that you should have been able
to gather:
• There are two routers involved: the local router, which owns this
table, and the router from which the local router learned of two
networks (10.0.2.0/24 and 10.0.4.0/24) by using a routing protocol.
• The remote router is located at 10.0.6. 1/24. This means that the
local router's interface that connects to the remote router at 10.0.6.1/
24 must have an IP address in the 10.0.6.0/24 network.
• The local interface that connects to the remote router is Serial 1.
• The local router has an interface Serial 0, to which the network
10. 0. 1.0/24 is directly connected. This means that the IP address of
the SO interface must be in the 10.0. 1.0/24 network.
• The routing protocol that was used to learn the two routes from the
remote router was RIP (because there is an R next to the route in the
table).
The next section focuses on the methods by which routes are inserted into
the table, specifically focusing on dynamic routing protocols. Once you have
some understanding of these protocols, you will be able to make sense of
some additional information found in the routing table that you could have
used to make your diagram more detailed with more certainty.

Understanding Population Methods
Three ways that routes are populated to the routing table are:
• Directly connected, which are placed in the table automatically
• Static, which are configured manually from the command line
• Routing advertisements, which are received from other routers
running the same routing protocol
There's not much more to add about static and directly connected routes
(although in Chapter 15, "Configuring Static Routing," you will learn how to
configure and verify static routes). However, there is much to know about the
population of the routing table by dynamic routing protocols. The rest of this
section is dedicated to the use of these protocols. There are two basic types of
routing protocols:
Exterior Routing Protocols These protocols are used to route between
autonomous systems, such as the routing that occurs on the Internet.
An autonomous system (AS) is a group of routers that
are managed by the same group of administrators, usually
for the same enterprise (company). An enterprise can have
multiple ASs.

Examples are Border Gateway Protocol (BGP) and the now-obsolete
Exterior Gateway Protocol (EGP). Exterior routing protocols are beyond
the scope of this book.

Interior Routing Protocols These routing protocols are designed to be
used \iVithin an autonomous system. The configuration, monitoring, and
troubleshooting of a set of routers running one of these routing protocols
will usually be handled by the same company or entity. There are two types
of these protocols: distance vector routing protocols and link state routing
protocols. The two types differ mainly in the metric used to make routing
decisions. Each is described next.

Metrics are nutnerical values used to determine the best
route when multiple routes to the same network exist.

Distance Vector Distance vector routing protocols use a very simple
metric called hop count. Hop count simply describes the number of
routers between the source and the destination using that router. In
Figure 11-3, if the router R1 received a packet from WS 1 that was
destined for WS 2, it would have two routes available, through R2 or
R3 . The route through R2 would be two hops, and the route through
R3 \¥ould be one hop. If a distance vector routing protocol were in use,
the route through R3 would be chosen.
When examining a network diagram and discussing hop
count, switches do not count as hops. Only devices that route
are considered to be hops.

Figure 11-3: Distance vector route selection

---

WS I
SW I

-

.......

...

SW2

SW3

Link State Link state routing protocols use a combination of factors
when deciding the best route. They certainly consider hop count, but
they also consider the bandwidth of the links involved and the delay
that is being reported by traffic already sent in a particular direction.
Then all of the information is run through an algorithm that generates
a numerical value used as the metric.

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Algorithms
Algorithms such as the ones discussed in this book (DUAL, Dijkstra,
and so forth) are mathematical formulas that assign weight to certain
variables. When a route's variables such as hop count, bandwidth, and
delay are entered into the formula, it generates a value that represents
the metric.

With link state protocols, it is entirely possible that a router may choose a
route that is more hops simply because the bandwidth on the links along the
way of that route is superior to that of the route with fewer hops.
Both link state and distance vector routing protocols may place routes to
the same network in the routing table. These routes may also be competing
with static routes and directly connected routes to the same network.

Understanding Administrative Distance
Before metrics are even considered in router choice, an additional value
is considered before a route is chosen. This value is not used to compare
routes learned from the same routing protocol but to consider the relative
desirability of routes from all sources, including static, directly connected and
from various routing protocols. This value is called administrative distance.

Administrative Distance
We discuss three types of routing protocols in this book: distance vector, link
state, and a Cisco proprietary routing protocol that exhibits characteristics
of both types (which is why it is sometimes called a hybrid protocol). But
first, you need to know that a router \iVill consider one other item when it
has multiple routes to the same network. This item is called administrative
distance, or AD.

Cisco routers are programmed to consider certain sources of routing
information to be more trustworthy than other sources. For example, if a
route was learned because the network is directly connected to the router,
that information is considered to be more reliable than information about the
same network learned from a routing protocol. Each of the route population
methods has a default numerical value that is called the administrative
distance (EIGRP, OSPF, and RIP are detailed later in this chapter):
• Directly connected: 0
• Static : 1
• EIGRP : 90
• OSPF: 110
• RIP : 120
So if a router had two routes in its table to the same network, and one was a
static route and the other was learned by OSPF , the router would use the static
route because its administrative distance is 1, whereas the AD of the OSPF
route is 110. The values in the preceding list are the default values, but they
can be changed at the command line if desired.
So the router has two things to consider, and it makes these considerations
in a particular order:
1. If it has two routes to the same network from different routing
information sources (for example, one from OSPF and another from
RIP), it will pick the route with the smallest AD.
2. If there are two routes from the chosen routing source (say, two routes
learned from OSPF), the route with the lower metric will be chosen.

AD and the Routing Table
Now that we have discussed hops and AD, we can put the finishing touches
on our discussion of the routing table. Both hop count and AD are placed in
each routing table entry. Look at the following table, which is similar to the

Figure 11-4: Routing table visualized 2
so

10.0.1.1/24 ..... ~

Sl
'----(10.0.6.2124

SWI

Rl

SW3

Remember that if R2 had any additional interfaces up and running, they
would show up in Rl 'stable learned from RIP with a hop count of 1. The fact
that this is not the case tells us that the network must be as shown in Figure
11-4. You can tell a lot by studying the routing table!

Using Routing Protocols
Three routing protocols are the most widely used \Vithin the autonomous
system. These protocols are Routing Internet Protocol (RIP), Enhanced
Interior Gateway Routing Protocol (EIGRP), and Open Shortest Path First
(OSPF). In the following sections, each is discussed in detail. At the end of
the "Understanding Population Methods" section, a table provides a side-byside comparison of the three that summarizes their specific capabilities and/or
shortcomings.

Routing Internet Protocol
Routing Internet Protocol (RIP) is a distance vector protocol that uses only
hop count as a metric. It has two versions, and the most significant difference
between the two versions is that version 1 is classful and version 2 is classless.
A classful routing protocol will not send subnet mask information in its
routing advertisements. This means that the use of variable-length subnet
masks is not possible with version 1.

A RIP router will always send a route advertisement with the assumption
that the mask is the default mask for that class. So if the network 10.5.6.0/
24 was advertised, it would be advertised only as 10.0.0.0, and the receiving
Uh

tt

~

ht tzt

\l

ri

that if a router is attempting to advertise a route back in the direction from
whence it came, a loop is occurring.

RIP Timers
All routing protocols use timers to control update intervals and to control the
length of time that entries remain in the routing table. RIP has timers for the
following operations:

Routing Update Frequency The amount of time between regular routing
updates
Route Timeout Timer The amount of time a route remains in the table
until it is marked invalid
Route Flush Timer The amount of time after a route had been marked
invalid until it is deleted or flushed from the routing table
Flushing the route means removing it from the routing table.

RIP is the easiest routing protocol to use, as you will see in Chapter 16,
"Configuring Dynamic Routing," when you will learn how to get RIP running
in a small network.

Enhanced Interior Gateway Routing Protocol
Enhanced Interior Gateway Routing Protocol (EIGRP) is known as a hybrid
routing protocol because it exhibits some characteristics of both link state and
distance vector protocols. It is a classless routing protocol, so VLSM can be
used. Unlike RIP and OSPF (discussed later in this section), EIGRP is Ciscoproprietary, which means it can be used only bet\veen two Cisco routers.
EI GRP uses routing updates and routing tables like RIP but also has number
of unique features.

Neighbor Table
EIGRP routers keep track of their directly connected neighbors and monitor
their continued existence with regular hello packets. When hello packets go
unanswered, an EIGRP router knows the neighbor is down (or the link to it
is down) and that routes learned from that neighbor are no longer available.
This is one of three tables that EIGRP uses to maintain a more detailed
awareness of the network than RIP . Before an EIGRP router can exchange
routing updates with another EIGRP router, the neighbor must be discovered
and placed in this table. The neighbor discovery is also done using hello
packets. When a new EIGRP router is brought online and it receives a hello
packet, it will answer, and the two EIGRP routers will become neighbors.

Routing Table
Unlike a routing table in a RIP router, which theoretically could contain four
or five routes to the same destination network, the routing table in an EIGRP
router will contain at most two routes for each network. It will contain the best
route, and if a second-best route exists, that route will be included. The best
route is called the successor route, and the second best is called the feasible
successor.
Not all second-best routes can be feasible successors, however. There are
strict rules that control the admissibility of a route as a feasible successor.
These rules are explained in the "EIGRP Metrics" section.

Topology Table
The second table that EIGRP uses is called a topology table. It includes all
routes that exist to a destination network along with the router that sent the
route and the metric of the route. It is this table that is acted upon by the
DUAL algorithm. This algorithm uses metric information to determine the
successor and feasible successor routes that are then placed in the routing
table.

The Diffusing Update Algorithm (DUAL) is used by
EIGRP to ensure that a given route is recalculated globally
whenever it might cause a routing loop .

Reliable Transport Protocol (RTP)
EIGRP uses a special protocol for guaranteed (think TCP) delivery of
messages between routers and in any non-point-to-point network that will use
multicasting rather broadcasting for its messages. Multicasting creates much
less traffic than broadcasting, without all the overhead of unicasting.

EIGRP Metrics
In EIGRP, the metric is not hop count but a composite value that is based
on delay and band\vidth on each link on the path to the remote network.
Additional factors can be included, but the core EIGRP metrics are usually
sufficient and are the only ones used by default. After the metric for each link
along the path is calculated, the metrics are totaled, arriving at the total metric
for the route.
Each route has two metric values calculated: advertised distance and
feasible distance. Advertised distance is the metric as it was stated in the
advertisement that was received by the local router. That does not include the
additional metric for the connection from the advertising router to the local
router. Feasible distance is the advertised distance plus the metric for the
connection between the advertising router and the local router.
A route cannot be considered a feasible successor if its
advertised di stance must be less than the feasible distance of
the route chosen as the successor route .

The result of EIGRP maintaining a feasible successor route is that if
the best router becomes unavailable, the second-best route is already
known. That means the algorithm does not have to be executed again
to identify the next-best route. This results in faster convergence.
Convergence is the amount of time it takes for all routers to adapt to a
change in the network.

Summarization
Because EIGRP is a classless routing protocol, it will summarize subnets in
its routing advertisements. As in RIPv2, this behavior can be disabled. You
can instruct the router exactly how you want the subnets to be summarized as
well. By default, they are summarized to the classful major network. As with
RIPv2, you can use manual summarization.
When all of the routers are Cisco, EIGRP is a great routing protocol to use
because of its scalability, its fast convergence, its maximum hop count of 255,
and its simplicity, as you will see in Chapter 16, when you willlean1 how to
enable it for a small network.

Open Shortest Path First
The routing protocol most suitable for a large network (and as a result, the
most complex) is Open Shortest Path First (OSP F) . It is a true link state
routing protocol and is an industry standard, which means it can be used with
a mix of Cisco and non-Cisco routers. The most obvious departure from the
operation of RIP and EIGRP is OSPF's use of areas and its designation of
certain routers as designated, border, and autonomous system border routers.
Before the details of OSPF can be discussed, these basic concepts of OSPF
must be understood.

Areas

OSPF routers are organized into areas. Even if you envision having only
a single area, the routers must still be designated to be in the same area.
The benefit of this is that when you do have many areas, detailed routing
information about an area will be confined to that area, and only a summary of
information will be advertised to other areas. This has the benefit of keeping
OSPF routing tables smaller.

Autonomous Systems
A group of areas can be grouped into an autonomous system (AS), creating
another level of hierarchy. Just as one area will advertise only a summary
of information about its networks to another area, an AS will advertise only
a summary of all of its areas to another AS . Again, the result is a smaller
number of entries in the routing tables related to other ASs (these are called
exterior routes).

Router Roles
In OSPF, certain routers are designated to perform certain functions on behalf
of all routers in an area or all routers in an AS. These router roles and their
functions are as follows :
Designated Router Each shared network segment will select a designated
router (DR). The other routers on the segment will exchange updates only
with the DR. This will occur after each non-DR establishes an adjacency
with the local DR. OSPF routers will still exchange hellos and become
neighbors with other OSPF routers with which they share a segment, but
will establish adjacency and exchange information with only the DR. A
DR and BDR will be elected on every multi-access segment. If two OSPF
routers share a point-to-point link, there is no advantage to having a DR,
and one will not be elected. The election process will be based on the
priority of each OSPF router. By default, the priority of each router is 1.
When there is a tie between two routers (which there will be if this issue

is left to its default), the tie is broken with the router ID (RID). By default,
this value is the highest IP address that exists on the router.
A shared network segment is one in which all the devices are
connected to the switch.

Area Border Routers Areas apply to interfaces, which means that a router
can have all interfaces assigned to the same area, or it can have one
interface assigned to one area and another interface assigned to another
area. When a router has interfaces in different areas, it is acting as an area
border router (ABR). It will control the route advertisements between the
two areas. It will exchange full routing information with the DR in the
area to which the interface has been assigned, but will send only summary
advertisements about the area to which the interface has not been assigned,
as shown in Figure 11-5.
Figure 11-5: ABR
Area 0

Area I

Full Rooling informalion for Arta 0
Summary information k>r Ana 1

Full Rouling infonnali<>n for Arta I
Summary information for Area 0

Rl

In Figure 11-5, R2 is the ABR between Area 0 and Area 1. R2 will
exchange full routing information for Area 0 and summary information
for Area 1 with R1 , and full routing information for Area 1 and Summary
information for Area 0 with R3. This is beneficial because if Area 0 has,
for example, 15 subnets in it, a summary network could be advertised to
R3 , resulting in a single entry in R2's routing table rather than 15 entries.
Autonomous System Border Routers Areas can be grouped into an
autonomous system (AS). When a router has interfaces in different ASs,
it is acting as an autonomous system border router (ASBR). It \iVill control
t H rll

~ lllt

1

lli

destination MAC addresses are located. The IP header where the source and
destination IP addresses are located will not change. Each time the frame must
be switched from one interface to another on its journey, a new source and
destination MAC address will need to be placed in the frame, because a new
set of source and destination interfaces will be involved in the transfer and
each has a unique MAC address. This process is called rebuilding the MAC
header. Each time this process is done, a new frame check sequence (FCS),
used to verify the integrity of the MAC header, will be created and placed in
a new trailer that will go on the end of the Ethernet frame .
When a frame needs to be switched from one interface to another, the new
source and destination MAC addresses will need to be identified and placed
in the MAC header. This is the job of the Address Resolution Protocol (ARP).
In the "Describing End-to-End Communications" section, you will learn how
this process occurs both on a local LAN and when a packet is being relayed
through many routers across a network.

Reviewing Contention Methods
There are two contention methods used to get the frame onto the local
network. Which one is used depends on whether the fratne needs to be placed
on an 802.3 (Ethernet) network or an 802.11 (WLAN) network. A brief
review of each follows.

CSMAICA
When the device sending the frame is transmitting onto a wireless net\;vork,
the CSMA/CA contention method is used. The method starts with a check of
the medium (in this case, a check of the radio frequency) for activity called
physical carrier sense. If the medium is not clear, the station will implement
an internal countdown mechanism called the random back-off algorithm. This
counter will have started counting do\¥n after the last time this station was
allowed to transmit. All stations will be counting down their own individual

timers. When a station's timer expires, it is allowed to send. If the physical
carrier is clear and the countdown timer is at zero, the station will send.
The frame will go to the AP. The AP will acknowledge reception of the
frame . If the frame is destined for another wireless station located on this
wireless LAN, the frame will be forwarded to it by the AP. When this occurs,
the AP will follow the same CSMA/CA contention method to get the frame
onto the wireless medium.
If the frame is destined for a station on the wired LAN, the AP will drop the
802.11 MAC header (which is structured differently from an Ethernet MAC
header) and build a new Ethernet MAC header by using its MAC address
as the source address and the MAC address of the default gateway as the
destination. The LAN router will receive the frame and normal LAN routing
to the destination will continue from there, using the CSMA/CD contention
mechanism (covered in the next section) to place the frame in the \Vire at each
step. If frames are returned to the station, the AP will receive them, drop the
Ethernet MAC header, build an 802.11 MAC header, and return the frame to
the wireless station. When this occurs, the AP will follow the same CSMA/
CA contention method to get the frame onto the wireless medium.

CSMAICD
When the device sending the frame is transmitting onto a wired network,
the CSMA/CD contention method is used. This method is somewhat more
efficient because it is possible for wireless computers to detect collisions
while wireless stations cannot. When a host's or router's interface needs to
send a frame , it checks the wire, and if no traffic is detected, it sends without
checking a random back -off timer.
However, it continues to listen, and if it detects that a collision has
occurred, it sends out a jam signal that requires all stations to stop
transmitting. Then the two computers that were involved in the collision will
both wait a random amount of time (that each arrives at independently) and
will resend. So instead of using a random break-off algorithm every time a

transmission occurs, Ethernet uses its ability to detect collisions and uses this
timer only when required, which makes the process more efficient.

Describing MAC Address Tables
When a frame is switched from one router interface to another, no switch
is involved, but when a computer sends to its default gateway or to another
computer in its same subnet, the frame usually goes through a switch before
it is switched on to the router interface or to the other local computer. As
you learned in the preceding chapter, switches learn the MAC address of each
device that is connected to each port and stores this information in a MAC
address table.
The MAC address table shows the MAC address of each device on each
port. The table can be displayed by executing the show mac - address - table
command. When this is done, the output looks like this :
VLAN
1

1

MAC Address
0018 . b967 . 3cd0
001c . b05a . 5380

Type
dynamic
dyn a mic

Port
Fa0/ 1
Fa0/2

The output indicates that there are two devices connected to the switch.
Both devices are in VLANl. (By default, all devices are in VLANl. )
Virtual LANs (VLANs) are discussed in Chapter 14,
"Configuring Switches."

The device connected to switch port 1 (Fast Ethernet 0/1) has a MAC
address of0018.b967.3cd0. The address was registered dynamically when the
first frame was received from the device.
MAC entries can also be manually assigned to a port if
desired .

Store-and-Forward When this frame-processing method is enabled, the
switch will receive the entire frame and validate the FCS before making
the forwarding decision. This method results in the slowest forwarding
process, but the lowest number of corrupted frames because the FCS is
checked. This is usually the default method on a switch.
Cut-Through When a switch uses this method, it will read only the MAC
header and forward the frame. This provides the fastest switching, but
because it does not read the entire frame and verify the FCS, its can result
in the highest number of corrupted frames.
Fragment-Free This method will read the first 64 bits of the frame before
forwarding. Although this does not provide a check of the FCS, which
would require reading the entire frame before forwarding, it does read
enough of the frame to avoid forwarding frames that were damaged
because of collisions. You might consider this to be a compromise between
the other two methods. It does not have the speed of cut-through, but
neither does it produce the levels of corrupted frames . It is faster than
store-and-forward and it results in more corrupted frames than store-andforward, but certainly not as many as with cut-through.

Describing End-to-End
Communications
In this section, the switching and routing processes are integrated. The
contents of the MAC and IP headers are monitored as a packet is transferred
from one computer to another through the switch(es) and router(s). Because
the process is slightly different (and less complicated) if the source and
destination computers are in the same LAN than if they are in different LANs
(or subnets), each process is given its own section.

Understanding the Local LAN Process
Using F igure 11-8, if WS 1 needs to send a packet to WS 2, the following
steps will occur for each packet:

Figure 11-8: Local LAN process
11oo-

f - - ----l -

._.

Rl

1. WS 1 examines the destination IP address of WS 2 with respect to
its own IP address and determines whether the two computers are in the
same network. It comes to the conclusion that they are.

2. If WS 1 had come to the conclusion that WS 2 was in a different
network, it would have performed an ARP broadcast for the MAC
address that corresponds to the IP address of its default gateway (the
R1 router interface). However, because they are in the same network, it
performs an ARP broadcast in the local LAN for the IP address ofWS 2.

3. All computers connected to the switch SW 1 (including the router
interface) receive the ARP broadcast, but only WS 2 responds with its
MAC address.
4. WS 1 places the MAC address of WS 2 in the MAC header and sends
the frame to the switch SW 1. The switch reads its MAC address table,
identifies the switch port to which WS 2 is connected, and switches the
frame to WS 2.

Understanding the Remote Communication Process

M t

al co

dt

ttY: d

ora

Using Figure 11-9, if WS 1 needs to send a packet to WS 2, the following
steps will occur for each packet:
Figure 11-9: Remote communication process
sw 1

Rl

1. WS 1 examines the destination IP address of WS 2 with respect to
its own IP address and determines whether the two computers are in the
same network. It comes to the conclusion that they are not.

2. Because WS 1 came to the conclusion that WS 2 is in a different
network, it performs an ARP broadcast for the MAC address that
corresponds to the IP address of its default gateway (the R1 router
interface).

3. All computers connected to the switch SW 1 (including the router
interface) receive the ARP broadcast, but only the R 1 router interface
responds with its MAC address.
4. WS 1 places the MAC address of the R1 router interface in the
MAC header and sends the frame to the switch SW 1. The switch reads
its MAC address table, identifies the switch port to which the router
interface to R1 is connected, and switches the frame to Rl.
5. R 1 examines its routing table to see whether it has a route to the
network to which WS 2 belongs. If it does not and the router has been
configured with a default route, it will send the packet to that interface.
If it does not have a route to the network in which WS 2 resides and it
has not been set with a default route, R 1 will drop the packet and send a
destination unreachable message back to WS 1. In this case, because WS
2 resides in a network that is directly connected to R1 , the network will
be in the routing table.

E18Me ts ~o

dot d ul ur

fast convergence. There are two contention methods used to get the
frame onto the local network. The one used depends on whether the
frame needs to be placed on an 802.3 (Ethernet) network (CSMA/CD)
or an 802.11 (WLAN) network (CSMA/CA). Switches learn the MAC
address of each device that is connected to each port and store this
information in a MAC address table. When the switch is reading the
frame, it can perform this operation in one of three ways: store-andforward, cut-through, and fragment-free.

Additional Exercises
Using the following output of the
questions 1-5 .
75 . 0 . 0 . 0/2 4 is subnetted ,

s h ow i p rou t e

command, answer

4 subnetsC 75 . 0 . 1 . 0 is

d irectly connected Ser i a l 0 R 75 . 0 . 2 . 0 [ 120/ 1 ] v i a
10 . 1 . 6 . 1 0 : 01 : 00 Serial 1R 75 . 0 .4. 0 [ 120/2] via 10 . 1 . 6 . 1
0 : 0 1: 00 Ser i a l 1C 75 . 0 . 6 . 0 i s d i rect l y co n nected Se r ia l
1

1. What is the administrative distance of the route to the network
75.0.4.0?
2. How many hops away is the network 75.0.2.0?
3. What population method got the 75.0. 1.0 network into the routing
table?
4 . How many active interfaces does the router connected to this router
on interface Serial 1 have?
5. If this router needs to send a packet to the IP address 75.0. 1.9, what
will be the exit interface?

Review Questions
1. Which of the following is not contained in a routing table entry?
A. Source network

C. Every 30 seconds
D. Every 45 seconds
10. What routing rule built into RIP prevents a router from
advertising a route to the same interface on which it was learned?
A . Maximum hop count
B. Split horizon
C. Feasible distance
D. SPF tree

Chapter 12
Managing the Cisco lOS
Cisco routers and switches have an operating system, just as computers have
operating systems. This operating system is used to access and manage the
hardware on the router or switch and is used as the interface to change and
view settings on the device. Although most Cisco devices are now capable of
being managed through a web interface that presents a graphical user interface
(GUI) to the administrator, management of routers and switches traditionally
is done through the Cisco command-line interface (CLI).
Until recently, Cisco switches could have one of two operating systems
installed. The CAT OS, which was inherited when Cisco purchased another
switch manufacturer, continued to be an option until just recently. Cisco
issued its final maintenance release in 2009 and will end support of this
operating system in 2013 . The Cisco Internetwork Operating System (lOS)
has been the operating system in Cisco routers all along, and over the years
Cisco replaced the CAT OS with the Cisco lOS on its switch models.
It is important to understand not only the Cisco lOS and how to use it,
but also the various hardware, software, and firmware locations on Cisco
devices, what information is stored in each location, how the boot process
uses the information in these locations, and how changes to the device are
handled. That is the focus of this chapter. Specifically, this chapter covers the
following topics:
• Describing components
• Describing lOS navigation

• Understanding and managing the boot process

Describing Components
A Cisco router or switch uses an operating system and a number of
configuration files to perform its tasks. These components are stored in
various locations on the device. Some components can even be located on a
different device in the network and accessed as required across the network.
The device also requires some general memory to use as a working space, as
any computing device does.
This section presents the various types of storage that exist on a router or
switch, with a particular emphasis on the type of information that is stored
in these locations. This section also covers the ability of each type to retain
information and the operations required to harness these capabilities.

Defining the Contents of RAM
All Cisco routers and switches have random access memory (RAM). This very
fast memory is used in the same fashion as RAM in a computer or server.
This type of memory requires power to the device to retain its information.
When the router or switch boots up, it will place some information in RAM,
specifically the IOS tables, and it will dedicate some of this RAM to be used
as buffers. This is not unlike the operating system on a computer, which will
"load" itself into memory from the hard drive at bootup and operate from that
location.
Additionally, the device will use RAM as an area to store a copy of the
configuration file at startup. When edits are made to this file for example,
the addition of an IP address to one of the interfaces the change will be
reflected only in the version stored here (called the running configuration)

unless it is copied to the version stored in NVRAM (covered in the next
section).
To understand this~ consider the relationship between memory and the hard
drive in a computer. If you are working on a Microsoft Word document and
making edits~ the changes you are making are being applied to the copy stored
in memory . Those changes will be lost if power is lost to the computer before
you have "saved" them to the hard drive. This is the relationship between
items stored in RAM and those stored in NVRAM in a Cisco router or switch.
In summation~ the contents of RAM in a Cisco router or switch are as
follows :
• The Cisco lOS tables
• The running configuration file
• Buffer space
RAM for a Cisco router or switch plugs into a memory slot~ just as it does
in a computer. An example of Cisco router RAM is shown in Figure 12-1.
This RAM is located in a slot in a Cisco 2501 router.

Defining the Contents of NVRAM
Cisco routers and switches do not have hard drives. Information that needs to
be retained when power is off is stored in nonvolatile random access memory
(NVRAM) or in flash memory (covered in the next section). In this extremely
fast tnemory ~ the saved version of the configuration file is stored. In this
location~ it is called the startup configuration .

files here as well. You might think of this as the hard drive of the device,
because it has much more capacity than the NVRAM and can be used to hold
whatever you want to copy there. Some devices store the bootstrap code there
as well, which otherwise is usually stored in the ROM (covered in the next
section). Flash memory in a Cisco 2501 router is shown in Figure 12-2. The
router contains flash memory in two slots and has an empty slot available to
add more flash memory in flashcard format.

l

..

Defining the Contents of ROM
Read-only memory (ROM) is the same type of chip on which the Basic
Input/Output System (BIOS) of a computer is often stored. It is read-only
and contains what is called bootstrap code. As you will learn in the
"Understanding and Managing the Boot Process" section, when the device
starts, this is the very first place that it looks for instructions. Even if the router
or switch has no lOS in flash metnory, you will see output on the screen, and
this is where that output is coming from. The ROM chips on a Cisco 2501
board are shown in Figure 12-3.

Figure 12-3: ROM

17· 18
62·0S

If you've ever booted a computer with no operating system ~ you know that
the computer will appear to be booting up to a point when it will ask, "Where's
the operating system? I can't find it." The instructions that got the computer
to that point came from the BIOS of the computer stored on the BIOS chip.
Those chips are the same type of ROM.
In the case of the Cisco device~ the same type of instructions (bootstrap
code) is there and will also get the device to the same point where it will
need the operating system. Moreover~ just as you can set the computer to
boot to setup (which means you have instructed the computer to not proceed
to the loading of the operating system but to stop and present you with a
menu enabling you to make changes to or view the instructions held in the
BIOS), you can instruct the Cisco device to boot into ROMmon mode. Once
in this mode~ you can make changes to the way in which the device boots
and view information about those settings. There is more information on this
special mode in the section "Managing the Configuration Register" later in
this chapter.
The various storage locations in a Cisco router or switch and the key
contents of each are summarized here:
Location Type

Contents

NVRAM Nonvolatile Startup config/config register
Flash

Nonvolatile Cisco lOS

RAM

Volatile

ROM

Nonvolatile Bootstrap code

Running configuration

Physical Connection Using HyperTerminal
Making a physical connection obviously requires physical access to the
device. It also requires that the computer from which you are accessing the
Cisco device has a HyperTerminal program installed. Microsoft computers
used to come with a HyperTerminal program installed but no longer do. Free
HyperTerminal programs for Windows XP, Windows Vista, and Windows
7 are available online at http :l/download.cnet.com!H:yperTerminal-PrivateEdition/3000-2155 - 4-1 0966768. html.
In the "Additional Exercises" section at the end of this chapter, you will
have a chance to install this program.
This procedure also requires a connection to the device using a console or
rolled cable. As you learned in Chapter 9, this cable has an RJ-45 connector
on one end and an RS-232, or serial, connector on the other end. The RJ-45
connector is plugged into the console port on the Cisco device, and the serial
end connects to the serial port on the computer, as shown in Figure 12-5.

Figure 12-5: Console port to serial port

.

~al (OIII'IMOr to IN~ port

RJ.-45 <Omle<eot eo Vlt <OMO!e poc1

on tile (ompo1tt

on the roat«

Most new laptops (which are the tool of choice for Cisco technicians) do
not have a serial port. When that is the case, you -vvill need a serial-to-USE
adaptor.
After the connections are in place, start the HyperTerminal program on the
computer. The opening dialog box will require you to answer a few questions
about the settings in the program, as shown in Figure 12-6. In the Location
Information dialog box, set an area code. This is really of no consequence

because we will not be using the HyperTerminal program with a modem, but
you must enter an area code to proceed. Click OK, and the Phone And Modem
dialog box appears.

Figure 12-6: Location Inform ation dialog box
location tnfoffllation
Before you an make

""Yphone or modem connections# \~'S needs

the fobt.ing nformation about your o.rrent location.

What co.l'ltiY/reocn are you In now?

What area code (or dty code) are you in nOW'?

I
If you need to spedfv ~ carrier co~, '~that is it?

I
If you diS a f"U'''t)et to access an outSide lne, what is 1t?

I
The phone system at tns location u:--.es:

r.

Tone <Wng

r

Pulse c:Wno

OK

I

Concel

I

In the Phone And Modem dialog box, accept the default location and click
OK (again, this has relevance only when using a modem, but the box must be
addressed to move forward). The Connection Description dialog box appears.
In the Connection Description dialog box, you can name the connection.
(I have named mine Router.) Naming it is not required, and if you click OK,
the connection will be named My connection . Click OK, and the Connect To
dialog box opens.
In the Connect To dialog box, you can select the COM port you are using.
It \iVill default to COM 1, which is fine because most computers have only one
COM port these days. Click OK, and the COMl Properties dialog box opens.
The COMI Properties dialog box is the final box you receive before the
connection goes live, and it is very important. The settings in each one of
these boxes must be as shown in Figure 12-7. The settings may or may not
default to these options, but clicking the Restore Defaults button should apply
these settings. If you can't make a connection, this dialog box is the first thing
to check.
If your device is already on, when you click OK, the router prompt will
appear and you will be ready to start working with the device, as shown here:

,

•

""'"-........

oc.*

IMOO

..:1

I•

..:1

,..,.I-

~·

D

.._,~

..

li

3
3

--II

.-..

·.

.

letPII'.-f

....

....

::J

c-......,1

I

..--

-

I

I

-- -

.
~

~J~ ........

1."'.. -

Network Connection Using Telnet
If the device has an IP address, you can connect to the device from a computer
by using Telnet. Telnet is a command-line program that is included in most
operating systems, but in many, such as Windows 7, it is not installed by
default To install it, choose Control Panel=> Programs And Features and then
select Turn Windows Features On And Off from the menu on the left side
of the Programs And Features dialog box . When the list of programs that are
installed or not installed appears, scroll down to Telnet Client and select it
Click OK, and the program will install.
After the program is installed, it is used from the command line. Go to the
command line and type telnet and the IP address of the Cisco router or switch
to which you would like to connect If you connect, you will be prompted
for a usemame and password. If no usemame and password have been set for
the terminal connection (which is called a line password and is covered in
Chapter 13, "Configuring Routers"), you will not be allowed to connect.
After you are authenticated, the prompt of the device will appear, and from
that point forward, everything operates just as if you were connected with the
console cable. This is the most common way to access and manage a device,
because it doesn't require physical access to the device. A Telnet connection
can also be established from one router to another at the lOS CLI.

Accessing User, Privileged, and Global
Configuration Modes
There are two levels of access in the lOS, and you must proceed through the
lower security level to get to the higher level. It is somewhat like passing
through a series of logical doors, with each allowing access to more-sensitive
procedures. After you have been authenticated at the privileged access level,
you can access global configuration mode, which is called an operational
mode. The two access levels are as follows:
• Usermode
• Privileged mode (sometimes called enable mode)
You will be prompted for a password only at the privileged mode, but
because you must proceed through privileged mode to get to global
configuration mode, this password controls access to that level as well.
The relationship between these modes is illustrated in Figure 12-8.
Figure 12-8: Access modes

Copy llJ t

a ri

r

'

Router>
(User Mode)

"'
./

''

Router>enable
(Request for Access to Privileged Mode)

''

Password:
(Prompt for Password)

'
Password : password2
(Password Entry)

'
Router#
(Now in Privileged Mode)

''
Router#configure terminal
(Request to Access Global Configuration Mode)

''
Router(configi)#
(Now in Global Configuration Mode)

The commands used to proceed through the three modes as they would
look in the console are shown here:
troy> enabl e
Password :
troy#conf ig t
Ente r c o nfi gura t i o n commands , o ne per lin e .
CNTL /Z .
Troy(con fi g)#

End wi th

Note that the password was typed on line 2 but does not appear on the
screen for security reasons. It is important to understand the types of things
you can do in each of these modes, but it is not necessary to memorize which
Copy llJ t

a ri

commands are available at a certain level. You can use the ? command at any
time to see the commands available at whatever level you are at. The output
at each level is shown next.
The following is the output for user mode :
troy> ?
Ex ec c o mman ds :
<1 - 99>
Sessio n numb er to resume
Ope n a termi nal conn ecti o n
c o nnect
Turn o ff pr i v il ege d commands
d i sab l e
d i sco nnect Disco nnec t an e x i s t ing netwo r k conne c t i o n
e nab l e
Turn o n p r i v il eged comma nds
ex i t
Exi t fro m t h e EXEC
l o go ut
Ex it f ro m t he EXEC
•
p l ng
S end echo messages
res u me
Res ume a n a c t i ve ne t wo rk c o nn ec ti o n
s h ow
Show r u n ni ng system informat i o n
ss h
Open a secu re shell clie n t co nn ecti o n
t e l net
Op en a te l net c o nne c ti o n
termi na l
S e t t ermi na l li ne p arameters
t r acero ut e Tra ce ro u t e t o des ti na ti o n

This is the output for privileged mode:
troy #?
Exe c c o mman ds :
< 1- 99>
Se ssi o n number t o r e sume
a u to
Exec leve l Aut omati o n
Rese t f un ct i o n s
c l ear
c l ock
Manage t h e system cloc k
Ent e r co nf i gurati o n mode
co nf i gur e
c o nnect
Op en a termi nal c o nnecti o n
c o py
Copy f ro m o ne fil e t o ano ther
de bug
De b ugg ing fun c ti ons (see
also @apos ; unde b ug@a p os ; )
De l e t e a fi l e
de l ete
Lis t f il es o n a fi lesyste m
di r

disable
Turn off p r i v il eged comma nds
d i sconnect Disco nnect an ex i s t ing networ k connec t i o n
enab l e
Turn o n pr i v il eged commands
erase
Era se a f il esys t em
ex i t
Exit fro m the EXEC
Exit fro m t he EXEC
l ogo u t
Create new d i r ect o r y
mkd i r
Disp l ay the conten t s of a fil e
more
no
Di sab le d e bugging info rmat i o n
plng
Send ec h o mess ag es
re l oad
Halt and per f o r m a cold restart
resu me
Resume an act i ve ne t wo rk connect i o n
r md i r
Remove ex i st i ng directo ry
set up
Run the SETU P command faci li ty
show
Sh ow runn i ng syste m informat i o n
ssh
Open a secure shell clie nt connec ti o n
te l ne t
Open a te l net c o nnec ti o n
Set ter mina l li ne parameters
termi nal
traceroute Trace ro u te to destination
undebug
Disable debugging functi o ns (see
a l so @apo s ; debug@apos ; )
Config u re VLAN p arameters
v lan
wr i te
Write r unning con fi gurat i o n to
me mory , network , or ter mi nal
0

The output for global configuration mode is as follow s:
t roy (con fig)#?
Co nf i gu r e c ommands :
aaa
Authent i ca ti o n , Author i zati on and
Acco un t ing .
access - list
Add an access list e n try
banner
Def i ne a l o gin banner
boot
Modify sys t em b oo t parameters
cdp
Gl o ba l CDP config u rat i o n subcommands
Co n f igur e time - of - day clock
clock
conf i g - r e gister
Def i ne t he config u rat i o n register

crypto
do
dot 11
enab l e
e nd
ex i t
hos t name
in ter fa ce
'
lp
ipv6
line
l ogg i ng
l og i n
mac- address - t able
no
ntp
parser
po li cy- map
priority- li st
pr i v il ege
q u e u e- li st
radi us - serve r
router
secure
arch i va l c ommands
secur i ty
serv l' ce
snmp - server
spann i ng - tree
t acacs - sere r
username
v pdn
vpdn - group
zone
z o ne-pa l' r

Enc ryption module
To run exec comma nds i n con fi g mode
IEEE 80 2 . 11 conf i g commands
Mo d i f y enab l e password parameters
Ex i t from configure mo d e
Ex i t fr om conf i gur e mo de
Set sys t em@apo s ; s netwo rk name
Se l ect an int erface to con fi gu r e
Gl oba l IP conf i gurat i o n subcommands
Global IPv6 config u rat i on commands
Co nf i gu r e a t ermina l li ne
Modify message logg i ng f acilities
Enab l e secu r e l og in check i ng
Configure the MAC add ress table
Negate a command or set i ts defaults
Conf i gu r e NT P
Con f i gu r e pa r se r
Conf i gure QoS Pol icy Map
Build a priority list
Command p ri vilege parameters
Bu il d a cus t om que u e li st
Mo d ify Rad iu s query parameter s
Enab l e a r o uting process
Secure i mag e and conf i guration
I nfra Secu rit y CLi s
Mo d ify use o f network based se r vices
Mo di fy SNMP engine p ara meters
Spann i ng Tree Subsyste m
Modify TACACS query parame t e r s
Estab li sh Use r Na me Authent i ca ti o n
Virtua l Pri va t e Di a lup Netwo rk
VPDN group config u rat i o n
FW wi th zon ing
Zo ne pa ir command

To make using the CL I easier, you should know the following :

• If you type enough of a command for the command interpreter to
distinguish that command from any other command, the interpreter
will accept the command. This is why typing c o py r un s ta rt
will be accepted by the CLI as c o p y running - c o n f i g s t artu p t will be accepted for c o nf i gu r e
c o nf i g and why c o nf i g
t ermi na l.

• The CLI will remember the last 10 commands you have typed. If
you want to reissue a command without typing it again, you can
use the up-arrow and down-arrow keys to scroll through the last 10
commands and use them again without retyping them.
• Many commands have parameters that are used to include details
about the command or to alter the command's function. If you type
the command and then type ? , all parameters for the command will
appear.

Understanding and Managing the Boot
Process
It's not enough to understand where everything is located on Cisco devices.
To troubleshoot a device, it is critical to understand the boot process. There
is a normal boot process and then there are actions you can take to alter the
process. It is important to understand how to do that and in what situation
doing so would be beneficial.
This section covers the boot process in detail. The output that you can
expect to see at certain points in the boot process is described. This section
also explains how to copy a Cisco l OS from a TFTP server, how to set a Cisco
device to boot to a Cisco I OS located in a network location, and, finally , how
to manage the startup and running configuration files referred to earlier in this
chapter.

Understanding the Boot Process
The boot process can be broken down into the following steps:
1. When a Cisco device starts, it first looks for instructions in the
ROM chip, just as a computer will look for instructions in the BIOS
chip. These instructions are independent of the Cisco lOS and will
execute regardless of whether there is an l OS in flash. One of the first
instructions executed is a power-on self-test (POST). All of the hardware
and software contents are checked for functionality.
2. The bootstrap program loads and is executed. You can tell this has
happened when you see output on the screen describing the bootstrap
version and information about the hardware described in the POST, as
shown here:
Syste m Boots trap , Vers i o n 11. 0(10c) , SO FTWARE
Copyrigh t (c) 1986 - 1996 by Cisco Systems
2500 processor with 6144 Kbytes of main
memo ry
F3 : 5593060+79544 + 42 11 60 at Ox3000060

3. Next the device looks in NVRAM for settings contained in the
configuration register. In the upcoming sections, you will be introduced
to the details of these settings and how to change them. For now,
understand that the configuration register will tell the system what step
to take next and what those steps could be:

Boot to ROM Monitor (ROMmon) mode This can be used to edit
the startup configuration file on the device and to load another lOS
.
Image.
Boot to the ROM lOS This is a mini version of the l OS that can
be used for a limited set of functions if the lOS is corrupted (such as
to do\vnload another lOS image).
Look for a startup configuration file in NVRAM

Both ROMmon and the ROM mini lOS are located on
the ROM chip.

4. If the settings in this register are set to the default, the system will
look next in NVRAM for a startup configuration file. This file is read
because it could also contain instructions about the boot order. If there
is no boot system command found in the startup configuration file, the
system will begin a search for an lOS. It will search first in flash, and
then it will look for a TFTP server, and if all else fails, it will boot into
either ROMmon mode or the ROM mini lOS. When the image is found,
the image name will appear on the screen, as in the following example:
Looking for a startup configuration in NVRAM is an
alternate way to manage the boot process rather than
using the configuration register.

Cisco I n te rnetwo r k Ope ra t i ng System So ft ware
IOS TM 2500 Software (C 2500 - I - L) , Versio n 12 . 0(5)
Copyr i g h t (c) 1986 - 1 999 b y c i sco Sys t e ms , I nc .
Compil e d Tu e 15 - Jun - 99 1 9 : 49 by phanguye
I mage text - base : Ox0302 EC70 , data - base : Ox 0000 1 00

5. After the lOS becomes operational, it loads the startup configuration
file located in NVRAM, if the file is present. After it is read, system
messages will begin to appear on the screen as the settings (such as
interfaces being enabled) are executed, as shown here :
00 : 00 : 22 : %LINK- 3 - UPDOWN : In te rfa ce EthernetO ,
changed sta t e t o up
00 : 00 : 22 : %LI NK- 3 - UPDOWN : I n te rf a ce Ser i a l O,
c hange d state t o up
00 : 00 : 22 : %LINK- 3 - UPDOWN : In terface Serial 1 ,
changed state t o up

00 : 00 : 23 : %LINEPROT0 - 5 - UPDOWN : Line protocol o n
Int erface Et he r ne t O, cha nged state t o up
00 : 03 :1 3 : %LI NK- S- CHANGED: I n t e rf a ce Se r i a l O,
change d state to admin i strat i ve l y down
00 : 03 : 13 : %LINK- 5 - CHANGED: I nterface Serial 1 ,
change d state t o admin i strat i ve l y down

6. If the file is not found or if you have configured the device to ignore
the file (using the configuration register settings), you will receive a
menu-based set of prompts that will allow you to create one. You can
choose to either use this method to create the file or answer no to the
first question in the series, and the system will proceed on to the CLI
interface. The first part of the setup menu is as follows:
--- Syste m Con fi gura ti o n Di a l og --At any point you may enter a questi o n mark I? ' for
help .
Use ctrl - c to abo rt configu rat i on dialog at any
prompt .
Defau l t sett i ngs are i n squ ar e b r a c ke t s I []I.
Con tinu e wi th con f igura t i o n d i al o g? [yes ] :

7. If a configuration file is found or if you answer no to the first question
in the setup menu, the router will proceed to the CLI and you will see
the following prompt:
Press RETURN to get started !

The Boot Decision Process
Here is a more visual representation of the boot decision process.

POST
Bootstrap

Found lOS?

ROM
Monitor
Mode

Yes
Boot interrupted?
No

Enter
setup
mode.

No

Found Config file?
Yes
Load from?

Local

?--- ---<.. Network

NVRAM
TFTP Server

NV RAM

TFTP

Yes
No, _ _o:::;....._- . ,

Found TFTP?
Yes

Load
config
file.
The Boot Process

Managing the lOS
The Cisco lOS image file can be loaded from flash, which is the most
common location, but it can also be loaded to the device from a TFTP server.
This is a much slower way to load the l OS, but it does offer the benefit of
maintaining the image for multiple routers in one location. Operations such as
updates and image patches can then be managed in a central location and can
help to maintain lOS image consistency across multiple devices.
To set the device to boot from an image located on a TFTP server, a
command must be executed (b oo t syste m t f tp : I I ip_ addressl fil ename )
and saved to the startup configuration file. When that file is read as indicated
in step 3 of the boot process (as shown in the previous section), it will instruct
M t

al co

dt

ttY: d

ora

the device to skip looking for the image in flash and proceed to load the image
from a TFTP server. Because the command will also include the IP address of
the TFTP server and the name of the image file on the server~ it will greatly
speed the process as the default TFTP location method \Vill be broadcast for
the TFTP server.
A more common use of a TFTP server is as a platform to transfer lOS
images to the router and to store images for backup and maintenance. The
TFTP server can be used to store startup configuration files as well. This
offers the same benefits as does centrally locating lOS images~ that is~ the files
can be managed and edited offline in a central location and then loaded to the
devices when desired.
To load an image from a TFTP server to a
are as follows:

router~

conceptually the steps

1. You must ensure that at least one interface on the router is enabled and
has an IP address in the same subnet as the TFTP server. You should test
this by ensuring that you can execute the p i ng command successfully
from the router to the TFTP server.
2. Place the lOS image on the TFTP server in the outbound directory.
This will be the default location that the TFTP server will look to when
the file is requested by the router.
3. Make your connection to the router by using a Cisco console cable.
4. Enter privileged mode on the router.
5. Execute the command copy tftp flash . This tells the router you want
to copy an image from a TFTP server to flash memory.
6. The system prompts you first for the IP address of the TFTP server~
and then for the name of the image file.
7. The system asks whether you want to erase the current image file. If
you have sufficient room in flash~ you can keep both the old and the new
file. If you are unsure of the room~ you can check the available space in
flash by using the sho w flash command. The output you receive will

tell you the name of the current lOS file, its size, and the amount of space
that remains available:
F ile Length Name/status
1 10218 508 /c2500 - j s - 1_1 20 - 8 . b i n
[ 1 03 1 647 1 bytes used , 6460745 ava i la ble , 1 67772 1 6
t o tal]
1 638 4K bytes o f p r ocessor b o ard Sys t em f l ash
(Read ONLY)

8. When you confirm the process, you will see system messages that will
keep you apprised of the progress, as shown next. If you chose to erase
the existing file, you will see that process take place first, as indicated by
the series of lowercase e's shown in the output. When the transfer of the
image starts, it will be indicated by a string of exclamation points. When
this is complete, the system will reboot.
Accessing f il e 'c2500 - j s - l 11 3 - 3 . b i n ' o n
171 . 71 . 93 .1 92 ...
Lo a ding c2500 - js - l 1 13 - 3 . b i n fr o m 1 71 . 71 . 93 . 1 92
(v ia Eth ernetO) : ! [OK]
Eras ing
dev i ce ... eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
... e ra sed
Lo adin g c2500 - js -l _ 1 13 - 3 . exe fro m 1 71 . 71 . 93 . 1 92
(via EthernetO) : ! ! ! ! ! ! ! ! ! ! ! ! ! !
. . . . . . . .. . . . . . . . . .. . . . . . . .. . . . . . . . . .. . . . . . . .
'''''''''''
''''' ''''''''''''' ''''' ''''''''''

[OK - 89009 24/ 1 6777216 byt es]
Ve rif ying c he cks um ... OK (Ox8ABE )
Fl ash copy took 0 : 04 : 57 [hh : mm : ss ]
%FLH : Re - booting system after download

Understanding Configuration Files
During our discussion of router storage locations and of the boot process, I
have made numerous references to two configuration files. It is important that

immediately. Ho,;vever, if you want these changes to remain in effect at the
next restart, you must copy these changes to the startup configuration file
located in NVRAM. This is done by executing the copy runn i ng - con fi g
startup - co n fig (copy run start for short) command.
If you make changes to the running configuration that you decide you do
not want to keep and you have not saved them to the startup configuration
file , you can remove them in one of two ways:
• If it is acceptable to take the device offline, restart the device, and
the device will simply copy the startup configuration to RAM as the
running configuration when the devices starts.
• If it is not acceptable to take the device offline, execute the copy
startup - con fi g r unning- con f ig command (copy star t r un).
This may briefly interrupt some of the functionality of the router,
but not as severely as restarting the device.

Managing the Configuration Register
Besides containing the startup configuration, NVRAM contains the
configuration register. This is a 16-bit fie ld in hexadecimal that contains
information about the boot process. Each of the 16 bits can be set either to
1 (on) or 0 (off). When you make changes to the configuration register, it is
done in hexadecimal, and the value you enter is preceded by the characters
Ox, which will simply communicate to the device that what follows is in hex.
To make the relationship between the hex and binary clearer, look at
Figure 12-9. You can see that there are four sets of 4 bits. The bottom line
indicates the current setting in binary . The top line (2 1 0 2) indicates the
hex version and is what you would enter at the CLI to make a change to the
setting.

Figure 12-9: Configuration register

Copy llJ t

a ri

The default setting for the configuration register is Ox21 o2 . The third
number (0, vvhich is the setting for the bits 7-4 described earlier) is the
number of interest when controlling the use of the startup configuration file.
The relevant settings with respect to the startup configuration file are as
follows:
• ox 2 1 o2 instructs the device to read and apply the startup
configuration file in NVRAM.
• Ox2 1 4 2 instructs the device to not read and apply the startup
configuration file in NVRAM.
The configuration register can be edited in two ways. If you have access
to global configuration mode (meaning you can provide the privilege mode
password if required), it can be done from the CLI. In that case, you can use
the conf i g-register command along with the proper setting in hex preceded
by the required ox . After executing the command, save the changes to the
startup configuration file by executing the copy r un start command. When
the device reboots, it will use the settings you have just applied to the register.
If you are performing a password recovery (meaning the password is
unavailable), this approach will not be an option. This operation will have to
be performed while booted into ROMmon mode. The default for the device is
to not boot into ROMmon mode, but rather to look in NVRAM for any boot
commands in the startup configuration file, and then if there are none (which
is usually the case), to load the lOS from flash and then apply the startup
configuration file.
Therefore, this default procedure must be interrupted by executing what
is called a break sequence while the system is booting up, before it has a
chance to get to the NVRAM portion of the process. A break sequence is
a combination of keys to strike on the keyboard within a certain period of
time after restarting the device. What constitutes a break sequence depends on
factors such as the operating system of the computer you are using to connect
to the Cisco device and the type of HyperTerminal software.

A comprehensive list of break sequences for common
operating systems and versions of terminal software can
be found at www.cisco.com/en!US/products/hw/routers/
ps 133/products_tech_ note09186a008017 4a34.shtml.

When you have determined the break sequence, follow this procedure to
erase or reset the password:
1. Restart the device. Within the first 60 seconds after you have started
the device, execute the break sequence.
2. If you have executed the proper break sequence, the prompt of the
device will appear as follows: r o mmo n 1>.
3. At this prompt, type the following command: r o mmon l >confreg
Ox2142.
4. When the prompt changes, type the following command:
r o mmon2> reset.

5. When the device restarts, you will get the menu-based setup. Answer
no to the first two questions, and the device will proceed to the CLI.

6. At the first prompt, type the following command: r o ut er>enable.
Now you are in privileged mode.
You are not prompted for a password when you request
access to privileged mode because you are in ROMmon
mode, where the configurations file containing the
password is not read or used.

7. The prompt changes, and now you can do one of two things,
depending on your ultimate intentions:
• If you want to wipe out the entire configuration file containing
the passwords and all other settings (perhaps because you are
redeploying the device for another purpose), execute the command

9. Finally, before you restart the device, you need to tell the device to
use the startup configuration file you just edited. (Remember, you set it
to ignore the file earlier.) Do this by executing the following commands:
r ou te r# c o nfig t
r ou t er(con fi g)#
r ou te r(co n fi g)#
r o uter #copy run

e rmina l
confi g - reg i ste r Ox2102
c #AZ
s t ar t

(The c # " z part means you press Ctrl+Z on the keyboard.)
10. When you next restart the device, it will read and use the file that
contains the password that you just edited.

The Essentials and Beyond
A Cisco router or switch uses an operating system called the lOS
and startup configuration and running configuration files to perform
its tasks. Cisco devices also contain four storage locations: RAM,
NVRAM, ROM, and flash memory . RAM is an area where the
running configuration and the lOS tables are kept, and it is volatile.
NVRAM is nonvolatile and is where the startup configuration file is
kept. ROM contains the boot code and a mini version of the lOS.
Flash memory is used to store the lOS image file .
The startup and running configuration files contain all the settings
of a router or switch. The startup configuration file is applied to the
device every time the device is started or restarted and resides in
NVRAM. After it is copied into RAM at startup, it is renamed the
running configuration.
There are two ways to make a connection to a Cisco router or
switch: the HyperTerminal program installed on a computer or over
the network using Telnet. There are two levels of access to the lOS:
user and privileged. The default boot process of a Cisco device is to

access the bootstrap code from ROM~ locate the lOS in flash~ and
load and apply the startup configuration file from NVRAM.

Additional Exercises
1. In this exercise, you will download the free HyperTerminal software,
install it, connect to the router with a console cable, and access the
router prompt. This exercise requires the following:

• A computer with Internet access
• A router or switch
• A Cisco console cable
Follow these steps:
A. Connect the RJ-45 end of the console cable to the router console
port. Connect the serial end of the console cable to the serial port on
the computer. Start the router.
B. Use your Internet browser to access the following web URL:

http://download.cnet.com/HyperTerminal-Private-Edition/
3000-2155 4-109667 68.html. Click the Download Now button to
download the free HyperTenninal software.
C. When the software downloads, make note of the location where it is
being saved. Once the software is downloaded, browse to its location
and click the h t pe 7 . exe file . Click Next to start the installation.
D. Accept the license agreement and the default installation location.
Click Finis h ~ and the installation is complete.
E. Choose Start=> Programs=> HyperTerminal-Private-Edition.
Double-click to start the application.
F. In the Area Code section of the Location Information dialog box,
enter your area code.
G. In the Phone And Modem dialog
default.

box~

click OK and accept the

H. In the New Connection-HyperTerminal dialog box, name the
connection after your first name.
I. In the Connect To Port dialog box, select COM 1.
J. In the COM1 Port properties dialog box, use the following settings:

9600
8
None
1 None
K. Press Enter.
2. Match the storage location with the items that are contained in that
area of the Cisco device.
Location Contents
Flash

Startup config/config regi ster

RAM

Bootstrap code

ROM

Running configuration

NVRAM Cisco lOS

Review Questions
1. Where are the Cisco lOS tables located after startup?
A. ROM

B . NVRAM
C. RAM

D . Flash memory
2. Where is the configuration register located in a Cisco device?
A. ROM

B . NVRAM
C. RAM
D . Flash memory
3. Which of the following storage types loses its information when
power is lost?
A . ROM
B . NVRAM
C. RAM
D . Flash memory
4. Which of the following is not required to make a Telnet
connection a Cisco device?
A . IP address
B . Line usemame and password configured
C. Device name configured
D . Router interface enabled
5. Which of the following correctly describes the ends of a
standard console cable?
A . Serial and USB
B. USB and USB
C. Serial and RJ-45
D . USB and RJ -45
6. By default, what is the only mode in which you will be
prompted for a password?

Chapter 13
Configuring Routers
Cisco routers and multilayer switches can be configured to do some pretty
amazing things. However, before a router can perform the magic it does
so well, some basic configurations (such as configuring IP addresses and
enabling the interfaces) must be in place, or the router will not function.
This chapter covers such configurations. Specifically, this chapter covers
the following topics:
• Cabling the router
• Creating a console session
• Configuring passwords
• Configuring interfaces
• Saving configuration changes

Cabling the Router
In Chapter 9 you learned about the major cable types. The cable covered in
that chapter that will most often be used with routers is Ethernet twistedpair with RJ-45 connectors. These cables can be used to connect routers to
switches and to other routers. There are several other cables and connectors
you must also be aware of that can be used from router to router and from a
router to a WAN connection.

Cisco makes many configurations of interfaces on routers. The trend has
been away from routers with fixed-interface configurations, such as the Cisco
2501 shown in Figure 13-1 , and toward those hosting slots for functionspecific modules. This change enables customization of a router for a specific
function while affording the flexibility of updating the router at any point
in time. The backplane of the Cisco 2501 in Figure 13-1 has an Attachment
Unit Interface (AUI) style Ethernet connector (which uses a female DB-15
connector), two serial connecters (which are using a female DB-60
connector), a console port, and an AUX port (with an RJ-45 connector) used
for modem access to the router. This model doesn't have a single RJ-45
Ethernet connector, and because it has no slots for expansion modules, you
\¥ould have to perform what is called a forklift upgrade to add this capability.
When you have to completely replace a router because there
is no way to upgrade its features, that replacement is called a
forklift upgrade.

When these models were in use, Cisco made about seven variations of
them. Each model had a set configuration of interfaces.

Some of the smaller Cisco routers still follow the fixed-interface paradigm,
such as the Cisco 871 in Figure 13-2. These models are usually designed as a
unit for a specific purpose. The 871 is typically the only router in a mid-sized
office and also serves as the connection to the Internet for the office. It has
two USB connectors, four Fast Ethernet ports (RJ-45s), and a Fast Ethernet
port to connect to the WAN connection. The Fast Ethernet WAN connection
typically connects to the ISP's DSL broadband modem. A smaller or mediumsized office is much more likely to make its connection to the Internet via
Uh

tt

~

httzt

\l

ri

DSL broadband than through a CSU/DSU as a larger office might. Finally, as
all Cisco products do, this router has the console connector.

CSU/DSU
A Channel Service Unit/Data Service Unit (CSU/DSU) is a digitalinterface device used to connect a data tenninal equipment (DIE)
device, such as a router, to a digital circuit, such as a Tl line . The
CSU/DSU is usually placed on the customer premises by the provider,
and the router connects to it. However, the router can contain a CSU/
DSU, in which case the router would plug directly into the Tlline. An
example of this is the router in Figure 13-4, which has an expansion
module that contains a Cisco T 1 DSU/CSU WAN interface card.

The Cisco 1841 is a comtnonly used enterprise-level router. It comes with
two empty slots that can host modules of all sorts. They could be modules
providing wireless access ~ they could host WAN connections, or multiple
serial or Ethernet connections. While Ethernet connections are typically used
to connect to switches, the serial connections can be used either as a WAN
connection or as a connection to other routers in the LAN. Figure 13-3
shows an 1841 with modules installed. In this instance, the slot on the left
holds a Cisco T1 DSU/CSU WAN interface card, and the slot on the right

holds a four-port Cisco EtherSwitch card, which allows you to add switching
capability to the router. Cisco 1841 also comes with a slot on the lower-left
side (under the slot holding the Cisco Tl DSU/CSU WAN interface card) to
add more flash memory, two Fast Ethernet ports, a console port, and an AUX
port. The list of modules that can be purchased and inserted into these two
slots is impressive.
For a list of possible expansion modules for the 1841 router,
www.cisco.com/en/US/products/ps5853/
go
to
products_relevant_interfaces_ and_ modules.html.

Regardless of the interfaces that are available on the router that you work
with, certain interface types will always be in use and should be discussed.
These interfaces may be found fixed on the backplane of the router or they
may be found in an expansion module in a slot. The cables used and the \¥ay
in which the interfaces are used will remain constant.
In the rest of this section, the connections between a router and other
common devices are covered, with special attention to the interface types and
cables used to ensure proper communication.

Cabling Router to Router

A router-to-router connection can be cabled one of two ways. It can be
accomplished with an Ethernet connection or it can be done by using the serial
connectors on the routers. The Ethernet connection requires less configuration
once cabled, but in many instances Ethernet connections on a router are at a
premium because they are typically used to host switches loaded with hosts.

Ethernet
This is a simple connection. Simply plug the end of a twisted-pair Ethernet
cable into the Ethernet (or Fast Ethernet) slot (RJ-45) on one router, and the
other end of the cable into an Ethernet slot on the other router. Make sure you
keep your cable length under 100 feet to ensure no attenuation problems. Also
don't forget that a router-to-router connection requires a crossover cable, not
a straight-through cable! Figure 13-4 shows this connection between two 871
routers.

Serial
There can be numerous types of serial connectors found on a Cisco router. A
common type is the DB-60 you saw in the 2501 earlier, but you are also likely
to see what is called the smart serial connector on newer models. A smart
serial is a smaller 26-pin connector but it functions the same as the DB-60.
The serial cable, regardless of the form factor of its connector on the router
end, can be connected to another router or it can be connected to a CSU/DSU
for WAN access. In either case, it important to understand how serial cables
operate with Cisco devices. Each end of the cable plays a distinct role in the
communication process.

Uh

tt

~

httzt

\l

ri

One end of the cable is called the data terminal equipment (DTE) , and the
other is called the data communications equipment (DCE). When a router is
connected to a CSU/DSU, the CSU/DSU is the DCE, and the router is the
DTE. The DCE end of the process provides the clocking for the connection,
which must be performed by one end only and followed by the other end.
When two routers are connected with a serial cable, you must designate
which router will perform the clocking. You also must ensure that the DCE
end of the cable is connected to that router. The DTE and DCE ends are
usually clearly marked on the end of the cable.
When two routers are connected back to back, there are two possible
cabling options. There is a two-piece cable set with one end of each cable
having a DB-60 or smart serial (router-friendly) connector and the other end
having a connector called a V.35. One of the cables will have a male V.35
connector, and the other will have a female V.35. The cables coming from
each router meet at the V. 35 connector. One end of one of these cables is
shown in Figure 13-5. The V. 35 end is the end not connected to the router.

There is also a one-cable method for this. A back-to-hack cable is one in
which both ends are router friendly (DB-60 or smart serial), and the ends are
marked DTE and DCE. The cable simply connects from one router to the
other, as shown in Figure 13 -6.

In the section "Configuring Interfaces," you will learn how to configure the
serial interface to ensure that the clocking is enabled on the correct end of the
cable.

Figure 13-6: Back-to-back

Cabling Router to Switch
Twisted-pair cables with RJ-45 connecters are used between routers and
switches. Although some older routers do have an AUI-style Ethernet
connector on them, as the 2501 shown earlier does, you will rarely encounter
anything but an RJ-45 connector for a Fast Ethernet connection.
To cable the router to the switch, connect one end of an Ethernet cable to
the Fast Ethernet port on the router, and the other end to the switch . There are
two items you need to take into consideration with this procedure:
• Make sure you are using a straight-through cable and not a
crossover!
• Understand the difference between the types of ports that may be
available on the switch and when to use each type. The types
available and their uses are as follows:
10BaseT Use for access devices (computers, printers, and so on).
lOOBaseT Use for access devices if a 1000BaseT port is also present,
and use for connections to other switches and to routers if the other
ports are 1OBase T.
1OOOBaseT Use for connection to other switches and to routers, and
use for access devices only if all of the ports are 1OOOBase T.

Regardless of which combination of port types y ou have on the switch, you
should use the slower ports ( 1OB aseT or 1OOB aseT) for devices connected to
the switch and use the faster ports (100BaseT or 1000BaseT) for connection
to routers or to other switches, because those connections are likely to carry
more traffic and need the capacity.
Switches are often connected to one to another by using
trunk links (see Chapter 14, "Configuring Switches"). Trunk
links carry traffic from many VLANs and therefore need to
be as high capacity as possible .

In Figure 13-7, an 871 router is connected to a Cisco 1900 access switch.
Note that one of the two 100BaseT ports on the right end is used on the switch
instead of one of the 10BaseT ports.

In the section "Configuring Interfaces," you will learn how to configure
either end of the connection to ensure proper function.

Cabling PC to Router
There are two ways to cable a PC to a router. You could connect an Ethernet
cable from the network card of the PC to one of the Ethernet interfaces on the
router. If you did and you ensured that the router interface and the PC had IP
addresses in the same subnet and that the interface on the router was enabled,
you could create a Telnet connection from the PC to the router for the purpose
of managing the router. This connection is shown in Figure 13-8.

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Although this type of connection is possible, it is rarely donebecause the
normal way to manage the router is by connecting to it with the console cable,
as shown in Figure 13 -9. If you do need to make this type of connection,
remember that the cable needs to be a crossover cable, not a straight-through
cable!
When connecting the console cable, connect the RJ-45 end to the console
port on the router, and the serial end to the serial port of the PC, as shown in
Figure 13-9.

'

M ljO<lBOf'

Cabling Router to CSU/DSU
When connecting a router to a CSU/DSU, various serial connector types
could be installed on the CSU/DSU end of the cable. The router end will most
likely have either a serial with a DB-60 connector or a smart serial with a
24-pin connector. The CSU/DSU end could have any of the standard types
shown in Figure 13-1 0. This means that you must buy a cable with the correct
connector on each end for your specific situation.

Figure 13-10: CSU/DSU connectors
Serial or Smart Serial

E=-1

Ec:::::>OJ

-

-

c::J

-

c::J

c::J

~

-· ~

iol

.

I

ol

.

EIA/TIA-232

~~
o\ ~~ol.
~

.: ·:::::::: .:

EIA/TIA-449

V.35

~

·::::::::

ioCJ ol iol
X.21

1

ol

EIA-530

You need to be aware that in some cases the CSU/DSU function is built
into the router. You saw this in Figure 13-3, \¥hich shows a Cisco 1841 with a
module installed that provided a CSU/DSU T1 interface. This eliminates the
need for the service provider to install a CSU/DSU at the site. In this case,
you would connect the router's interface (an RJ-48) to an RJ-48 T1 wall outlet
from the service provider. The CSU/DSU on the router would talk to the
CSU/DSU at the service provider's central office. This connection is shown
in Figure 13-11.

Figure 13-11: CSU/DSU in router

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

In the section "Configuring WAN Interfaces," you will learn how to
configure the WAN interface to communicate with a CSU/DSU provided by
the ISP as well as how to configure a WAN interface that runs between two
of your own routers.

Creating a Console Session
Before you can configure the router, you must create a console session with
the router. As you learned in the section on cabling from the PC to the
router, this can be done either by directly connecting to the console port
with a console cable or by connecting to the router over the network. In this
section, you'll review the console connection procedure that you learned in
the preceding chapter and explore a more detailed explanation of connecting
via the Telnet program. Finally, you will learn about handling the initial
screens you will encounter with either method.

Connecting with the Console Cable
After you have the router and the PC cabled together, as shown earlier in
Figure 13-9, use the HyperTerminal program to create a terminal or console
session with the router. If the computer you are using is Windows XP or
later, you will need to install a HyperTerminal program. You can review the

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

configured a virtual terminal (vty) or line password. Moreover, attempts to
log into a router by using Telnet that are received by a router or switch with
no Telnet usemame or password set are denied by default. If you attempt it,
you will receive the following response:
Password n o t set , co nn ect i o n re f used

The password requirement is a good security feature to leave in place.
Moreover, the IP address of the router interface must be reachable by the IP
address of the PC . That doesn't necessarily mean that the IP address of the PC
must be in the same subnet as that of the router, but if it is not, there must be
a router providing routing from the subnet in which the router resides and the
subnet in which the PC resides.
If these prerequisites are in place, the next consideration is the Telnet
program on the PC. If it has not been installed, it must be, as described in
Chapter 12. After the program is installed, it is executed from the command
line. The followin g steps can be used to start a Telnet session with a router
that has an IP address of 192. 168.5.5:
1. Open a command prompt on the PC and type this command:
telnet 1 92 . 168 . 5 . 5

This output will appear:
Co nnec t i ng to 192 . 1 68 . 5 . 5

2. If the router is reachable, one of two things will occur:
• If a Telnet password has been configured, you will be prompted to
type the password.
• If no Telnet password has been created, you will receive the
following message:
Pa ssword n ot set , connect i on re f used

At this point, we would normally save this change to the startup
configuration by executing the copy ru n start command. But in this case,
let's test it by exiting out to user mode and see if it works:
Ro u ter(con fi g)# exit
Router# exit
Rou t er>

There are two ways to move "backward" in the prompt
hierarchy. One way is to use ex i t, and the other is to use the
Ctrl+Z key combination.

Now at user mode, attempt to enter privileged mode. You should be
prompted for the password:
Ro u ter>enab l e
Password :
Rou t er#

<type c i sco>

Configuring Enable Secret Passwords
In some cases, the startup configuration file may be located on a TFTP server,
meaning that when you provide the enable password to access privileged
mode, the password must cross the network. If you configure only an enable
password, it \Vill cross the network in plain text, which means it can be can
read if the packet is captured with a sniffer.
To encrypt the enable password, you can create an enable secret password
instead. The only difference is that \Vhen you execute the command, you
specify that you would like the password to be encrypted by substituting
secret for password in the command:
Ro u ter(config)#enable secret cisco

If both an enable and enable secret passwords are configured on a router,
the router will prompt for the encrypted password instead of the unencrypted
password.

Configuring Line Passwords
The two passwords discussed thus far apply to the access of privileged mode
after a connection has been made. Passwords can also be configured to
authenticate access to connection methods. The most common use of this type
of password is to authenticate a user before allowing access to the router
through a Telnet or vty session. This is called a line password.
vty stands for virtual teletype terminal.

To configure a line password, it is necessary to proceed through the
access levels to global configuration mode and then proceed from global
configuration mode into line configuration mode. The line command also
must specify the connection type for which you want to require a password,
as shown here:
Router>enable
Password :
<type
Ro u t e r#co nfi g t
Ro u ter(conf i g) # li ne

C l' SCO>

<type t he method>

Configuration modes beyond the global mode apply
commands only to the specific part of the router (not the
entire router). Commands executed in an interface mode
affect only that interface.

At this point, you type line and specify the connection type. The choices
are console (connection through the console cable), vty (connection through

Rou ter #config t
Enter configurat i on commands , one per li ne .
End wi t h
CNTL/Z .
Rou ter (co nfig)#interface
<interface identifier>

The interface identifier refers to the media type, the slot number, and
the port number. The media type could be Ethernet, Fast Ethernet, Gigabit
Ethernet, or Serial.
These are only the most common media types.

When you enter the interface numbers, you must keep in mind that
interfaces on routers are numbered starting with 0, not 1. Consequently, if you
had only a single Fast Ethernet interface on the router, its number would be
F astEthernet 0.
Routers without slots that have fixed interfaces, such as the old 2501, \iVill
ignore the slot number and use the following syntax:
• EO stands for the first Ethernet interface.
• SO stands for the first Serial interface.
Routers that have interfaces arranged into slots will follow the media type,
slot number, and port number syntax as here:
• Serial 0/0 is the first serial interface (or port) in the first slot.
• Fast Ethernet 0/2 is the second Fast Ethernet interface (or port) in
the first slot.
Fa is short for Fast.

For example, the following command enters the configuration mode
required to make changes to the first F ast Ethernet interface located in slot 0
of a router:

Enabling the Interface
When you make configuration changes to the router and the changes are
accepted, while they are being applied you will many times see what are
called system messages appear on the screen. These are messages indicating
something is changing in the router. For example, when you have successfully
completed the configuration of an interface, you will see a message indicating
that the interface is becoming operational or "coming up."
You will not see such a message after you have executed the command
in the previous section. This is not because the command was not accepted
or applied. It is because the interface has not been enabled. To enable the
interface, you must execute the no shu t down command:
Yes, it's crazy. To enable the interface, you execute the
shutdown command.

no

Ro u ter(config)#interface fa0/0
Ro u ter(con f i g - i f )# ip a ddress 1 92 .1 68 . 5 . 5 255 . 255 . 255 . 0
Ro u t e r (con f i g - if )# n o sh u t down
%LI NK- S- CHANGE D: I nterface FastE t hernet0/0 , changed state
to up
Ro u ter(conf i g - if)#

Notice what happened after this command was executed. You received a
message indicating that the interface state has changed to up . It is important
to understand that this message does not indicate that we can now connect to
anything on that interface. In fact , it may not even have a cable plugged into
it!
In the next section, you will learn how to verify the condition of the
interface and gather more-detailed information about its usability .

Verifying the Interface

To verify the interface, you need to use one of the show commands. The
show commands, by default, do not work in configuration mode or interface
configuration mode.
If you add the do command at the front of the show
command, you can execute the show command from
configuration mode!

So you need to exit, or back out, to privileged mode:
Ro uter(conf ig - if) # ex i t
Ro uter(conf i g)#ex it
Router#

The show command used to verify an interface is show i nte rf ace . If
it is executed with no parameter, it will display all interfaces with a section
dedicated to each. If you specify the interface after the command, it will
display only information regarding that interface. Because \iVe are interested
in only the fa0/0 interface, we could execute the following command:
Router#show int fa0 /0
FastEthernet0/0 is u p , line protocol is down (disabled)
Har dwa re is Lance , address
is 000 1 . 9638 . 3073 (b i a 00 01 . 9638 . 3073)
I nt erne t add r ess is 1 92 . 16 8 . 5 . 5/24
MTU 1500 bytes , BW 1 00000 Kbit , DLY 10 0 usee ,
rel i a b ility 255 /2 55 , t xload 1/ 255 , rxl oad 1/ 255
En capsu l at i o n ARPA , l oopb a ck no t se t
ARP type : ARPA, ARP Ti me o u t 04 : 00 : 00 ,
La st in put 00 : 00 : 08 , outpu t 00 : 00 : 05 , output hang ne ver
Last clearing of @quot ; show interface@quot ; counters
never
Input queue : 0/75/0 (size/max/dro ps) ; To tal ou tpu t
drops : 0
Qu eueing strategy : fifo
Output queue : 0/40 (size / max )

5 minute input rate 0 bits/sec , 0 packets/sec
5 minute ou tput rate 0 bi t s/sec , 0 packets/sec
0 packets i nput , 0 bytes , 0 n o buf f er
Received 0 broadcasts , 0 runts , 0 giants , 0 throttles
0 input
errors , 0 CRC , 0 frame , 0 overrun , 0 i g nored , 0 abort
0 i nput packets wi th d r ibble cond i t i on de t ect ed
0 packets output , 0 bytes , 0 underruns
0 output errors , 0 co ll isi o ns , 1 interface resets
0 babbles , 0 late collisi o n , 0 deferred
0 l os t carrier , 0 no carrier
0 ou t put buffer f ailu r es , 0 o utput buf f e r s swapped
out

There is a lot of information displayed. Let's concentrate on the basic
information at the first part of the output and discuss how to interpret the
information. The part v1e are talking about is shown here:
Router#show in t fa 0/0
FastEthe r net0/0 is up , line prot oco l is down (disabled)
Hardware is Lance , address
is 0001 . 9638 . 3073 (bia 0001 . 9638 . 3073)
Internet address is 192 . 168 . 5 . 5/24

The first line tells us the condition of the interface. The first part (on the
left) that reads FastEthernet0/0 is up means that the interface has been
enabled and has an IP address. The second part, line protoco l i s down
(d isabled) , indicates that there is no life on the other end of the line because
no keep-alives are being received.
Keep-alives are used between the interfaces by Network
Access layer protocols to detect when an interface is no
longer active .

It is more likely that the router interface will be functioning as a DHCP
server than as a client. The steps to do this are as follows:
1. Enable the DHCP server.

2. Configure a DHCP address pool.
3. Configure the pool options.
Enabling the DHCP server is not done on the interface. DHCP is a service
that is enabled at the global configuration prompt. Enabling the service on
each interface is done by configuring an address pool that includes the subnet
in which the interface resides. To enable the service globally, execute this
command:
Router(config)#service dhcp

Before we can enter the configuration mode for the pool, we need to create
and name the pool. After we have executed that command, the prompt will
then go to the configuration mode for that pool. If we ever need to go back and
make changes to the pool, we can enter its configuration mode by using the
same command that created the pool. To create the pool named our new dhcp
pool, execute the following command at the global configuration prompt.
Notice the prompt change to the configuration mode for the pool.
Ro uter(conf i g)# i p d h cp poo l @quot ; our n ew dhcp
poo l @quo t ;
Rou ter (dhcp- config)#

If you have spaces in the name of the DHCP pool, the name
must be surrounded by quotes.

To create the addresses and the subnet mask for the pool, you must
consider the IP address of the interface on which DHCP will operate. Because
we already have set an address and mask on the Fa0/0 interface, let's use
that as an example. Its address is 192. 168.5.5/24. This interface is in the

192.168.5.0/24 network (see Chapter 8 for more on this). To configure the
pool for that network, execute the following command:
Router(dhcp - config)# netwo rk 192 . 168 . 5 . 0 255 . 255 . 255 . 0

At this point, DHCP would be functional, but all the DHCP server would
issue to the clients would be an IP address and a mask. They will also
probably need to be issued the following :
• Default gateway
• DNS server
These are called pool options (or scop e options, in the Microsoft world).
To configure the default gateway option (which in this case would be
192. 168.5.5), execute the following command:
In this case, the router connected to the subnet that this
DHCP scope will service has an address of 192.168.5.5, so
that should be the default gateway.

Ro u ter(dhcp- conf i g)#de f au lt - r ou t er 1 92 . 1 68 . 5 . 5

To issue the address of the DNS server (for example, 192.168.6. 200) to
clients, use the following command:
Ro u ter(dhcp- conf i g)#dns - se r ver 192 . 1 68 . 6 . 200

There are many more scope options that can be included, many of which
are important for more-advanced functions beyond the scope of this book. To
read more about these options, see www.cisco.com/en/US/docslios/12_2/ip/
configuration/guide/1 cfdhcp.html#wp 10 11532.

Configuring WAN Interfaces
Serial interfaces (WAN interfaces) need all the same settings that Ethernet
interfaces do, but they require some additional configuration because they run

M t

al co

dt

ttY: d

ora

a different Network Access layer protocol than Ethernet. They still need an IP
address and mask, and they still need to be enabled, but they also require you
to do the following:
• Select an encapsulation type (picking the Network Access layer
protocol).
• Specify the end to perform the clocking.
After you have configured these items, there are certainly some additional
things that can be configured, but the encapsulation type and clocking
specifications are required to get the interfaces operational.
Serial lines can use several different Network Access layer protocols.
These are also called encapsulation types , because they take the original
packet and encapsulate it with a different Network Access layer header and
trailer. Two of these are designed for point-to-point connections, \Vhile the
third is designed to operate in a multi-access network. These protocols are as
follows :
• High-level Data Link Control (HDLC)
• Point-to-Point Protocol (PPP)
• Frame Relay
Though by no means a hard and fast rule, Frame Relay is typically used to
connect to a service provider's Frame Relay network, while HDLC and PPP
are the choice when you are connecting two of your own routers with a serial
connection. Our focus will be on the use of PPP and HDLC.
The first step to configure a serial line is to specify the encapsulation. If
you don't specify this, the default is HDLC, which is fine, but you should
be aware that HDLC works only on Cisco routers. Therefore, if you will be
connecting to a non-Cisco router, you will need to use PPP. To specify the
encapsulation, execute the follo\ving command at the interface configuration
prompt:
Ro u ter(co nf i g - if)#encapsu lat i on ppp

HDLC, do nothing, unless the interface was
previously configured for PPP, in which case, execute this command:
If

you

want

to

use

Router(config - if)#encaps ulat ion hdlc

You must ensure that both ends of the connection are using the same
encapsulation for the connection to work. If an encapsulation mismatch
occurs, no communication will occur. After you have set the IP address and
mask, you need to specify which end of the connection is performing the
clocking. This must be set on the end that is using the DCE end of the cable.
If you're unsure about that, execute the following command, and you will
see what type of cable is currently attached to the local router (the one you
are on). Remember, you need to back out to privileged mode for the show
commands. The following command will determine the cable attached to the
Serial 0/0 interface:
Ro u ter# sh ow contro l l ers se r ial 0 /0
In t erfa ce Serial0/0
Hardware is PowerQUICC MPC860
DT E V. 35 serial cable atta ched

There will be much more output, but the information we are interested in
is in line 4, which shows that a DTE V.35 cable is connected. This means
that this is the DTE end, which needs no clocking configuration. If the output
indicated DCE v . 35 serial c a ble at ta ched, we would need to execute the
following command:
Ro u ter(conf ig-if )#c l ock rate 64000

The value after the c l ock rate command is the rate in bits per second.
The rate selected depends on the interface type. The most common is 64000.
For more on clock rates, see www.cisco.com/en/US/docslioslinterface/
command/referencelir_c2.html#wp 1011411 .

Using a CSU/DSU
If you were setting up this connection to connect to a CSU/DSU, you
would not add a clock rate, because the clock rate would come from the
CSU/DSU. Other than that, the configuration is like the one presented
in this example.

Saving Configuration Changes
After you have completed all of the basic settings on the router, you need to
save these changes to the startup configuration. If you fail to do this, you will
find that at the next restart of the router, you have lost all your changes! To
save your settings, execute the following command at the privileged mode
prompt:
That's correct. Despite what you might suspect, you save in
privileged mode, not configuration mode.

r o u ter # copy r un start
Destinat i on filename [ startup - config]?

If this is the first time you have saved a configuration, you will be
prompted for the name of the startup file , and it will suggest to you the
default name startup - config . Press Enter to accept this default. You will be
informed that the file is being built:
r o u ter # copy r un start
Destination filename [ startup- config]?

Press Enter.

Building configuration ...
[ OK ]

r o u t er#

To view the changes or to view the settings on any router for which y ou
are not familiar, use the command sh ow start :
Ro u ter #sh ow r un

After y ou execute this command, the startup configuration file will be
display ed, like the partial one shown next. (Parts have been removed for
brevity. )
Bu il ding con f igurat i on ...
Cur ren t

conf i guratio n : 91 6 bytes

version 12 . 2
ho s tna me Rout er
in te rfa ce Fas tEth ernet0/0
i p address 172 . 16 . 13 . 1 255 . 255 . 255 . 0
ip hel pe r - add r ess 172 . 16 . 1 0 . 2
d upl ex aut o
speed au t o
interface FastEthernet1/0
ip address 172 . 1 6 . 1 0 . 1 255 . 255 . 255 . 0
d upl ex aut o
s p eed aut o
interface Serial2/0
no i p address
s hut down
l in e vty 0 4
password cisco

login

From the preceding file, you can see the following:
• The router name is router.
• There are two configured Fast Ethernet interfaces with IP addresses
172.16. 13.1/24 and 172.16. 10.1/24.
• The serial interface has not been configured or enabled.
• The password to connect with T elnet is cisco.
If you finish your configuration and you have connectivity problems,
this command can be used to give you a quick look at what you actually
configured, as opposed to what you intended to configure.

The Essentials and Beyond
Router setup operations and configuration include cabling the
router, connecting to the router, configuring passwords, applying
IP addresses to the interfaces, enabling the interfaces, and saving
the configuration. A router connects to a switch \¥ith a twistedpair cable, to another router with either a twisted-pair cable or a
back-to-back serial cable using a smart serial or DB-60 connector,
to a PC with either a twisted-pair cable or a console cable, and
to a CSU/DSU with connecters dependent on the serial connector
present on the router and the CSU/DSU. You create a session with
the router on a console or with a Telnet session. After the connection
is made, you can configure the router by using the initial setup
menu (if no configuration is present) or by using the CLI to build
a configuration file. Passwords to control access to privileged and
global configuration mode are not required but highly
recommended, but default passwords for Telnet access are required.
Both Ethernet and serial interfaces require an IP address and subnet

Router>
Router>enable
Ro ute r#
Route r# con f i gu re termi na l
Ro uter(con fi g)#

C. Create an unencrypted password (for thi s exercise, use
mypassword) for access to privileged and global configuration mode
by typing the following :
Ro uter(con fi g)#enab le mypasswo r d
Router(config) #

D. Test it by exiting out to user mode, and attempt to reenter privileged
mode:
Router(con fi g) # ex i t
Router # exit
Router>
Ro uter> enable

E. You should be prompted for a password. Enter the password and
enter privileged mode:
Ro ute r>enable
Password : <type mypassword>
Router #

Review Questions
1. Which of the follo\iVing is not a serial connector type used with
a Cisco router?
A . AUI

B. DB-60
C. Smart serial

C. vty

D. tel
9. What command is used to instruct the router to prompt for a
paSS\VOrd?

A. l o gin
C . auth

B. prompt
D. sec ur e

10. Which of the following is the second Fast Ethernet port in the
first slot on the router?

A. S0/2
B.Fa0/1
C. Fa0/2
D . Fal/2

Chapter 14
Configuring Switches
Switches can be used in all layers of the Cisco three-layer model including
the distribution and core layers when they operate as multilayer switches.
However, this chapter covers switches operating in the access layer. In this
role, they provide a connection point to the network for host devices such
as computers, printers, network scanners, cameras, or any type of device that
needs to be connected to the network. They can also be wired or wireless, as
you saw in the discussion of wireless access points that are not routers, but
acting as wireless switches (see Chapter 10, "Network Devices").
In many ways, managing a switch is much like managing a router because
they both use the Cisco IOS. The differences are most evident in the
management of the interfaces and the functions that are possible with the
interfaces (which are called switchports). Because many of the procedures are
no different with a switch than with a router, many of the sections of this
chapter are rather abbreviated. The exceptions are the sections on configuring
the interfaces and on the features possible with the interfaces, because of the
significant difference between router and switch interfaces
Specifically, this chapter covers the following topics:
• Cabling the switch
• Creating a session with the switch
• Configuring passwords
• Configuring interfaces
• Understanding advanced switch functions

Cabling the Switch
Cabling an access S\iVitch is somewhat simpler than cabling a router. The
access switches discussed in this book have only one type of interface, and
that is Ethernet, so you won't have to worry about serial ports or cables.
You can read about switches that can use fiber-optic
interfaces at www.hds.com/assets/pdf/datasheet-cisco-

mds-9134-multilayer-fabric-switch.pdf.
This section explores the cabling considerations for connecting the access
switch to other devices.

Cabling Switch to Switch
Switches are often connected to one another. When they are, the links that run
between them can be one of two types :
• Trunk links
• Access links
The only difference between these two types of links is the traffic that is
allowed to use them. By default, all ports in a switch are in the same virtual
LAN (VLAN). A VLAN is any set of ports on a switch that can communicate
with one another without the aid of a router.

VLANs and Subnets
It is also true that the devices that are connected to switchports also
must have an IP address in the same subnet to communicate without a
router, but VLANs create a Network Access layer boundary, whereas

subnets create an Internet layer boundary. Devices must be in the same
VLAN and the same subnet to communicate without a router.

VLANs can be configured on a switch, and ports can be assigned to
the VLANs (which is covered in detail later in the section "Understanding
VLANs"). VLANs can also span two physical switches. For example, VLAN
2 may comprise three ports on switch 1 and three ports on switch 2. When this
is the case, the link between the switches must be a trunk link. Trunk links
can carry the traffic of multiple VLANs, whereas access links cannot.
When all ports on two switches are in the default VLAN, they are all in
the same VLAN (that is, the default VLAN), so an access link works fine
between them. It is only when a VLAN other than the default VLAN spans
two switches that the link needs to be a trunk link.
Regardless of the link between the switches, by now you can appreciate
that the link is probably going to be busy . Therefore, you should use the faster
links on the switches for this connection. Figure 14- 1 shows a connection
between two switches using the 100BaseT ports rather than the 10BaseT
ports.
Remember, the cables that run between two switches should be crossover
cables!

Cabling Router to Switch
Cabling a router to a switch was already covered from the perspective of the
router in the preceding chapter. From the perspective of the switch end, the
link can be either an access link or a trunk. If the switch has multiple VLANs,
M

I

the link going back to the router will have to be a trunk link. If that is not the
case, the link can be an access link.
Keep in mind, however, that regardless of the number of VLANs present
on the switch, because all hosts on the switch will be using the router interface
as the default gateway, any traffic that needs to leave a host's local subnet will
need to go to the router. This means that the link will be busy, and you should
use a faster link. Figure 14-2 shows the cable running from the 100 Mbps line
in the switch to the router.

Remember, the cables that run from router to switch should be straightthrough cables!

Cabling Hosts to Switch
Hosts can be any devices that need to connect to the network. For these
devices, you should use the slower ports, of which there will probably be
many more present on the switch.
There is one important consideration. You should ensure that both ends
of the connection, the switchport and the NI C on the device, are set for
full-duplex. If this is not the case, the device may experience very poor
performance. Today, most NICs and switch interfaces are autosensing, which
means they take care of this for you, but it can be something worth checking
if the performance of a device seems abnormally poor. In the section on
configuring interfaces, you will learn how to verify that this is not a problem.
Figure 14-3 show the ports that should be used for the devices.

Figure 14-3: Host connections
M

I

Remember, the cables that run from host to switch should be straightthrough cables!

Creating a Session with the Switch
Just as with a router, a session can be established with a switch either through
the console cable by using HyperTerminal or by connecting to the switch over
the network via Telnet. The procedures are the same as with a router with
respect to using the console cable and HyperTerminal. However, there is one
important additional consideration when connecting to the switch for a Telnet
session, as you will see in the section "Creating a Session through Telnet."

Creating a Session with the Console Cable
As with a router, this procedure begins by connecting a console cable to the
switch. The serial end of the console cable attaches to the PC, and the RJ-45
end connects to the console port on the switch, as shown in Figure 14-4.

After the cabling is in place and you have installed HyperTerminal on the
PC, the connection can be established by using the same procedure as with a
router:
1. Choose Start=> Programs=> HyperTerminal-Private-Edition. Double-

click to start the application.

2. Enter the following information in the next dialog boxes you receive:
• Location Information: In the Area Code box, enter your area code.
• Phone And Modem: Click OK and accept the default.
• New Connection-HyperTerminal: Name the connection.
• Connect To Port: Select COM 1.
• COM1 Port properties: Use the settings

9600
8
None
1

None
3. Press Enter. If you have entered the correct settings, you should
receive a switch prompt or a setup dialog box. The only difference in the
outcome of this procedure compared to creating a router session is that
when you arrive at the CLI prompt, it \iVill appear as follows, which as
you can see indicates that you are on a switch and not a router:
Switch>

Creating a Session through Telnet
The one huge consideration when connecting to a switch with Telnet is that
the switch must have an IP address before you can connect to it. Because a
router will always have IP addresses applied to its interfaces, this is not a
consideration with a router (you could connect to it by using any of its IP
addresses). Switchports don't have IP addresses (remember, all operations are
in terms of MAC addresses), and a switch can operate \iVell without an IP
address. But if you are going to connect to a switch by using Telnet, it must
have an IP address.
When an IP address is applied to a S\vitch, the address is applied to the
default VLAN rather than to any interface. The default VLAN is VLAN

1, so to do this you would progress through user, privileged, and global
configuration modes first, as shown here:
Switch>
Swi tch>enable
Password :
<enter password if requ i r ed>
Swi tch#
Swi tch#config t
Switch(config)#

For security reasons, VLAN 1 is usually disabled, and a
numbered virtual interface is created to use as the
management VLAN for example, VLAN 100.

At this point, enter the configuration mode for VLAN 1, as you would
enter interface configuration mode on a router:
Switch(config)# interface
Swi tch(conf i g - vlan)#

vlan1

Then apply the IP address, just as you would to an interface :
Swi tch(conf i g - vlan)# i p add r ess 192 . 1 68 . 5 . 5 255 . 255 . 255 . 0

You also must enable the interface as you would an interface on a router:
Swi tch(conf i g - v l an)# no shu t down

Now the IP address can be used to connect to the switch to use Telnet.
Just as a review, the following procedure executed from a PC on the network
would establish a Telnet session with the switch. Don't forget that unless you
configure a vty password, the connection will be refused.
1. Open a command prompt on the PC and type this command:
telnet 1 92 . 168 . 5 . 5

This output will appear:
Connecting to 192 . 168 . 5 . 5

Configuring Enable Secret Passwords
To encrypt the enable password, you can create an enable secret password
instead. The only difference is that when you execute the command, you
specify that you would like the password to be encrypted by substituting
secret for password in the command, as shown here:
swi tch(conf i g)#enab le secre t c i sco

Remember, if both an enable and enable secret passwords are configured
on a switch, the switch will prompt for the encrypted password instead of the
unencrypted password.

Configuring Line Passwords
Configuring line passwords for switches works pretty much the same as it
does for routers, including determining the number of vty lines available, the
changing of the prompt, and instructing the switch to prompt for a password.
See Chapter 13 for details.

Configuring Interfaces
Interfaces on a switch are called switchports. IP addresses are not configured
on switchports. In fact , switchports take very little configuration to function.
You can simply plug in the devices, and they will work. However, to use some
the advanced functions that are discussed later in this chapter or to verify
switchports, you must know how to access the ports and how to configure
them in port configuration mode.
This section covers accessing a single port or a set of switchports. Enabling
and verifying the port status is covered as well.

Accessing Switch ports and Using Switchport Mode
Accessing any of the more specific configuration modes in the lOS requires
progressing through the user, privileged, and global configuration modes first.
That is also the case with accessing switchports in configuration mode. To
arrive at this mode, follow these steps :
swi tch >
swi tch> enable
Password :
<enter password if required>
switchr#config t
Enter c o nfiguration commands , on e per l i ne .

End wi t h

CNTL/Z .
swi tch(conf i g) #

Among the operations that can be performed with the swi t c h p o r t mode
command are placing a port or group of ports into a VLAN and setting a port
as a trunk link. This swi tchport command is executed after you have entered
configuration mode for the port or port group. The following is an example of
entering configuration mode for the port Fa0/4:
Swi tch(conf i g) # interfa ce fa 0 /4
Switch(config - if )#

Once in configuration mode for the interface, execute the command with
the proper parameter. There are many parameters that can be used. The
shut down and n o shutdow n parameters are discussed in the last section of
this chapter. As a preview, here is an example of placing the interface into
VLAN 2 while also setting it to operate as an access rather than a trunk port:
Swi tch(co nfig - if)#swi tchp o rt access vlan 2

The VLAN that all ports are in by default is VLAN 1.

Enabling the Port

Switchports are normally enabled by default, but if y ou make a change to the
port, such as placing it into a VLAN, the port will need to be enabled again.
The command to do this is the no shutdown command:
Swi tch(config - if)#no shutdown

Verifying the Port
Switchports can be verified by using the s how port status command.
Remember that show commands are executed in user mode. When the
command is executed and you specify the port number (in the "Accessing
Switchports and Using Switchport Mode" section earlier, the port was 0/4),
the show port status command will display information as shown here :
Swi tch> show port status 0/4
Port Name Status Vlan Duplex Speed Type
0/4

enabled 2

a ut o

aut o 1 0/ l OOBase TX

The output shows the following :
• The port is 0/4.
• The port is enabled.
• The port has been placed in VLAN 2.
• The duplex is set for auto (meaning auto sense).
• The speed (which can be specified manually) is also set for
auto sense.
• The port can run at either 10 or 100 Mbps and uses an RJ-45
connection (TX).

Understanding Advanced Switch
Functions

Creating VLANs and assigning a port to them on a switch is a two-step
process:
1. Create the VLAN and name it.

2. Assign ports to it.
Consider Figure 14-5. This switch needs to have ports 1-3 assigned to
VLAN 2 (which should be named Sales) and ports 5-7 assigned to VLAN 3
(which should be named Accounting). We can't use VLAN 1 because that is
the default VLAN, where all of the ports are currently located.

To m ake this configuration, the two VLANs must first be created. Access
global configuration mode, as shown here :
swi tch>
swi tch>enab le
Password :
<en ter password if required>
switchr#config t
Enter configuration commands , on e per line .
CNTL/Z .
swi tch(config)#

End with

The command to create a VLAN is simply the following :
vlan vlan number name name o f

the vlan

Therefore, the t\vo commands required to create the two VLANs would be
as follows:
switch(co nfig)#vlan 2 name Sales
swi tch(co nfig)#vlan 3 name Accou nting

Now the ports need to be assigned to the VLANs. This requires entering
configuration mode for the ports. You learned how to do that earlier, in
the section "Accessing Switchports and Using Switchport Mode." This time,
Copy llJ t

a ri

Two protocols can be enabled on a trunk link to perform this frame tagging function. One is Cisco proprietary (Inter Switch Link, or ISL ), and the
other is an industry standard (802.1 q). The details and configuration of these
protocols is outside the scope of this book, but it is important for you to know
that one of these must be configured on the link between the switch and the
router, and they must match.
For more information on ISL

and 802.lq, go to

www.cisco.com/en/US/tech/tk389/tk689/
technologies_tech_note09186a0080094665 .shtml .

These protocols add information (tags) about the frame that the router uses
to route the frame to its proper VLAN. A router can be either a separate
physical device from the switch or a route card residing in a multilay er switch.
In either case, a trunk link must be configured between the routing function
or router and the switching function or switch. It is simpler to visualize this
relationship by viewing a router connected to a switch, as shown in Figure
14-6. This is som etimes called a router-on-a-stick.

Figure 14-6: Router-on-a-stick

Cisco
Router-on-a-Stick

__ ..._

,........"1111& . ,-......

'~~

Trunk

Cisco

FE 1/0/1

Switch__.d
/

~

....

!fa ......

FE 1/0/2

-./ FE 1/0/3

Red
VLAN 10

Green
VLAN 20

Describing STP
Switches should be connected together to provide redundancy if possible.
When that is not the case and there is a link failure ~ hosts become isolated.
Consider the network in Figure 14-7.

Figure 14-7: No redundancy

E18Me ts ~o

dot d u: ur

---Router 1

Switch
3

In Figure 14-7, if something happened to the link between switches 2 and
3 or between switches 1 and 2, hosts in the network would be cut off from the
rest of the network. Now look at Figure 14-8.

Figure 14-8: Redundancy

Switch
1

---Router 1

Switch

2
Switch
3

In this figure, if either of these links went down, there would still be a path
(albeit perhaps a longer one) from any device to any device. This was made
possible because of the redundant link provided from switch 1 to 2.
E18Me ts ~o

dot d ul ur

Lowest-cost path means the total of individual costs for each
link between the nonroot bridge and the root bridge.

In Figure 14-9, assume that switch 3 became the root bridge. The ports that
would be root and nonroot are labeled.

Figure 14-9: Root and nonroot ports
Root Port

Switch
3

Now that the root and nonroot ports are determined, the following STP
rules apply to each port:
• All root ports forward.
• All nonroot ports block.
The STP port operations that would prevent loops after the election of
switch 3 as the bridge are shown in Figure 14-10.

Figure 14-10: S TP port operations
Root Port

Nonroot
Port

Forwarding

Blocking

Root Port
Root Port
Forwarding

E18Me ts ~o

dot d ul ur

The Essentials and Beyond
Access layer switches provide a connection point to the network
for host devices such as computers or printers. Managing a switch is
much like managing a router, because both use the Cisco lOS. Even
password management is the same. One of the biggest differences is
the switch interfaces (switchports), but these are easy to configure.
Switches can be connected to one another or to routers. A session
can be established with a switch by using either HyperTerminal or
Telnet. For a Telnet session, the switch must be configured with
an IP address. VLANs are logical segmentations of a network at
the Network Access layer of the TCP/IP model. When placed into
separate VLANs, hosts cannot communicate with one another
without the aid of a router. Access ports on a switch can carry
only traffic sourced from or destined to the VLAN of vvhich the
port is a member. However, trunk ports can carry the traffic of
multiple VLANs. Switches should be connected together to provide
redundancy. When switches are connected, switching loops are
automatically prevented by Spanning Tree Protocol (STP).

Additional Exercises
In this exercise, you will create two VLANs, name them, assign
ports to them, and verify your work. This exercise assumes that your
PC is connected to your switch with a console cable and has created
a session with the S\vitch. You have been assigned the following
tasks to fulfill:
• Create two VLANs named Marketing and Management.
• Place ports 4-12 in the Marketing VLAN and place ports
17-22 in the Management VLAN.
• Verify the status of one port in each VLAN.

Review Questions
1. In what VLAN are all ports located by default?
A. VLANO
B. VLAN 1
C. VLAN 2
D . VLAN 3
2. VLANs are segments at what layer of the TCPIIP model?
A . Application
B. Transport
C. Network Access
D. Internet
3. What type of cable should be used between a host and a switch?
A. Straight-through
B. Console
C. Rolled
D. Crossover
4. Which of the following situations is the only time you would
use a crossover cable?
A. Host to switch
B. PC to console port
C. Router to switch
D. Switch to switch

5. To vvhich of the following must an IP address be applied to
telnet to the switch?
A . Any switchport
B. The uplink port to the router
C. VLAN 1
D. A newly created VLAN for Telnet access
6. Which of the following actions are required for a switchport to
operate?
A . Enable it.
B. Assign it to VLAN 1.
C. Assign an IP address.
D. None of the above.
7. What command should be executed under the switchport
configuration mode after changes have been made?
A . copy r un start
B. copy start run
C . n o shutdown

D . e n able

8. What command produced the following output?
Po rt Na me Sta tus Vlan Dup lex Speed Type

0/4 enabled 2 auto auto 10/lOOBaseTX

A . show po rt status 0/4

B . show p ort 0/ 4

C. show port status

D . show p orts

9. Which of the following is not correct about VLANs?
A. VLANs provide segmentation at the Internet layer.
B. VLANs provide segmentation at the Network Access layer.

C. VLANs can span multiple switches.
D . Communication between VLANs requires a router.
10. Which of the followin g protocols is used to prevent switching
loops?

A . VTP
B. STP
C.RSTP
D . RSVP

Chapter 15
Configuring Static Routing
Cisco routers use routing tables to maintain the information required for them
to direct the packets they receive to the proper destination. These routes are
categorized as follows:
• Network routes (routes that identify the location of entire subnets of
hosts)
• Host routes (routes that identify the location of a single host)
• Directly connected routes (routes to which the router is directly
connected via an interface address in the same subnet)
• Default routes (routes to which all traffic that does not have an
existing route in the table is sent).
Regardless of the type of routes present in the table, the routes must be
placed into the routing table (except for directly connected routes, which
automatically appear in the table). This can be done in one of t\vo ways:
• Static routing, in which an administrator using the CLI to execute
the i p ro ute command places the route into the table
• Dynamic routing, in which a routing protocol enabled on the router
communicates with other routers running the same routing protocol
to share routes and populate the tables automatically
Only when routing tables are complete can routers perform the job for
which they were designed. This chapter covers static routing, and the final
chapter covers the configuration of dynmnic routing protocols. Specifically,
this chapter covers the following topics:

• Populating the routing table
• Configuring inter-VLAN routing

Populating the Routing Table
Static routing requires that routes be added to the routing table by using the
i p ro u te command. Maintaining the routing table manually has advantages
and disadvantages. The disadvantages, which may be more obvious than the
advantages, include the following:
• The additional administrative effort required to create the routes by
using the ip r ou te command
• The need to manually react to outages and changes in the network
by manually editing the routing table when problems arise
There is really only one advantage to static routing: it eliminates routing
update traffic. As you will learn in Chapter 16, "Configuring Dynamic
Routing," the amount and frequency of routing update traffic varies from
routing protocol to routing protocol but just as an example, when using
Routing Internet Protocol (RIP), the entire routing table is sent in each update,
and updates are sent every 30 seconds. This is true even if the routing table
has not changed in five years!
Therefore, if a network topology is very small, changes rarely if ever
occur, and the system is very stable (meaning infrequent link outages), static
routing may allow the network to perform better by eliminating the routing
update traffic that competes with the regular traffic for bandwidth.
This section explains the use of the ip r o ute command to build the
routing table as well as the commands required for viewing and verifying the
table.

Using the ip route Command

back. Just because the routers know how to get the packet to the
destination doesn't necessarily mean they know how to get the replies
back to the source. In this example, we would have to put a route to the
10.0.0.0/8 network in the routing tables ofR3 and R2 for the replies to
be successfully routed back to the host in the 10.0.0.0/8 network.

Verifying the Route Table
To verify the completion of the ip ro u te command or to verify the existence
of a route in the routing table, the table can be viewed with the show i p
r ou t e command. The command is executed in user mode. The following
output of the command for R1 is displayed as it would look with the
commands executed to this point. The first part of the output is the legend,
which indicates the meaning of the letters placed next to the route. Some of
the output of the legend is omitted in this example.
R1 >s how ip r o ute
Codes : I - IGRP der i ved , R - RI P der i ve d , 0 - OS PF
der i ve d ,
C - connected , S - stat i c
<output o mitted>
C
C
S

1 0 . 0 . 0 . 0 is direct l y connec t ed , Fas t Etherne t 0/ 1
1 92 . 168 . 5 . 0 is d i rectly connec ted , Fas t Eth e r net 0 /2
1 5 . 0 . 0 . 0/8 via 1 92 . 1 68 . 5 . 5

You can see that the t\:vo directly connected routes are present for the two
local interfaces on the router. The static route to 15.0.0.0/8 is also shown as
available via 192.168.5.5, which is the local exit interface on the router, not
the next hop.

SW 1 is configured with two VLANs: VLAN 10 and VLAN 20. The
switch ports Fa0/20 and Fa0/21 have been added to VLAN 20. The switch
ports Fa0/10 and Fa0/11 have been added to VLAN 10.
The computers connected to those switch ports will not be able to
communicate with one another until inter-VLAN routing is configured on R1.
The first step is to connect the router to the switch with a straight-through
cable, connecting the F a0/1 interface on the router to the F a0/1 interface on
the switch, as shown in Figure 15-2.
To configure the router to route between the VLANs, the following steps
must be taken:
1. Create a trunk link between the router and the switch and configure an
encapsulation protocol on the trunk link.

2. Create subinterfaces for each VLAN on the physical link.
These steps are explained in the following sections.

Creating a Trunk Link with Encapsulation
The link that exists between the switch and the router must be specified as a
trunk link, because it will be carrying traffic from both VLAN 10 and VLAN
20. Starting on the switch end of the connection, at the interface configuration
prompt for the F a0/1 interface, two commands need to be executed. The first
command is as follows:
SW l (co n fi g - if )swi t c hport tr unk encaps u l at i on i s l

This command instructs the router to set the interface as a trunk link and
to use the Inter-Switch Link (ISL) encapsulation protocol. This is one of 1\vo
trunking protocols available. The other is IEEE 802.1q. Either will work fine,
but the same protocol must be set on both the switch end and the router end.
Keep these factors in mind when you choose between the two :
• 802.1 q is an IEEE standard and works on all routers.
• ISL works on only Cisco devices.

M t

al co

dt

ttY: d

ora

When traffic from multiple VLANs will traverse the same physical connection,
there must be some way to segregate the VLANs for the purpose of assigning
a default gateway to each. Remember that VLANs create Network Access layer
segmentation, but the devices will also need to be segregated at the Internet layer
with IP subnets.
IP addresses are applied to interfaces on a router. Therefore, to apply two IP
addresses (in different IP subnets) to the same physical interface, the interface
must be logically subdivided. This is done with subinterfaces. Then one IP
address (located in one IP subnet) can be applied to one subinterface, and another
IP address (located in a different IP subnet) can be applied to the other
subinterface.
When subinterfaces are created, they are named after the physical interface of
which they are a part, and then a dot is added, followed by a number to identify
the subinterface. For example, a subinterface of the Fa0/1 physical interface
might be Fa0/1 .1 or Fa0/1.2.
After the subinterface has been created, you will immediately be placed into
subinterface configuration mode for that subinterface. While you are in that
mode, you should do the following :
• Set the encapsulation type and associate the subinterface with a VLAN.
• Apply an IP address.
Before we get started, consider Figure 15-3. It has been labeled with the IP
addresses that the computers in each VLAN will have and the IP address that
will be applied to the router interface for each subinterface. There will be a
subinterface for each VLAN. Note that computers must be set with the IP address
of the router subinterface that has been associated with the host's VLAN as their
default gateway .

Figure 15-3: Subinterfaces and IP addresses

M t

al co

dt

ttY: d

ora

IP Address 10.0.0.2/8
__.----•Gateway 10.0.0.1/8

VlAN 10

..-dE""

IPAddress 10.0.0.3/8
Gateway 10.0.0.1/8

fa0/1.1
R --=
... -=~ 10.0.0.U8
1
..____, fa0/1.2
20.0.0.1/8

VLAN 20

To create the first subinterface, execute the following command at the global
configuration prompt on the router:
R1 (co n fi g) #in t e r face Fa 0/ 1 . 1
R1 (co n fi g - subif) #

Notice that the prompt changed, indicating that you are now in configuration
mode for the subinterface Fa0/1 .1. Now set the encapsulation to match \¥hat was
set on the switch (ISL). The 10 that follows identifies the VLAN:
R1 (co n fi g - subif)# e n cap s u l a ti o n isl 1 0

Finally, set the IP address just as you would on any other interface:
R1 (co n fi g - subif# i p addr ess 10 . 0 . 0 .1 255 . 255 . 255 . 0

The complete set of commands for the other subinterface is as follows :
R1 (co n fi g) #i n t erface Fa0/ 1 . 2
R1(conf ig - subif) # e ncap s ulati o n isl 20
R1(conf ig - subif# i p a dd ress 20 . 0 . 0 . 1 255 . 255 . 255 . 0

Because the two networks are directly connected to the router, the routes will
automatically be placed in the routing table ofRl. Its table is shown here :
R1 >s h ow i p r o u t e
Co des : C - connected , S - sta t i c , I - I GRP , R - RI P , M - mo b i l e , B
<outpu t o mitted>

M t

al co

dt

""'

d

ora

C
C

10 . 0 . 0 . 0/8 is dire c t ly connect ed ,
20 . 0 . 0 . 0/8 is d i rect l y c o nnect ed ,

FastEthernet0/1 . 1
Fa stEt he r ne t 0/ 1 . 2

When a host in one of the VLANs needs to send something to a host in the
other VLAN, the host will send the packet to its default gateway, which will be
the IP address that was assigned to the subinterface associated with its VLAN.
The router will then locate the network in its table and route the packet back out
the interface to the VLAN on which the destination machine is located.

The Essentials and Beyond
Cisco routers use routing tables to maintain the information required for
them to direct the packets they receive to the proper destination. Routes
can be placed into the routing table in one of two ways: static routing and
dynamic routing . Entries are added to the routing table by using the i p
r o ute command. To verify the completion of the i p r o u t e command or
the existence of a route in the routing table, the table can be viewed with the
sh o w ip r o u t e command. To configure a router to route between VLANs,
you create a trunk link between the router and the switch, configure an
encapsulation protocol on the trunk link, and create subinterfaces for each
VLAN on the physical link.

Additional Exercises
In this exercise, you will create static routes that link the networks in Figure
15-4. It assumes that you have connected three routers, as shown in the
diagram. The interfaces must also be assigned the IP addresses as shown,
and the interfaces should be enabled.

Figure 15-4: Static routing exercise
~

R1
~ '!; )

19~

172.16.5.2/16
In.l6.5.1/16

~

r.;. ..:.)

15.0.0.218 r:. ~
15.00.0.1/8

~

-.....

-.....

192.168.5.0124

10.0.0.018

Netwo~

Nelworl<

M t

al co

dt

""'

d

ora

For router R1 , perform these steps:
1. Log into the router and access global configuration mode, as shown here :
R1 >e na ble
R1>Password : <enter password>
R1#config t
R1(config)#

2 . Use the i p ro ut e command to add the route to the 10.0.0.0/8 network
with a next hop address of 172.0.16.5.1, which is the address of the next
router (R2) on the path to R3 :
R1(config)#ip ro u te 1 0 . 0 . 0 . 0 255 . 0 . 0 . 0 .
1 72 . 1 6 . 5 . 1

3. Verify that the route is present in the table by backing out to user mode
and executing the s h ow i p r ou t e command. You should see an entry in
the table, as shown in the following output.
R1>show ip r ou te
Codes : C - connected , S - s t a ti c , I - I GRP , R RI P , M - mobile , B - BGP
<output omitted>
C 1 92 . 168 . 5 . 0 i s d i rectly connected ,
Fast Et he rne t 0/ 1
C 172 . 16 . 0 . 0 is d i rect l y connected ,
FastEthernet0/2
S 10 . 0 . 0 . 0/8 v i a 1 72 . 1 6 . 5 . 2

Note that for Fast Ethernet0/ 1 and
may be different.

Fast Ethe r net0/2,

your interface

For router R3, perform these steps:
1. Log into the router and access global configuration mode, as shown here :
R3 >enable
R3 >Passwo r d : <enter password>

D . Default routes
2. Where is traffic sent if it does not have an existing route in the
table?
A. A network route
B . A host route
C. A directly connected route
D . A default route
3. Which of the following is an advantage of static routing?
A. Reduced administrative effort required to create the routes
B. Automatic reaction to outages and changes in the network
C. Elimination of routing update traffic
D . Reduction of routing update traffic
4. In which of the following situations would static routing be
advisable?
A. The network topology is very large, changes rarely if ever occur,
and the system is very stable.
B . The nen;vork topology is very small, changes frequently occur,
and the system is very stable.
C. The network topology is very small, changes rarely if ever occur,
and the system is very unstable.
D . The network topology is very small, changes rarely if ever
occur, and the system is very stable.
5. What command is used to place routes into the routing table?
A . i p r ou te

B . r o ute add

C. route
D. i nsert r o ute

6. In the following command, what does the IP address 192. 16835 .6

represent?
Rl(config)#ip route 150 . 0 . 0 . 0 255 . 0 . 0 . 0 . 0
1 92 . 1 68 . 5 . 6

A. The address of the local exit interface
B. The exit interface on the destination router
C. The address of the next hop router in the path to the destination
network
D. The address of the destination host
7. What command produced the following output?
Codes : I - IGRP derived , R - RIP derived , 0 OSPF derived ,
C - connec t ed , S - s t at i c
<o utput omi tted >
C 1 0 . 0 . 0 . 0 i s d i rect l y connec ted , FastEt he rnet

0/ 1
C 1 92 . 168 . 5 . 0 i s direct l y connecte d ,
FastEthe rn e t 0/2
S 1 5 . 0 . 0 . 0 / 8 via 1 92 . 1 68 . 5 . 5

A . show r un
B. show i p r out e

C. s h ow ne two rk

D . show i n t e r faces

8. Which of the routes in the following table was manually added?
C 1 0 . 0 . 0 . 0 is d i rect l y conne c t ed , Fast Ethe r net
0/ 1
C 1 92 . 168 . 5 . 0 is di rect l y c o nnected ,
FastEt he rn e t 0 / 2
D 2 5 . 0 . 0 . 0 / 8 V l' a 1 7 . 6 . 0 . 0
s 15 . 0 . 0 . 0 / 8 V l' a 1 92 . 1 68 . 5 . 5

A . 10.0.0.0
B . 192.168.5.0
C. 25.0.0.0/8
D . 15.0.0.0/8

9. Which of the follo\ving components is not required for inter-VLAN
routing?
A. A trunk link
B. Subinterfaces
C. An encapsulation protocol
D. Multicast IP addresses
10. Which of the following steps in configuring inter-VLAN routing
is not done in subinterface configuration mode?
A. Set the link to trunk
B . Apply an IP address
C. Associate the subinterface with a VLAN
D. Set the encapsulation type

Chapter 16
Configuring Dynamic Routing
Cisco routers can be configured with static routes and will work quite well
and do an impressive job of acting as the traffic directors of the network. But
perhaps the most impressive and robust feature that can be enabled on a Cisco
router is dynamic routing.
When a dynamic routing protocol is enabled on the routers in a network,
much of the work of managing the network is done automatically by the
routers themselves. In this final chapter, the enhancements that dynamic
routing provides are covered and the basic configuration of the interior
gateway protocols are discussed. Specifically, this chapter covers the
following topics:
• Understanding routing protocols
• Configuring routing protocols

Understanding Routing Protocols
There are two basic types of routing protocols: interior and exterior. Exterior
routing protocols such as Border Gateway Protocol (BGP) are used between
autonomous systems and are beyond the scope of this book.

For more information on Border Gateway Protocol (BGP),
go
to
http://docwiki.cisco.com/wiki/

Border_Gateway_Protocol.

An autonomous system (AS) is a group of routers under the management
of the same entity , usually a corporation or enterprise. An AS will use at least
one, and maybe more, interior routing protocols. Interior routing protocols,
such as the ones discussed in this chapter, are used within an AS.
Interior routing protocols can be further categorized by their routing logic
or architecture. Cisco defines three types of interior routing protocols that
function on their routers:
• Distance-vector
• Link-state
• Hybrid
These three types differ in a number of ways:
• The metric used to determine the best route
• The number of tables or components used in the routing process
• The speed of convergence
• The amount of routing traffic generated
• The complexity of configuration
The following list provides definitions of these concepts as well as a
comparison of the protocol types with respect to these characteristics.
Metric A metric is a value used to describe the relative desirability of
a route to a network. All dynamic routing protocols have the ability to
choose the best route from multiple possible routes to the same destination
network. The metric is a value used to make the choice of one route over
another. With a distance-vector protocol, that metric is hop count, which
is simply the number of routers in the path to the destination. In link -state

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

and hybrid protocols, the metric is a value generated by a mathematical
algorithm that takes several factors into consideration.
T abies Routes are not the only routing information stored in tables or
databases. Depending on the routing protocol, other tables and databases
may be used, such as neighbor tables or topology databases. Distancevector protocols use fewer tables than hybrid and link-state, but are
incapable of making the more sophisticated types of routing decisions of
which link-state protocols are capable.
Convergence Convergence is the time that it takes for all routers to be
informed of a change in the network such as a link outage. Link-state and
hybrid routing protocols converge faster than distance-vector protocols
because of their use of more tables of infonnation. As you will learn in the
sections on EIGRP and OSPF (which take different approaches to arrive
at the same result), the end result is that a replacement route is determined
and distributed faster with link-state and hybrid routing protocols.
Routing Traffic Distance-vector protocols generate larger amounts of
routing traffic and they generate it more often. Because less information
is retained about the state of the net\vork, more-frequent communication
between the routers is necessary . Link-state and hybrid routing protocols
do not send information between routers as frequently , and when they
do, it usually relates to changes in the network only, resulting in smaller
transmissions.
Complexity of Configuration As you might expect, with functionality
comes complexity . Distance-vector protocols take little more than enabling
to function. Hybrid routing protocols are somewhat more complex, while
link-state routing protocols can become very complex very quickly . The
very features that reduce the amount of routing update traffic and speed
convergence require more configuration, care, and maintenance.
This chapter covers the three main interior routing protocols. Each is
presented in detail in the following sections.

Exploring RIP
Routing Internet Protocol (RIP) is the only distance-vector routing protocol
we will discuss. This industry standard protocol operates on non-Cisco routers
as well. RIP routers use only routing tables to store information. RIP can store
multiple routes to the same destination and uses as its metric a value called
hop count. Hop count is the number of routers that are in the path to the
destination network using that route. If two routes are available, one with a
hop count of two and the other with a hop count of three, the route with the
hop count of two will be chosen without regard to other factors such as the
bandwidth of the links.
When redundant pathways exist among the routers in a network (which
is a good design fe ature for the same reason it is a good design feature
between switches: fault tolerance), the possibility of routing loops exists.
Routing loops occur when packets that cannot be routed circle the network,
eating up bandwidth. Distance-vector protocols use various techniques to
prevent routing loops. These features do not need to be enabled; they operate
automatically :

Maximum Hop Count Although maximum hop count is not technically one
of the route loop-prevention mechanisms, it is an important characteristic
to understand and does play a role in some of the mechanisms. The
maximum hop count is the maximum number of routers a packet can
traverse before it is dropped and no longer routed. In RIP, the maximum
hop count is 15, which is a reason why RIP is only good for small
networks. This means that a network that is advertised with a metric of 16
is considered unreachable in RIP.
Split Horizon Split horizon is a rule to which all RIP routers adhere that
prevents the router from ever advertising (sending a routing update) back
in the direction from which it came. Consider Figure 16-1. If R2 learns
the route to the 192.168.60.0/24 network from R1 , the split horizon rule
will prevent R2 from advertising the same route back to R 1 as a router
reachable through R1.
Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Figure 16-1: Split horizon
Network 192.168.60.0/24

--

--

R1

R2

- - 1+----~ - -

Poison Reverse This rule states that when a router learns that a route is
no longer valid because of a link failure, that router will advertise the
network in the direction from whence it was originally learned (actually
violating the split horizon rule in that case) with an unreachable metric (in
RIP, that is 16). Consider Figure 16-2. IfR3learns about the 192.168.60.0/
24 network from R 1 and then later learns from R2 that the network is
unreachable, R3 will advertise the network to R1 with a metric of 16.

Figure 16-2: Poison reverse

-R3

Network 192.168.60.0/24

--

--

R1

R2

- - 1-----------i - -

Hold-Down Timer Hold-down timers are used to introduce stability into
a network at locations where a link may be experiencing transient
connection loss (called a flapping link) . Hold-down timers enforce a period
of time that the router must wait, (called the hold-down timer value),
before reacting to information that a link is down.
RIP is the slowest of the three routing protocols we will discuss with
respect to convergence. This is partly a function of the hold-down timer.
However, the more significant factor is that unlike hybrid and distance-vector
protocols, RIP does not use any resources to prepare for link outages in
advance of the outage.
Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Exploring OSPF
Open Shortest Path First (OSPF) is an industry-standard protocol that
operates on non-Cisco routers as well. It is designed to operate more
efficiently than RIP or EIGRP in very large networks. It does this by
maintaining more information, as EIGRP does, but its goes a step further by
using a concept called areas .
Detailed routing information about an area is confined to that area, and
only a summary of information is advertised to other areas. This has the
benefit of keeping OSPF routing tables smaller. In OSPF, certain routers are
designated to perform certain functions on behalf of all routers in an area or
all routers in an OSPF AS.
Most of the details of these concepts are covered in Chapter 11 , "LAN
Operations." A simple OSPF configuration is presented in the next section.

Configuring Routing Protocols
There are some variations in the application, but each of the routing protocols
we have covered is configured by using the same basic steps:
1. Enable the routing protocol.
2. Define the interfaces on which the protocol is operational.
3. Verify the routing table.

Enabling a Routing Protocol and Accessing Router
Mode
Enabling a routing protocol is a matter of using the ro u te r < r o ut i ng
p r o t o c o l > command at the global configuration prompt. It also worth noting
that this also is the way to enter configuration mode for that routing protocol
should you need to make changes or additional settings to the protocol.

To enable OSPF, the process is the same as with EIGRP, except that instead
of specifying an AS number, you specify what is called an OSPF process ID.
This is a number that can be of your own choosing, and it need not match with
the neighboring routers.

Don't Confuse the OSPF Process ID and
OSPF Area ID!
The OSPF process ID and OSPF area ID are two different concepts
and are configured in two different places. The process ID does not
need to match between OSPF neighbors. It is used to allow you to run
multiple instances of OSPF on the same router . The area ID must match
between the OSPF routers in the same area, for the routers to form an
intra-area neighbor relationship. The process ID is defined in the same
command that enables EIGRP, whereas the area ID is defined in the
same command that defines the networks.

Proceed to global configuration mode and execute the following
command:
Ro ute r (con fi g) #rou t er osp f <p r ocess I D>
Router(config - r o uter)#

Notice that you are also now in configuration mode for the OSPF protocol,
and you would use this same procedure to arrive at the prompt required to
make any additional settings to OSPF.

Defining the Interfaces on Which the Protocol Is
Operational
Defining the interfaces or networks is usually done before leaving the routing
protocol configuration prompt, but it can be done later if desired.

Although you can wait until later to define the networks,
keep in mind that until you define a network for RlP,
EIGRP, or OSPF, no routing will occur!

To define the interfaces, you would use the following procedures to access
the router configuration prompt.

Defining Interfaces in RIP
Defining the interfaces in RIP is done with the ne t wo rk command, at the
protocol configuration prompt, by using the follo\ving syntax:
Ro u ter(co n fi g - r ou t er)#netwo r k

<ne t work I D>

For example, to make RIP operational on an interface with an IP address
of 192.168.5.5/24, the command would be as follows:
Ro u ter(con fi g - r o uter)#network

1 92 . 1 68 . 5 . 0

Defining Interfaces in EIGRP
Defining the interfaces in EIGRP is done with the n e t work command, at the
protocol configuration prompt, by using the following syntax:
Ro ut e r (con fi g - r ou t er)# n etwor k

<ne t work I D>

For example, to make EIGRP operational on an interface with an IP
address of 192.168.5.5/24, the command would be as follows:
Ro u ter(co nfig - r o uter)#netwo rk

192 . 168 . 5 . 0

Defining Interfaces in OSPF
Defining the interfaces in OSPF is done with the networ k command, at the
protocol configuration prompt, by using the following syntax:

Ro u ter (config - router ) #n etwork
mask > <a r ea I D>

<ne t work I D> <wi ldcard

Wildcard Masks
A wildcard mask is a mask used to determine the range of networks on
which OSPF will operate. When creating a wildcard mask, any octets
that are Os must match the network ID specified to be included as an
interface (and thus a network) on which OSPF will operate. Those with
255s need not match. For example, if the network ID is 192.168.5.0,
and the wildcard mask is 0.0.0.255, any interfaces on the router from
192.168.5.1-192. 168.5.254 would be enabled for OSPF .

For example, to make OSPF area 0 operational on an interface with an IP
address of 192.168.5.5/24, you would use this command:
Ro u ter(co n fi g - r o u t er)# n etwo r k

1 9 2 . 1 68 . 5 . 0 0 . 0 . 0 . 255 . area 0

Verifying the Routing Table
The preceding configurations are the simplest possible to get routing working
and are not meant to imply that many more functions cannot be adjusted and
set. The best way to determine whether routing is working is to view the
routing tables to see if the routers are learning routes from one another. Let's
look at some examples for each protocol.

Verifying in RIP
Consider the network displayed in Figure 16-3.
Figure 16-3: RIP example

M t

al co

dt

""'

d

ora

"""""

10.0.0.018

f.o/1

R2

f>Q/2

A3

192.1&1.6/l4 .-- 171.16S.MII6
F>0/2
192.18.5.5124

.,. -

fall/!
172.165.0.7116

Don
15.0.0.118

Just as a review, let' s look at the commands that would set all three routers
up to run RIP successfully .
R1 (con fi g)# r ou t er r i p
R1 (con fi g - r ou t er)#network 10 . 0 . 0 . 0
R1( config - r o uter)#network 192 . 168 . 5 . 0
R2(config)#r o uter rip
R2(con fi g - r ou t er)#network 192 . 198 . 5 . 0
R2(con fi g -r ou t er)#network 172 . 165 . 0 . 0
R3(co n fi g)# r ou t er r i p
R3(con f i g - r ou t er)#network 172 . 165 . 0 . 0
R3(config - r o uter)#network 15 . 0 . 0 . 0

That should get routing working. To verify this, execute the show
r ou te command on each router. All four routes should be in all tables.

•

lp

R1>show i p route
Codes : I - I GRP der i ved , R - RI P der i ved , 0 - OS PF
der i ved ,
C - c o nnected , S - static D - EIGRP
<o utput o mitted>
C
C
R
R

10 . 0 . 0 . 0 is direct l y c o nnected , FastEthernet 0/1
1 92 . 168 . 5 . 0 is d i rect ly connec ted , FastE t he r ne t 0/2
1 72 . 165 . 0 . 0/ 1 6 [1 20/ 1 ] v i a 1 92 .1 68 . 5 . 5
1 5 . 0 . 0 . 0/8 [ 1 20/2 ] v i a 192 . 1 68 . 5 . 5

R2>show ip r o ute

Mar p 1

3ax~lU

lAY~

aero CbKrtM npasoM

Codes : I - IGRP derived , R - RI P derive d , 0 - OS PF
der i ve d ,
C - connec ted , S - s ta t i c D - EI GRP
<ou t p ut o mitted>
C
C
R
R

1 72 . 165 . 0 i s d i rect l y con n ec ted , Fas t Ethe r ne t 0/2
1 92 . 168 . 5 . 0 is directly connected , FastEthernet 0 /1
1 0 . 0 . 0 . 0/8 [ 120 /1 ] v i a 192 . 1 68 . 5 . 6
1 5 . 0 . 0 . 0/8 [ 120/ 1] v i a 192 . 1 68 . 5 . 5

R3>s how l• p r o u t e
Codes : I - I GRP der i ved , R - RI P der i ve d , 0 - OS PF
derived ,
C - connec t ed , S - s t at i c D - EIGRP
<ou t p u t o mitted>
C
C
R
R

1 72 . 1 6 5 . 0 is d i rect l y con nected , FastEthe r ne t 0/ 1
1 5 . 0 . 0 . 0/8 is d i re ct l y connected , FastEthe r net 0/2
1 0 . 0 . 0 . 0/8 [ 1 20 /2 ] v i a 172 . 1 5 . 0 . 7
1 92 . 18 . 5 . 0 / 2 4 [1 20/1 ] via 172 . 1 5 . 0 . 7

As you can see, all routes are present because the routers have shared
their tables. The routes that were learned via RIP are marked with an R. The
information in the brackets after each RIP route is the administrative distance
and the metric (hop count).

Verifying in EIGRP
Consider again the network that was displayed in Figure 16-3 .
Just as a review, let's look at the commands that would set all three routers
up to run EIGRP successfully . The EIGRP AS is 1.
R1 (con fi g)# r ou t e r e i grp 1
R1( config - r o uter)#network 10 . 0 . 0 . 0

Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

Codes : I - IGRP derived , R - RIP derived , 0 - OSP F
der i ve d ,
C - connec t e d , S - s t at i c D - EI GRP
<ou t pu t omitte d >
C
C
D
D

1 72 . 165 . 0 is d i rect l y connected , Fast Ethe r ne t 0/ 1
15 . 0 . 0 . 0/8 is directly c o nnected , FastEthernet 0/2
1 0 . 0 . 0 . 0/8 [90/ 1 56660 ] via 172 . 1 5 . 0 . 7
1 92 . 18 . 5 . 0/2 4 [ 90/ 1 77303]via 172 . 1 5 . 0 . 7

As you can see, all routes are present because the routers have shared
their tables. The routes that were learned via EIGRP are marked with a D.
The information in the brackets after each EIGRP route is the administrative
distance and the metric.

Verifying in OSPF
Consider the network displayed in Figure 16-4.

Figure 16-4: OSPF example
Netwol1t

10.0.0.018

Faotl
R2
FW2
192.18.S.6124 - - 171.165.0.6/16
00'2

192.13.S.SI24

R3
_ <;

Faotl
172.16S.0.71l6

FW2
IS.O.O.VS

.

...-

IS.O.O.OIS

Just as a review, let's look at the commands that would set all three routers
up to run OSPF successfully . The OSPF process ID is 1, and the area ID for
all routers is 0.
R1 (co n fi g)
R1 (config R1 (config 0 . 0 . 0 . 255

#rou t e r os pf 1
r o uter)#network 10 . 0 . 0 . 0 0 . 255 . 255 . 255 area 0
r o uter)#network 192 . 168 . 5 . 0
ar ea 0
Mar

p1

3ax~lU

lAY~

aero

CbKrtM npasoM

0

1 5 . 0 . 0 . 0/8 [ 110/1 ] v ia

192 . 168 . 5 . 5

R3>show i p r o ute
Codes : I - I GRP d er i ved , R - RIP der i ved , 0 - OS PF
der i ve d ,
C - c o nnected , S - sta t ic D - EIGRP
<o utput o mitted>
C
C
0
0

1 72 . 165 . 0 is d i rect ly c o nnected , FastEthe r ne t 0/ 1
1 5 . 0 . 0 . 0/8 is d i rect l y connect ed , FastEt he r ne t 0/ 2
1 0 . 0 . 0 . 0/8 [ 11 0/2 ] v i a 172 . 15 . 0 . 7
1 92 . 18 . 5 . 0/2 4 [ 11 0/ 1 ] v ia 17 2 . 1 5 . 0 . 7

As you can see, all routes are present because the routers have shared
their tables. The routes that were learned via OSPF are marked with an o.
The information in the brackets after each OSPF route is the administrative
distance and the metric.

The Essentials and Beyond
There are two basic types of routing protocols: interior and exterior.
Exterior routing protocols are used between autonomous systems, and
interior routing protocols are used within an AS. Cisco defines three
types of interior routing protocols that function on their routers:
distance-vector, link-state, and hybrid. These interior routing protocols
differ in their metric, number of tables or components used, speed of
convergence, amount of routing traffic generated, and the complexity
of configuration. Routing Internet Protocol (RIP) is a distance-vector
routing protocol that uses only routing tables to store information. RIP
can store multiple routes to the same destination and uses a metric
called hop count. Distance-vector protocols such as RIP use a number
of techniques to prevent routing loops, including split horizon, poison
reverse, and hold-down timers. Enhanced Interior Gateway Routing

Protocol (EIGRP) is Cisco proprietary and is considered a hybrid
protocol because it has characteristics of both distance-vector and linkstate routing protocols. While it uses a composite metric, it uses some
features of distance-vector routing such as a maximum hop count
(255) and loop avoidance techniques such as split horizon and poison
reverse . Open Shortest Path First (OSPF) is an industry-standard
protocol designed to operate more efficiently than RIP or EIGRP in
very large networks . It uses areas. It contains detailed routing
information about an area to that area and sends only a summary of
information to other areas, which keeps OSPF routing tables smaller.
Routing protocols are configured by enabling the routing protocol and
defining the interfaces on which the protocol is operational.

Additional Exercises
1. In this exercise, you will configure a set of three routers to operate
using the EIGRP protocol. The process ID is 1. This exercise assumes
that you have cabled and configured the three routers using the IP
addresses shown in Figure 16-5. Your interface numbers may be
different, so take that into consideration.

Figure 16-5: Routers configuration exercise
Nttwo<l<
_Q$.0.0116
~ \

- ...~J
C>s
~

Fa0/1

R1

Fa0/1

R2

FaM

raon

199.8.9.1124

R3

---r.w.Q

1 15.15.0.1/16·~
.8.9:!!!:.
.2124~--~~56~
.0.0.~1/8
,. ...~~199~

.,....

Fa0/1
56.0.0.2/8

Fa012
172.16.0.1116

-=
_
....
........ )
;(

~

Network
172.16.0.0116

2. Use the s h ow i p r o ute command and the p i n g command to verify
the routing tables.

Review Questions
1. Which of the following is not an interior routing protocol?

Mar

·p1

3ax~lU

lAY~

aero

CbKrtM npasoM

A . BGP
B. RIP
C. EIGRP
D. OSPF
2. A protocol uses only hop count as a metric.
A . Link -state
B . Distance-vector
C. Hybrid
D . Spanning tree
3. Which of the following has the slowest convergence?

A . STP
B . RIP
C. EIGRP
D. OSPF
4. Which of the following is the most complex to configure?

A . STP
B . RIP
C. E IGRP
D . OSPF
5. Which of the following has a maximum hop count of 255 by
default?

A . BGP
B . RIP

C. EIGRP
D. OSPF
6. Which loop avoidance tneasure prevents the router from ever
advertising (sending a routing update) back in the direction from
which it came?
A. Spanning Tree Protocol
B . Poison reverse
C. Split horizon
D . Count to infinity
7. How often do RIP routers send routing updates to adjacent RIP
routers ?
A. Every 10 seconds
B . Every 15 seconds
C. Every 30 seconds
D . Every 45 seconds
8. Which if the following is not a table used by EIGRP?
A . Routing
B. Topology
C. Neighbor
D. Link-state
9. Which table contains the feasible successor?
A . Routing
B. Topology

C. Neighbor
D . Link -state
10. After the routing protocol is defined, at which of the following
prompts is the interface on which it is operational defined?
A . Ro u te r (con f ig)#
B . Ro ut er (co nfig - r ou t er )#
C . Rou t e r (co n fi g - if )#

D . Ro u ter #

Appendix: Answers to Review Questions

Chapter 1
1. B Security is increased when computers are networked because data can
be transferred securely between computers.

2. B A directory services server forms a security association between
network members and helps to locate resources.

3. B Only two computers are required to form a network.
4. True Telecommuting helps save gas and commuting time by allowing
work from home or another location remote from the LAN.

5. C A protocol, an agreement on how the data is packaged, forms a
communications agreement between the computers.
6. A Proprietary refers to any process or way of doing something that works
only on a single vendor's equipment.

7. B A LAN is a high-speed data network covering a small geographical
area.
8. F alse A de facto standard is one that becomes the standard simply by
being the method all parties gradually choose to use over a period of time,
without a formal adoption process.

9. C A peer-to-peer network is also sometimes called a workgroup.
10. D Because of broadcast traffic, a peer-to-peer network will experience
network congestion.

Chapter 2
1. B Networking reference models encourage standardization but they do
not in and of themselves ensure any particular performance level for a
network.

2. C The Department of Defense (DoD) created a four-layer model in the
early 1970s based on the protocol that eventually became the protocol of
the Internet and later the de facto standard for LAN protocols, called the
TCP/IP, or Internet, model.

3. B, C, D The Application, Presentation, and Session layers map to the
Application layer of the DoD, or TCP/IP, model.
4. C, D The Data-Link and the Physical layers map to the Application layer
of the DoD, or TCPIIP, model.
5. B The Session layer of the OSI model is responsible for coordinating the
exchanges of information between the layer 7 applications or services that
are 1n use.
0

6. C IP addresses are used on layer 3 (the Network layer) of the OSI model.

7. C TCP 23 communicates the transport protocol (TCP) and the port
number (23).
8. A The port numbers 1-1 ,023 are standardized and are called well-known
port numbers.
9. C A unicast is used from one device to another device, on a one-to-one
basis.

10. C Broadcast and multicast traffic both use UDP.

Chapter 3

2. B NetBEUI, an early Microsoft protocol, was designed as a protocol
for small workgroups of computers that were located on the same physical
segment. NetBEUI is not routable.
3. C DNS resolves computer names to IP addresses and operates at the
Application layer.

4. B File Transfer Protocol (FTP) is a connection-oriented protocol
dedicated to moving files from one computer to another. FTP operates at
the Application layer.
5. C The port number is UDP 69 to begin the connection, but the client and
server may change to random ports for the transfer afterward.
6. C TFTP is used to transfer a router operating system (called the Cisco
lOS) from a TFTP server to a route.

7. D Queries are used in DNS, not SNMP.
8. B TCP is responsible for sequencing the packets.
9. B The three steps are SYN, SYN-ACK, and ACK.
10. C The protocol number is found in the IP header.

Chapter 5
1. C A point-to-multipoint topology is an example of a WAN topology.

2. False A token ring topology is a physical star but is logically a ring
topology .

3. B Each end of the bus topology must have a special connector called a
terminator installed.
4. D A ring topology does not require terminators.
5. A A star topology uses either switches or hubs.

6. D Although it is expensive to implement and maintain, the mesh
topology provides the best fault tolerance.

7. C The point-to-multipoint topology requires that a physical interface be
divided logically into multiple subinterfaces on the router.
8. C A Token Ring is physically a star topology with the devices all
connected to a central device called a Media Access Unit (MAU).
9. C A Fiber Distributed Data Interface (FDDI) ring uses a double ring for
fault tolerance.
10. A The contention method used in an Ethernet star is called Carrier
Sense Multiple Access/Collision Detection (CSMA/CD).

Chapter 6
1. D MAC addresses use hexadecimal, not binary.

2. B Any number to the zero power is 1.

3. C The Unicode system represents multiple language characters with
2-byte, or 16-bit, patterns.
4. D Hex is used in MAC addresses and in memory addressing.
5. C IPv6 uses hexadecimal.

6. C Because hex uses powers of 16 for each place in the number, it can
represent very large numbers concisely.
7. B A MAC address is also called a burned-in address (BIA).

8. A The Organizationally Unique Identifier (OUI) identifies the
manufacturer.
9. D The right half is called the Universally Administered Address (UAA)
and identifies the network card.

10. B 00/50/56/C0/00/08 is not an accepted representation of a MAC
address.

Chapter 7
1. C Segmentation yields all of the listed benefits except requiring less
hardware. It may even require more hardware.

2. False With smaller LANs segmented by routers, network problems are
easier to isolate.
3. D The value of the first octet (the octet to the far left) determines the class
in which an IP address resides. The range for Class B is 128-191.

4. D The most significant bits of the three classes are as follows:

Class A
Class B
Class C

000
100
110

5. C, D 127.0.0. 1 is the IPv4 loopback address, and :: 1 is the IPv6 loopback
address.

6. C The first three octets make up the network portion of a Class C address.
7. B The private IP address ranges are as follows :
• 10.0.0.0-1 0.255.255.255
• 172.16.0.0-1 72.31.255.255
• 192.168.0.0-192.168.255.255

8. C When you can ping a computer by its IP address but you can't connect
to a service running on the computer, you can ping the port number of that
service to see whether the port is blocked or the service is not functioning.
Port numbers are on the Transport layer.

9. C The command arp - a displays all the current ARP entries for all
interfaces.

10. C The order is DHCPDiscover, DHCPOffer, DHCPRequest, and
DHCPAck.

Chapter 8
1. A The design flaws resulted in three main issues :
• Exhaustion of the Class B network address space
• Unmanageable routing tables
• Exhaustion of the 32-bit IPv4 address space

2. B A is not an issue resulting from classful subnetting. C and D were
addressed by the introduction of Classless Inter-Domain Routing (CIDR).
B was partially addressed but \Vas not fully addressed until the development
of IPv6.
3. B Classful IP addressing not only resulted in the overuse of the Class B
space, but also resulted in many wasted IP addresses in most cases.
4. C Network summarization reduces the number of networks in the routing
table and allows routers to make quicker routing decisions.
5. B When an organization with 5,000 computers requiring Internet access
can be represented by a single public IP address as is possible \Vith NAT, it
helps to save public IP addresses.

6. A Breaking a larger network into a number of smaller subnets increases
performance by reducing the number of computers per subnet, thereby
lowering the chances of collisions and reducing the amount of broadcast
traffic produced.
7. C With 20 bits in the subnet mask, the subnet mask in binary is
11111111 .11111111.11110000.00000000, which in dotted decimal is
255.255.240.0.

8. D For 39 subnets, 6 bits must be added for subnets. When added to the
16 bits for a Class B address, the result is /22.

9. A To have subnets large enough for 78 hosts, 7 bits must be left for host
bits, leaving 25 bits in the mask.

10. B With a /23 mask, the interval, or block size, is 2. If the network ID
is 172.168.8.0, the next network ID will be 172.168.10.0, so the range is
172.16.8.1/23-172.168.9.254/23.

Chapter 9
1. D Stolen login passwords can just as easily occur on a wired network
as a WLAN. Rogue access points could occur in only a WLAN. Wireless
transmissions and the data they contain can be captured by any one in
the transmission area, and while it is easy to make a connection to an
unauthenticated WLAN, physical access to a port is required on a cabled
LAN.
2. D 1 Gbps to the desktop is almost 10 times what wireless can currently
deliver at its best to the desktop .

3. B The SSID is displayed in transmissions between legitimate users and
the AP. It is not displayed in beacon frames, it is not the MAC address of
the AP , and no channels are hidden.

4. D Port-scanning software is not required, although it could be used as
part of the peer-to-peer attack after the highjack has occurred. The highjack
attack requires an AP, DHCP, knowledge of the SSID and the channel, and
.
a Jammer.

5. A A cabled LAN is always more secured than a WLAN. The WLAN is
more convenient, cheaper, and easier to install.

6. B The loss of energy as an electrical signal travels down a wire or an
optical signal travels down a glass tube is called attenuation.

7. A Electromagnetic interference is called EMI.
8. C Coaxial cabling is familiar to anyone who has had cable TV. It has
either a solid copper wire or a stranded copper wire in the center.
9. C 10Base5 coaxial transceivers are connected to cable segments with
either N-connectors or a vampire tap.

10. C The twisting mitigates a behavior called crosstalk that occurs when
the twisting is not in place. Crosstalk occurs when the signals on one wire
interfere with those on another wire.

Chapter 10
1. B Repeaters operate at the Network Access layer.

2. D A repeater takes the original signal and amplifies, or boosts, the
signal. After the signal has traversed a certain length of cable, the signal
strength is gradually weakened by the resistance in the cable (which is
called attenuation).

3. D Routers operate at the Internet layer of the TCPIIP model and make
routing decisions based on IP address information.
4. A On hubs, all of the ports are on a shared network. They all exist in one
collision domain.
5. A Both bridges and switches perform MAC address learning.
6. A Switches do not use IP address information for filtering.
7. C Multilayer switches perform routing and switching and thus operate on
both the Network Access and the Internet layer.
8. B There are no multicast routes in a routing table.

9. A If a router is configured with a default route and you issue the
command to show all routes (show ip r o ute) , this route will be referred
to as the gateway of last resort.
10. A Dynamic routing protocols create more network traffic, because they
send routing updates.

Chapter 11
1. A A routing table entry will consist of network, population method, next

hop, exit interface, and metric.
2. B Route tables cannot be populated using DHCP.
3. D The method is indicated by a letter next to the network ID. C indicates
directly connected, S indicates static, and if the route came from another
router, a letter that represents that particular routing protocol (such as R for
Routing Internet Protocol, or RIP) will be used.
4. C The section 0 :01 :50 states the time in terms of hours: minutes: seconds.
5. D Border Gateway Protocol (BGP) is an exterior routing protocol.

6. B RIP uses hop count as its sole metric.
7. A The default AD ofEIGRP is 90.
8. D Static routes have an AD of 1, which is a lower AD than any of the
routing protocols listed.

9. C RIP sends regular routing updates every 30 seconds.
10. B Split horizon is a routing rule built into the protocol (no need to
enable it or anything) that prevents a router from advertising a route to the
same interface on which it was learned. The assumption is that if a router is
attempting to advertise a route back in the direction from whence it came, a
loop is occurring.

Chapter 12
1. C The Cisco lOS tables and the running configuration are located in

RAM after startup.
2. B NVRAM contains both the configuration register and the startup
configuration.
3. C Only RAM loses its information when power is lost.
4. C It is not required that the device have a name configured.

5. C A console cable has a serial connector on one end and an RJ-45
connector on the other.
6. B By default, the only mode in which you will be prompted for a
password is privileged.
7. A The > prompt indicates user mode.
8. A The bootstrap code is loaded from ROM first.

9. A Once the lOS becomes operational, it loads the startup configuration
file located in NVRAM. After that file is read, system messages will begin
to appear.
10. B If you are unsure of the room, you can check the available space in
flash by using the show f 1 ash command. The output you receive will tell
you the name of the current lOS file, its size, and the amount of space that
remains available.

Chapter 13
1. A An Attachment Unit Interface (AUI) connector is Ethernet.

2. B The AUX port is used for a modem.
3. C The DCE end of the process provides the clocking for the connection.

Chapter 16
1. A Exterior routing protocols such as Border Gateway Protocol (BGP) are
used between autonomous systems.

2. B A distance-vector protocol uses only hop count as a metric.
3. B RIP is the slo\vest to converge.
4. D OSPF is the most complex to configure.

5. C EIGRP has a maximum hop count of 255 by default.
6. C Split horizon, a rule to which all RIP routers adhere, prevents the router
from ever advertising (sending a routing update) back in the direction from
which it came.
7. C RIP routers send routing updates to adjacent RIP routers every 30
seconds.
8. D Link-state tables are used by OSPF.
9. B The topology table contains all routes to all networks received from its
EIGRP neighbors, including the feasible successor.
10. B Defining the interfaces is done with the ne t work command, at the
protocol configuration prompt, using the following syntax:
Router(config - r oute r )#ne t work <netwo r k ID>

Index
A
ABRs (area border routes)
access control lists (ACLs)
access layer
TCP/IP model. See Network Access layer
three-layer model
access links in switch connections
access modes in lOS
access points (APs)
defined
.

overview
rogue
access tokens in client -server networks
ACK (acknowledgment packets)
Acknowledgment number field in TCP headers
ACLs (access control lists)
Address Resolution Protocol (ARP)
broadcasts
description
MAC-to-IF-address conversion
addresses
broadcast
Internet layer
IP. See IP addresses

areas in OSPF
ARP (Address Resolution Protocol)
broadcasts
description
MAC-to-IF-address conversion
arp command
ARPA (Advanced Research Projects Agency)

ARPANET
AS (autonomous system)
description
OSPF
routing tables
ASBRs (autonomous system border routers)
ASICs (application-specific integrated circuits)
associated devices
Attachment Unit Interface (AUI) style
attenuation, cable
description
repeaters for
AUI (Attachment Unit Interface) style
authentication
FTP
open networks
automatic crossover
autonomous system (AS)
description
OSPF
routing tables

autonomous system border routers (ASBRs)
autonomous system numbers
aux connections

B
back -to-back cable
backbone cables
backplanes, router
bandwidth of media
base-2 numbering system
binary-to-hex conversion
for computers
decimal-to-binary conversion
.

overview
base-16 numbering system
hex-to-decimal conversion
MAC addresses
.

overview
base in cable designation
Basic Service Set (BSS)
beacon frames
Becker, Joe
BIAs (burned-in addresses)
binary numbering system
binary-to-hex conversion
for computers
decimal-to-binary conversion
•

overview

clock rates
description
router connections to
chatty protocols
Checksum field
TCP headers
UDP headers
checksums
IP headers
UDP headers
CIDR. See Classless Inter-Domain Routing (CIDR)
Cisco 171 routers
Cisco 1841 routers
Cisco 250 1 routers
Cisco Binary Game
Cisco DHCP
Cisco three-layer model
classful IP addressing
Class B address exhaustion
classes
DHCP
diagnostic tools
essentials
.

exercises
functions
identification
IPv
network and host addresses

colons (:) in IPv 142
COMI Properties dialog box
communications
LAN operations
network benefits
transmission types
communications agreements
complexity in dynamic routing
0

compression
computers
for networks
numbering system for
config-register command
configuration files
configuration registers
configure tenninal command
congestion sources
Connect To dialog box
connecting to devices
Connection Description dialog box
connection-oriented protocols
connectors
console sessions
routers
switches
contention methods

802.85
LAN operations

defaults
gateways
routes
subnet masks
Department of Defense (DoD) model
designated routers (DRs)
Destination Address field in IP headers
destination devices in OSI encapsulation
Destination port field
TCP headers
UDP headers
Destination Unreachable error
devices overview
bridges
broadcast domains
Cisco three-layer model
collision domains
connecting to
essentials
.

exerc1ses
functions
hubs
repeaters
review questions
routers
switches
wireless APs
wireless routers

DHCP (Dynamic Host Configuration Protocol)
broadcasts
Cisco
operations
routers
diagnostic tools for IP addresses
diameter of networks
Differentiated Services Code Point (DSCP) field in IP headers
Diffusing Update Algorithm (DUAL)
Dijkstra algorithm
direct-sequence spread spectrum (DSSS)
directory servers
directory services
distance vector routing protocols
distribution layer
DLCis (Data-Link Connection Identifiers)
DNS (Domain Name System)
dns-server command
DoD (Department of Defense) model
domain-based networks
domain controllers
domain level hierarchy
Domain Name System (DNS)
domains
broadcast
collision
dotted decimal notation
IP addresses

subnetting
DRAM (dynamic random-access memory)
DRs (designated routers)
DSCP (Differentiated Services Code Point) field in IP headers
DSSS (direct-sequence spread spectrum)
DTE (data terminal equipment)
DUAL (Diffusing Update Algorithm)
dumb terminals
Dynamic Host Configuration Protocol (DHCP)
broadcasts
Cisco
operations
routers
dynamic ports
dynamic random-access memory (DRAM)
dynamic routing
essentials
.

exerc1ses
review questions
routers
routing protocols
characteristics
configuring
EIGRP
OSPF
RIP

E

eavesdropping
echo requests and replies
802.1 and 802.2 standards
802.3 standard
802.5 standard
802.11 standard
amendments
description
EIGRP. See Enhanced Interior Gateway Routing Protocol (EIGRP)
elapsed time since last routing update entry
electromagnetic interference (EMI)
email
enable password cisco command
enable pass\;vords
enable secret cisco command
enable secret passwords
encapsulation
Application layer
mismatches
OSI model
routers
static routing
TCP/IP
trunk link with
encrypted passwords
encryption
description
layer selection for

passwords
wireless security
end-to-end LAN communications
Enhanced Interior Gateway Routing Protocol (EIGRP)
autonomous system numbers
dynamic routing
enabling
features
interfaces
verifying
ESS (extended service set)
Ethernet technology
and 802.31
802.11 standard
amendments
description
frames
headers
router connections
exit interfaces on routing tables
extended service set (ESS)
exterior routes in OSPF
exterior routing protocols

F
FCC (Federal Communications Commission)
FCS (frame check sequence)
FDDI (Fiber Distributed Data Interface) ring topologies

feasible distances
feasible successors
Federal Communications Commission (FCC)
FHSS (frequency -hopping spread spectrum)
Fiber Distributed Data Interface (FDDI) ring topologies
fiber-optic cable
file servers
File Transfer Protocol (FTP)
Flags field
IP headers
TCP headers
flapping links
flash memory
flexibility as network benefit
flow control in TCP
flush timers
forklift upgrades
forward/filter decisions for switches
forward slashes (/) in subnet masks
fragment-free method for frame forwarding
Fragment Offset (Offset) field in IP headers
fragments in IP headers
frame check sequence (FCS)
frame flooding
frame fonvarding
ARP
switches
frame headers

Frame Relay
frame tagging
frame trailers
frames
point-to-point topologies
TCP/IP encapsulation
frequencies
frequency -hopping spread spectrum (FHSS)
FTP (File Transfer Protocol)
full-duplex communication

G
gateways, default
gateways of last resort
GetRequest SNMP messages
global addresses in 1Pv143
global configuration mode
guaranteed delivery in TCP

H
half-duplex communication
hardware switches
HDLC (High-level Data Link Control)
Header Checksum field in IP headers
headers
Data-Link layer
Ethernet
IP

Hypertext Markup Language (HTML)
Hypertext Transfer Protocol (HTTP)

I
lANA (Internet Assigned Numbers Authority)
IBSS (independent basic service set)
ICANN (Internet Corporation for Assigned Names and Numbers)
ICMP (Internet Control Message Protocol)
Identification field in IP headers
IEEE (Institute of Electrical and Electronics Engineers)
shorthand
wireless standards
IGMP (Internet Group Management Protocol)
IGRP (Interior Gateway Routing Protocol)
IHL (Internet Header Length) field in IP headers
images, lOS
IMAP (Internet Message Access Protocol)
independent basic service set (IBSS)
infrastructure devices
initial setup for router console sessions
Institute of Electrical and Electronics Engineers (IEEE)
shorthand
wireless standards
Integrated Services Digital Network (ISDN)
integrity and FCS
Inter-Switch Link (ISL) protocol
inter-VLAN routing
interface configuration mode

interface range command
interfaces
defined
routers. See routers
switches
interference
Interior Gateway Routing Protocol (IGRP)
interior routing protocols
International Organization for Standardization (ISO)
Internet Assigned Numbers Authority (lANA)
Internet Control Message Protocol (ICMP)
Internet Corporation for Assigned Names and Numbers (ICANN)
Internet Group Management Protocol (IGMP)
Internet Header Length (IHL) field in IP headers
Internet layer
IP address diagnostic tools
protocols
ARP
ICMP
IGMP
IP
TCP/IP
Internet Message Access Protocol (IMAP)
Internet Protocol (IP)
addresses. See IP addresses
description
headers
Internetwork Operating System (lOS)

IPv
LAN operations
MAC-to-IP-address conversion
Network layer
peer-to-peer networks
routers
subinterfaces
switch sessions
ip dhcp pool command
ip route command
ipconfig command
ipconfig/all command
IPSec (IP Security)
ISDN (Integrated Services Digital Network)
ISL (Inter-Switch Link) protocol
ISO (International Organization for Standardization)

K
keep-alives

L
LANs. See local area networks (LANs)
layers
numbering
OSI. See Open Systems Interconnection (OSI) model
TCP/IP. See Transmission Control Protocol/Internet Protocol (TCPIIP)
LC (lucent connectors)
leading zeros in IPv6

leased lines
legends in routing tables
Length field in UDP headers
line passwords
line vty command
link-local addresses
link state advertisements (LSAs)
link state routing protocols
links
access
OSPF
trunk
LLC (Logical Link Control) layer
local area networks (LANs)
administrative distance
contention methods
end-to-end communications
essentials
.

exercises
Network Access layer protocols
.

overview
review questions
routing process
routing protocols

EIGRP
OSPF
RIP
routing tables

switching process
local hosts in IP addresses
local LAN process
local networks vs. remote
Location Information dialog box
logical addresses in Internet layer
Logical Link Control (LLC) layer
logical topologies
essentials
.

exerc1ses

FDDI
star
Token Ring
loopback addresses
IP addresses
IPv l44
loops
RIP
switches
lowest-cost path method
LSAs (link state advertisements)
lucent connectors (L C)

M
MAC. See Media Access Control (MAC) addresses
man agement information bases (MIB s)
manual summarization
masks

subnet

ARP
IP addresses
routers
VLSM
wildcard
MAUs (Media Access Units)
maximum hop counts in RIP
media
bandwidth
cabling. See cable
convenience
costs
0

essentials
exercises
0

review questions
security
selecting
wireless standards
802.11 amendments
CSMA/CA
standards bodies
WLANs
Media Access Control (MAC) addresses

ARP
changing
Data-Link layer
hexadecimal numbers

IP addresses
IPvl42
LAN operations
MAC address tables
bridges
LAN operations
MAC-to-IP-address conversion
switches
wireless systems
Media Access Units (MAUs)
mesh topologies
metrics
dynamic routing
EIGRP
routing
MIBs (managetnent information bases)
mismatches, encapsulation
modules
most significant bits in IP addresses
multicasts
description
IGMP
IPv6
multilayer switches
multipath
multipart repeaters

N

peer-to-peer
benefits
components
devices. See devices overview
essentials
.

exercises
functions
requirements
next hops in routing tables
nibbles
NIC (Network Information Center)
NMS (network management system)
no login command
no shutdown command
nodes in bus topologies
non-connection-oriented protocols
nonguaranteed delivery in UDP
nonroot port behavior in switches
nonvolatile random access memory (NVRAM)
notation
numbering systems
binary
.

conversions
binary -to-hex
decimal-to-binary
encapsulation process
hex -to-decimal
essentials

.

exercises
layers overview
Network layer
Physical layer
Presentation layer
review questions
Session layer
vs. TCP /IP model
Transport layer
operating system. See Internetwork Operating System (lOS)
operational modes in lOS
Options field in IP headers
Options and Padding field in TCP headers
Organizationally Unique Identifiers (OUis)
OSI. See Open Systems Interconnection (OSI) model
OSPF (Open Shortest Path First) protocol
enabling
interfaces
.

overview
verifying
OSPF process IDs
OUis (Organizationally Unique Identifiers)
overhead
TCP
TFTP
UDP

p

packets
forwarding
IP
TCP/IP encapsulation
three-way handshakes
Padding field in IP headers
parameters
.

parsmg
passive mode in FTP
passwords
configuration register
routers
switches
Telnet
path redundancy in switches
PDUs (protocol data units)
peer-to-peer attacks
peer-to-peer networks
performance in IP address segmentation
peripherals
Phone And Modem dialog box
physical addresses. See Media Access Control (MAC) addresses
physical carrier sense
physical devices
Physical layer in OSI model
physical topologies
bus
hybrid

mesh
point -to-multipoint
point-to-point
.

nng
star
ping command
ICMP
static routing
uses
planes in Unicode system
point-to-multipoint topologies
point-to-point connections
Point-to-Point Protocol (PPP)
point-to-point topologies
.
potson reverse
pool options fir routers
POP3 (Post Office Protocol)
populating routing tables
port density of switches
port flooding
port numbers
ports
multiport repeaters
switches
Post Office Protocol (POP3 )
power-on self-test (POST)
powers of
PPP (Point-to-Point Protocol)

Presentation layer in OSI model
private IP addresses
privileged configuration mode
privileged passwords
problem isolation in IP address segmentation
Programs And Features dialog box
prompts for routers
proprietary methods vs. standard
proprietary protocols
protocol analyzers
FTP
hubs
IP addresses
protocol data units (PDUs)
Protocol field in IP headers
protocols
Application layer
DNS
FTP
SMTP
SNMP
TFTP
essentials
0

exercises
function
Internet layer
ARP
ICMP

IGMP

IP
layers
Network Access layer
LANs
WANs
review questions
routing. See routing protocols
Transport layer
TCP
UDP
public IP addresses

Q
queries in DNS
question marks (?) for commands

R
radio frequency interference (RFI)
random access memory (RAM)
random back-off
CSMA/CA
LAN operations
star topologies
read-only memory (ROM)
realms
rebuilding MAC headers
redundancy in switches

wireless
routing
dynamic. See dynamic routing
Internet layer
LANs
static. See static routing
updates
Routing Internet Protocol (RIP)
dynamic routing
enabling
interfaces
timers
verifying
routing protocols
characteristics
configuring
EIGRP
OSPF
RIP
routing tables
administrative distance

EIGRP
entries
limitations
populating
verifying
RTP (Reliable Transport Protocol)
running configurations

small form-factor pluggable (SFP) connectors
smart serial connectors
SMTP (Simple Mail Transfer Protocol)
snail mail
sneakernet
sniffers
FTP
hubs
IP addresses
SNMP (Simple Network Management Protocol)
software installation benefits of networks
Source Address field in IP headers
source addresses in IPv 144
source devices in OSI encapsulation
Source port field
TCP headers
UDP headers
Spanning Tree Protocol (STP)
special addresses in IPv
speed in cable designation
SPF (Shortest Path First) algorithm
SPF trees
SPIDs (Service Profile Identifiers)
split horizons
SSIDs (Service Set Identifiers)
ST (straight tip) connectors
standard methods vs. proprietary
standards

importance
Internet layer
IP addresses
network IDs
0

overview
VLANs
VLSM
subscriber connectors (SC)
successor routes in EIGRP
summarization
CIDR
EIGRP
RIP
summary links in OSPF
switches (commands)
switches and switchports (devices)
advantages
cable
console sessions
hosts to switches
routers to switches
switches to switches
essentials
0

exercises
interraces
ports
switchport mode
LANs

10Base5 (thicknet) coaxial cable
1OBaseT Ethernet
lOOOOBaseT twisted-pair
terminators in bus topologies
TFTP (Trivial File Transfer Protocol)
thicknet ( 10Base5) coaxial cable
thinnet (1 0Base2) coaxial cable
three-layer model
three-way handshake
Time to Live (TTL) field in IP headers
.

.

tnneout hmers
timers in RIP
TL (Total Length) field in IP headers
token passing
Token Ring topology
top level in DNS
topologies
logical
physical. See physical topologies
topology tables in EIGRP
TOS (Type of Service) field in IP headers
Total Length (TL) field in IP headers
traceroute command
tracert command
trailers
Data-Link layer
Network Access layer
TCP/IP encapsulation

transactions in SMTP
Transmission Control Protocol/Internet Protocol (TCP /IP)
ARP
encapsulation process
essentials
.

exercises
model
Application layer
Internet layer
Network Access layer
vs. OSI model
Transport layer
protocol suite
review questions
transmission mediums
transmission types
transparent bridging
Transport Control Protocol (TCP)
characteristics
DNS
FTP ports
header
.
overview
three-way handshake
Transport layer
unicasts
Transport layer
IP address diagnostic tools

Urgent field in TCP headers
user configuration mode
User Datagram Protocol (UDP)
broadcasts and multicasts
characteristics
DNS
headers
SNMP
TFTP
Transport layer
UTP (unshielded twisted-pair) cable

v
V.35 connectors
Variable-Length Subnet Masking (VLSM)
Version field in IP headers
Virtual LANs (VLANs)
inter-VLAN routing
subnets
switch connections
virtual private networks (VPNs)
VLSM (Variable-Length Subnet Masking)
vty lines

w
WANs (wide area networks)
0

overview
protocols

routers
\¥ell-known ports
Wi-Fi Alliance
Wi-Fi Protected Access (WP A)
wide area networks (WANs)
.

overview
protocols
routers
wildcard masks
Window field in TCP headers
windowing in T CP
WIPS (Wireless Intrusion Prevention System) devices
wireless access points
defined
.

overview
rogue
Wireless Intrusion Prevention System (WIPS) devices
wireless LANs (WLANs)
wireless routers
wireless standards
802.11 amendments
CSMA/CA
standards bodies
WLANs
wireless stations
wireless systems
packet captures
security

wiring standards
WLANs (wireless LANs)
workgroups
WPA (Wi-Fi Protected Access)

z
zero networks
zeros in IPv6
zones and zone transfers in DNS

